{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://@alixlahuec/latex-roam/webpack/runtime/chunk loaded","webpack://@alixlahuec/latex-roam/external window \"ReactDOM\"","webpack://@alixlahuec/latex-roam/external window \"React\"","webpack://@alixlahuec/latex-roam/external window [\"Blueprint\",\"Core\"]","webpack://@alixlahuec/latex-roam/external window [\"Blueprint\",\"Select\"]","webpack://@alixlahuec/latex-roam/./src/hooks/useBool.js","webpack://@alixlahuec/latex-roam/./src/hooks/useSelect.js","webpack://@alixlahuec/latex-roam/./src/hooks/useText.js","webpack://@alixlahuec/latex-roam/./node_modules/client-zip/index.js","webpack://@alixlahuec/latex-roam/./src/utils.js","webpack://@alixlahuec/latex-roam/./src/translator/regex.js","webpack://@alixlahuec/latex-roam/./src/translator/table.js","webpack://@alixlahuec/latex-roam/./src/translator/markup.js","webpack://@alixlahuec/latex-roam/./src/translator/code.js","webpack://@alixlahuec/latex-roam/./src/roam.js","webpack://@alixlahuec/latex-roam/./src/translator/doublePar.js","webpack://@alixlahuec/latex-roam/./src/translator/blockEmbed.js","webpack://@alixlahuec/latex-roam/./src/translator/pageEmbed.js","webpack://@alixlahuec/latex-roam/./src/translator/expand.js","webpack://@alixlahuec/latex-roam/./src/translator/mathMode.js","webpack://@alixlahuec/latex-roam/./src/translator/doubleBraces.js","webpack://@alixlahuec/latex-roam/./src/translator/figure.js","webpack://@alixlahuec/latex-roam/./src/translator/specialReferences.js","webpack://@alixlahuec/latex-roam/./src/translator/citekeys.js","webpack://@alixlahuec/latex-roam/./src/translator/common.js","webpack://@alixlahuec/latex-roam/./src/translator/createTEX.js","webpack://@alixlahuec/latex-roam/./src/extension.js","webpack://@alixlahuec/latex-roam/./src/constants.js","webpack://@alixlahuec/latex-roam/./src/components/ExportDialog.jsx","webpack://@alixlahuec/latex-roam/./src/components/ExportButton.jsx","webpack://@alixlahuec/latex-roam/./src/components/GraphWatcher/index.jsx","webpack://@alixlahuec/latex-roam/./src/components/GraphWatcher/utils.js","webpack://@alixlahuec/latex-roam/./src/components/App.jsx","webpack://@alixlahuec/latex-roam/./src/setup.js","webpack://@alixlahuec/latex-roam/./src/index.js","webpack://@alixlahuec/latex-roam/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://@alixlahuec/latex-roam/./node_modules/prop-types/index.js","webpack://@alixlahuec/latex-roam/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://@alixlahuec/latex-roam/webpack/bootstrap","webpack://@alixlahuec/latex-roam/webpack/runtime/compat get default export","webpack://@alixlahuec/latex-roam/webpack/runtime/define property getters","webpack://@alixlahuec/latex-roam/webpack/runtime/hasOwnProperty shorthand","webpack://@alixlahuec/latex-roam/webpack/runtime/jsonp chunk loading","webpack://@alixlahuec/latex-roam/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactDOM\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"Blueprint\"][\"Core\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"Blueprint\"][\"Select\"];","import { useCallback, useState } from \"react\";\n\n/** Custom hook for handling component state that takes a boolean\n * @param {*} initialState \n * @returns \n */\nconst useBool = (initialState = false) => {\n\tconst [state, setState] = useState(initialState);\n\t\n\tconst toggle = useCallback(() => {\n\t\tsetState(prevState => !prevState);\n\t}, []);\n    \n\tconst set = useCallback((value) => {\n\t\tsetState(value);\n\t}, []);\n\n\tconst on = useCallback(() => setState(true), []);\n\n\tconst off = useCallback(() => setState(false), []);\n\n\treturn [state, { set, toggle, on, off }];\n};\n\nexport default useBool;","import { useCallback, useState } from \"react\";\n\nconst defaultTransform = (value) => value;\n\n/** Custom hook for working with component state that works with a target select\n * @param {{start: any, transform: function}} config \n * @returns {[any, function]}\n */\nconst useSelect = ({ start = null, transform = defaultTransform }) => {\n\tconst [state, setState] = useState(start);\n\n\tconst set = useCallback((event) => {\n\t\tsetState(transform(event.currentTarget.value));\n\t}, [transform]);\n\n\treturn [state, set];\n};\n\nexport default useSelect;","import { useCallback, useState } from \"react\";\n\n/** Custom hook to work with component state that is based on a text input\n * @param {string} initialState - The initial value for the text input\n * @returns {[string, function]}\n */\nconst useText = (initialState = \"\") => {\n\tconst [state, setState] = useState(initialState);\n\n\tconst set = useCallback((event) => {\n\t\tsetState(event.target.value);\n\t}, []);\n\n\treturn [state, set];\n};\n\nexport default useText;","\"stream\"in Blob.prototype||Object.defineProperty(Blob.prototype,\"stream\",{value(){return new Response(this).body}}),\"setBigUint64\"in DataView.prototype||Object.defineProperty(DataView.prototype,\"setBigUint64\",{value(e,n,i){const o=Number(0xffffffffn&n),f=Number(n>>32n);this.setUint32(e+(i?0:4),o,i),this.setUint32(e+(i?4:0),f,i)}});var e=e=>new DataView(new ArrayBuffer(e)),n=e=>new Uint8Array(e.buffer||e),i=e=>Math.min(4294967295,Number(e)),o=e=>Math.min(65535,Number(e));function f(e,i,o){if(void 0===i||i instanceof Uint8Array||(i=s(i)),void 0===o||o instanceof Date||(o=new Date(o)),e instanceof File)return{i:i||s(e.name),o:o||new Date(e.lastModified),A:e.stream()};if(e instanceof Response){const n=e.headers.get(\"content-disposition\"),f=n&&n.match(/;\\s*filename\\*?=[\"']?(.*?)[\"']?$/i),a=f&&f[1]||new URL(e.url).pathname.split(\"/\").pop(),r=a&&decodeURIComponent(a);return{i:i||s(r),o:o||new Date(e.headers.get(\"Last-Modified\")||Date.now()),A:e.body}}if(!i||0===i.length)throw new Error(\"The file must have a name.\");if(void 0===o)o=new Date;else if(isNaN(o))throw new Error(\"Invalid modification date.\");if(\"string\"==typeof e)return{i,o,A:s(e)};if(e instanceof Blob)return{i,o,A:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{i,o,A:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{i,o,A:n(e)};if(Symbol.asyncIterator in e)return{i,o,A:a(e)};throw new TypeError(\"Unsupported input format.\")}function a(e){const n=\"next\"in e?e:e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){let i=0;for(;e.desiredSize>i;){const o=await n.next();if(!o.value){e.close();break}{const n=r(o.value);e.enqueue(n),i+=n.byteLength}}}})}function r(e){return\"string\"==typeof e?s(e):e instanceof Uint8Array?e:n(e)}function s(e){return(new TextEncoder).encode(String(e))}var A=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob(\"AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBw0DAW0CAAF0AAABYwABCpUBAkkBA38DQCABIQBBACECA0AgAEEBdiAAQQFxQaCG4u1+bHMhACACQQFqIgJBCEcNAAsgAUECdCAANgIAIAFBAWoiAUGAAkcNAAsLSQEBfyABQX9zIQFBgIAEIQJBgIAEIABqIQADQCABQf8BcSACLQAAc0ECdCgCACABQQh2cyEBIAJBAWoiAiAASQ0ACyABQX9zuAs\"),(e=>e.charCodeAt(0))))),{t,c,m}=A.exports;t();var d=n(m).subarray(65536);function u(e,n=0){for(const i of function*(e){for(;e.length>65536;)yield e.subarray(0,65536),e=e.subarray(65536);e.length&&(yield e)}(e))d.set(i),n=c(i.length,n);return n}function y(e,n,i=0){const o=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,f=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;n.setUint16(i,o,1),n.setUint16(i+2,f,1)}function l(i){const o=e(30);return o.setUint32(0,1347093252),o.setUint32(4,754976768),y(i.o,o,10),o.setUint16(26,i.i.length,1),n(o)}async function*B(e){let{A:n}=e;if(\"then\"in n&&(n=await n),n instanceof Uint8Array)yield n,e.u=u(n,0),e.l=BigInt(n.length);else{e.l=0n;const i=n.getReader();for(;;){const{value:n,done:o}=await i.read();if(o)break;e.u=u(n,e.u),e.l+=BigInt(n.length),yield n}}}function w(o,f){const a=e(16+(f?8:0));return a.setUint32(0,1347094280),a.setUint32(4,o.u,1),f?(a.setBigUint64(8,o.l,1),a.setBigUint64(16,o.l,1)):(a.setUint32(8,i(o.l),1),a.setUint32(12,i(o.l),1)),n(a)}function b(o,f,a=0){const r=e(46);return r.setUint32(0,1347092738),r.setUint32(4,755182848),r.setUint16(8,2048),y(o.o,r,12),r.setUint32(16,o.u,1),r.setUint32(20,i(o.l),1),r.setUint32(24,i(o.l),1),r.setUint16(28,o.i.length,1),r.setUint16(30,a,1),r.setUint16(40,33204,1),r.setUint32(42,i(f),1),n(r)}function C(i,o,f){const a=e(f);return a.setUint16(0,1,1),a.setUint16(2,f-4,1),16&f&&(a.setBigUint64(4,i.l,1),a.setBigUint64(12,i.l,1)),a.setBigUint64(f-8,o,1),n(a)}export var downloadZip=r=>new Response(a(async function*(f){const a=[];let r=0n,s=0n,A=0;for await(const e of f){yield l(e),yield e.i,yield*B(e);const n=e.l>=0xffffffffn,i=12*(r>=0xffffffffn)|28*n;yield w(e,n),a.push(b(e,r,i)),a.push(e.i),i&&a.push(C(e,r,i)),n&&(r+=8n),s++,r+=BigInt(46+e.i.length)+e.l,A||(A=n)}let d=0n;for(const e of a)yield e,d+=BigInt(e.length);if(A||r>=0xffffffffn){const i=e(76);i.setUint32(0,1347094022),i.setBigUint64(4,BigInt(44),1),i.setUint32(12,755182848),i.setBigUint64(24,s,1),i.setBigUint64(32,s,1),i.setBigUint64(40,d,1),i.setBigUint64(48,r,1),i.setUint32(56,1347094023),i.setBigUint64(64,r+d,1),i.setUint32(72,1,1),yield n(i)}const u=e(22);u.setUint32(0,1347093766),u.setUint16(8,o(s),1),u.setUint16(10,o(s),1),u.setUint32(12,i(d),1),u.setUint32(16,i(r),1),yield n(u)}(async function*(e){for await(const n of e)n instanceof File||n instanceof Response?yield f(n):yield f(n.input,n.name,n.lastModified)}(r))),{headers:{\"Content-Type\":\"application/zip\",\"Content-Disposition\":\"attachment\"}});","/* eslint-disable no-useless-escape */\n\n// From Jason Yu: https://dev.to/ycmjason/stringprototypereplace-asynchronously-28k9\nasync function asyncReplaceAll(str, regex, asyncReplaceFn){\n\tconst substrs = [];\n\tlet match;\n\tlet i = 0;\n\n\t// The regex needs to be cloned, because global regexes are stateful\n\t// (.lastIndex will be kept in memory, which can cause an infinite loop\n\t// if we match against the same regex at a different step in the stack)\n\tconst regexClone = new RegExp(regex, regex.flags);\n\n\twhile ((match = regexClone.exec(str)) !== null) {\n\t\t// Push the non-matching string\n\t\tsubstrs.push(str.slice(i, match.index));\n\t\t// Call the async replacer function with the match information\n\t\t// The asyncFn receives (match, p1, p2, p3, ...)\n\t\tsubstrs.push(asyncReplaceFn(...match));\n\t\ti = regexClone.lastIndex;\n\t}\n\t// Push the rest of the string\n\tsubstrs.push(str.slice(i));\n\t// Wait for the asyncFn calls to finish, and join all the pieces back into one string\n\treturn (await Promise.all(substrs)).join(\"\");\n}\n\nfunction cleanUpHref({ text, url }){\n\tlet target = url;\n\ttarget = target.replaceAll(/\\\\\\&/g, \"&\");\n\ttarget = target.replaceAll(/\\\\\\%/g, \"%\");\n\n\treturn `\\\\href{${target}}{${text}}`;\n}\n\n/** Checks if the contents of a NodeList have changed\n * From mauroc8 on SO: https://stackoverflow.com/questions/51958759/how-can-i-test-the-equality-of-two-nodelists\n * @param {NodeList} prev - The previous contents of the NodeList\n * @param {NodeList} current - The current contents of the NodeList\n * @returns {Boolean} `true` if the NodeList has changed ; `false` otherwise\n */\nfunction hasNodeListChanged(prev, current){\n\treturn (prev.length + current.length) != 0 && (prev.length !== current.length || prev.some((el, i) => el !== current[i]));\n}\n\nasync function makeBibliography(citekeys){\n\tif(!window.zoteroRoam){\n\t\tthrow new Error(\"No instance of zoteroRoam was found\");\n\t} else {\n\t\tconst instance = window.zoteroRoam;\n\t\tif(!instance.getBibEntries){\n\t\t\tthrow new Error(\"The zoteroRoam instance does not expose bibliographic entries.\");\n\t\t} else {\n\t\t\treturn await instance.getBibEntries(citekeys);\n\t\t}\n\t}\n}\n\nfunction sortRoamBlocks(arr){\n\treturn [...arr].sort((a,b) => a.order < b.order ? -1 : 1);\n}\n\nfunction todayDMY(){\n\tconst today = new Date();\n\tconst dd = String(today.getDate()).padStart(2, \"0\");\n\tconst mm = String(today.getMonth() + 1).padStart(2, \"0\");\n\tconst yyyy = today.getFullYear();\n\n\treturn `${dd}/${mm}/${yyyy}`;\n}\n\nexport {\n\tasyncReplaceAll,\n\tcleanUpHref,\n\thasNodeListChanged,\n\tmakeBibliography,\n\tsortRoamBlocks,\n\ttodayDMY\n};","\n\n/** @constant {Object} The dictionary of RegExps */\nconst REGEX = {\n\t// Aliases\n\taliasAll: /(?:^|[^!])\\[(.+?)\\]\\((.+?)\\)/g,\n\taliasBlock: /(?!^| )\\[(.+?)\\]\\({3}(.+?)\\){3}/g,\n\taliasPage: /\\[([^\\]]+?)\\]\\(\\[\\[(.+?)\\]\\]\\)/g,\n\n\t// Embeds\n\tembedBlock: /\\{{2}(\\[{2})?embed(\\]{2})?: ?\\({2}(.+?)\\){2}\\}{2}/g,\n\tembedPage: /\\{{2}(\\[{2})?embed(\\]{2})?: ?\\[{2}(.+?)\\]{2}\\}{2}/g,\n\n\t// Groupings and pages\n\tdoublePar: /\\({2}([^()]+?)\\){2}/g,\n\tdoubleBraces: /( ?)\\{{2}(.+?)\\}{2}( ?)/g,\n\t// Note: this will target all instances of `[[` and `]]`, even if they're not page references.\n\tdoubleBrackets: /(\\[|\\]){2}/g,\n\ttag: /(?!^| )#(.+?)( |$)/g,\n\t\n\t// Citations\n\trefCitekey: /\\[{2}@(.+?)\\]{2}/g,\n\tcitekeyList: /\\((.*?)(\\[{2}@.+?\\]{2})((?: ?[,;] ?\\[{2}@.+?\\]{2}){1,})(.*?)\\)/g,\n\tcitekeyPar: /\\(([^)]*?)\\[{2}@([^)]+?)\\]{2}([^)]*?)\\)/g,\n\tcitekey: /(^|[^#])\\[{2}@([^\\]]+?)\\]{2}/g,\n\t\n\t// Code\n\tcodeBlock: /```([\\s\\S]+?)```/g,\n\tcodeInline: /(?:^|[^`])`([^`]+?)`/g,\n\t\n\t// Markup\n\tbold: /\\*{2}([^*]+?)\\*{2}/g,\n\titalics: /_{2}([^_]+?)_{2}/g,\n\thighlight: /\\^{2}([^^]+?)\\^{2}/g,\n\n\t// Miscellaneous\n\timage: /!\\[(.*?)\\]\\((.+?)\\)(.*)/g,\n\tmath: /\\$\\$([\\s\\S^$]+?)\\$\\$([\\s\\S]+)?/g,\n\tpopover: /=:([^|]+)\\|(.+)/g,\n\ttable: /\\{{2}(\\[{2})?table(\\]{2})?\\}{2}(.*)/g,\n\t\n\t// Special references\n\tspecialRef: /\\{{2}(fig|eq|table):(.+?)\\}{2}/g\n};\n\nexport default REGEX;","import REGEX from \"./regex\";\n\nimport { formatText } from \"./common\";\nimport { sortRoamBlocks } from \"../utils\";\n\n\nfunction isTableBlock(string){\n\tconst match = Array.from(string.matchAll(REGEX.table));\n\tif(match.length > 0){\n\t\treturn match[0];\n\t} else {\n\t\treturn false;\n\t}\n}\n\nasync function traverseTable(block){\n\treturn await (sortRoamBlocks(block.children).reduce(async(rows, child) => {\n\t\tconst prev = await rows;\n\t\tconst content = await traverseRow(child);\n\t\treturn [...prev, ...content];\n\t}, []));\n}\n\nasync function traverseRow(block){\n\tif(!block.children){\n\t\treturn [[await storeCell(block)]];\n\t} else {\n\t\treturn (await Promise.all(sortRoamBlocks(block.children)\n\t\t\t.map(async(child) => {\n\t\t\t\tconst content = await traverseRow(child);\n\t\t\t\treturn await Promise.all(content.map(async(path) => [await storeCell(block), ...path]));\n\t\t\t})))\n\t\t\t.flat(1);\n\t}\n}\n\nasync function storeCell(block){\n\treturn {\n\t\ttext: await formatText(block.string),\n\t\talign: block[\"text-align\"] ? block[\"text-align\"].charAt(0) : \"l\"\n\t};\n}\n\nasync function makeTable(block, start_indent = 0, extra = \"\"){\n\tconst table_indent = \"\\t\".repeat(start_indent);\n\n\tconst afterTextMatch = Array.from(block.string.matchAll(/\\{\\{(?:\\[\\[)?table(?:\\]\\])?\\}\\}(.+)/g))[0] || false;\n\t// Below is the same structure as with figures rendering\n\tconst labelRegex = /(`.+?`)/g;\n\tconst labelMatch = Array.from(extra.matchAll(labelRegex))[0] || false;\n\tconst labelEl = labelMatch ? `${table_indent}\\\\label{table:${labelMatch[0].slice(1,-1)}}\\n` : \"\";\n\n\tconst desc = extra.replace(labelRegex, \"\").trim();\n\tconst descEl = (desc.length > 0) ? `${table_indent}\\\\caption{${await formatText(afterTextMatch[1].trim())}}\\n` : \"\";\n\n\tconst rows = await traverseTable(block);\n\n\t// Count the actual number of columns\n\tconst n_cols = rows.reduce((f, s) => f.length >= s.length ? f.length : s.length);\n\t// Extract alignment sequence from header row\n\tlet align_seq = rows[0].map(col => col.align);\n\tif(align_seq.length < n_cols){\n\t\tconst fills = Array.from({ length: n_cols - align_seq.length }, () => \"l\");\n\t\talign_seq.push(...fills);\n\t}\n\talign_seq = align_seq.join(\" \");\n\t// Get contents of rows\n\tconst row_indent = \"\\t\".repeat(start_indent+1);\n\tconst textRows = rows.map(row => `${row_indent}` + row.map(cell => cell.text).join(\" & \") + \" \\\\\\\\\").join(\"\\n\");\n\n\treturn `${table_indent}\\\\begin{table}[h!]\\n${table_indent}\\\\centering\\n${table_indent}\\\\begin{tabular}{${align_seq}}\\n${row_indent}\\\\hline\\n${textRows}\\n${row_indent}\\\\hline\\n${table_indent}\\\\end{tabular}\\n${descEl}${labelEl}${table_indent}\\\\end{table}`;\n}\n\nexport {\n\tisTableBlock,\n\tmakeTable\n};","import REGEX from \"./regex\";\n\nfunction parseAlias(_match, p1, p2){\n\treturn ` \\\\href{${p2}}}{${p1}}`;\n}\n\nfunction parseAliasPage(_match, p1){\n\treturn p1;\n}\n\nfunction parseBold(_match, p1){\n\treturn `\\\\textbf{${p1}}`;\n}\n\nfunction parseHighlight(_match, p1){\n\treturn `\\\\hl{${p1}}`;\n}\n\nfunction parseItalics(_match, p1){\n\treturn `\\\\textit{${p1}}`;\n}\n\nfunction replaceTextFormatting(string){\n\tlet output = string;\n\t// Bold markup\n\toutput = output.replaceAll(REGEX.bold, parseBold);\n\t// Italic markup\n\toutput = output.replaceAll(REGEX.italics, parseItalics);\n\t// Highlight markup\n\toutput = output.replaceAll(REGEX.highlight, parseHighlight);\n\n\treturn output;\n}\n\nexport {\n\tparseAlias,\n\tparseAliasPage,\n\tparseBold,\n\tparseHighlight,\n\tparseItalics,\n\treplaceTextFormatting\n};","function codeBlock(capture){\n\treturn `\\\\begin{verbatim}\\n${capture}\\n\\\\end{verbatim}`;\n}\n\nfunction codeInline(capture){\n\treturn `\\\\verb|${capture}|`;\n}\n\nfunction parseCodeBlock(_match, capture){\n\treturn codeBlock(capture);\n}\n\nfunction parseCodeInline(_match, capture){\n\treturn ` ${codeInline(capture)}`;\n}\n\nexport {\n\tcodeBlock,\n\tcodeInline,\n\tparseCodeBlock,\n\tparseCodeInline\n};","/* istanbul ignore file */\nfunction addBlockMenuCommand(label, onClick){\n\treturn window.roamAlphaAPI.ui.blockContextMenu.addCommand({\n\t\tlabel,\n\t\tcallback: (entity) => onClick(entity)\n\t});\n}\n\n/** Searches a Roam page by its title\n * @param {String} title - The title to be searched\n * @returns {String|false} The UID of the Roam page (if it exists), otherwise `false`\n */\nfunction findRoamPage(title){\n\tconst pageSearch = window.roamAlphaAPI.q(`[\n\t\t:find ?uid \n\t\t:in $ ?title \n\t\t:where\n\t\t\t[?p :node/title ?title]\n\t\t\t[?p :block/uid ?uid]\n\t\t]`, title);\n\tif(pageSearch.length > 0){\n\t\treturn pageSearch[0][0];\n\t} else{\n\t\treturn false;\n\t}\n}\n\nfunction getBlockText(uid){\n\treturn window.roamAlphaAPI.q(`[\n        :find ?str \n        :in $ ?uid \n        :where\n            [?b :block/uid ?uid]\n            [?b :block/string ?str]\n    ]`, uid);\n}\n\nfunction queryBlockContents(uid){\n\treturn window.roamAlphaAPI.q(`[\n\t\t:find \n\t\t\t[(pull ?b \n\t\t\t\t[ :block/string :block/children :block/order :block/heading :children/view-type :block/text-align {:block/children ...} ]) \n\t\t\t...] \n\t\t:in $ ?uid \n\t\t:where\n\t\t\t[?b :block/uid ?uid]\n\t]`, uid)[0];\n}\n\nfunction queryPageContentsByTitle(title){\n\treturn window.roamAlphaAPI.q(`[\n\t\t:find [\n\t\t\t(pull ?e [ :node/title :block/string :block/children :block/order :block/heading :children/view-type :block/text-align {:block/children ...} ]) \n\t\t\t...] \n\t\t:in $ ?ptitle \n\t\t:where \n\t\t\t[?e :node/title ?ptitle] \n\t]`, title)[0];\n}\n\nexport {\n\taddBlockMenuCommand,\n\tfindRoamPage,\n\tgetBlockText,\n\tqueryBlockContents,\n\tqueryPageContentsByTitle\n};","import { getBlockText } from \"Roam\";\nimport { grabRawText } from \"./common\";\n\n\nasync function doublePar(content, mode){\n\t// Check if content is a valid block reference\n\tconst isBlockRef = getBlockText(content);\n\t// If it's a block ref, render its contents\n\tif(isBlockRef.length > 0){\n\t\tswitch(mode){\n\t\tcase \"latex\":\n\t\t\treturn isBlockRef[0][0];\n\t\tcase \"raw\":\n\t\tdefault: \n\t\t\treturn await grabRawText({ string: isBlockRef[0][0] });\n\t\t}\n\t} else{\n\t\tswitch(mode){\n\t\tcase \"latex\":\n\t\t\t// In Roam, it's invalid to insert any aliases in a `(())` so no need to handle that case here\n\t\t\t// If the `(())` just contains text, render it as footnote\n\t\t\treturn `\\\\footnote{${content}}`;\n\t\tcase \"raw\":\n\t\tdefault:\n\t\t\treturn content;\n\t\t}\n\t}\n}\n\nasync function parseBlockAlias(_match, p1, p2){\n\treturn `${p1} \\\\footnote{${await doublePar(p2, \"raw\")}}`;\n}\n\nasync function parseDoublePars(_match, p1){\n\treturn await doublePar(p1, \"latex\");\n}\n\nexport {\n\tdoublePar,\n\tparseBlockAlias,\n\tparseDoublePars\n};\n","import { grabRawText, raw } from \"./common\";\nimport { queryBlockContents } from \"Roam\";\n\n// RAW only\nasync function blockEmbed(uid, mode){\n\tconst blockContents = queryBlockContents(uid);\n\tswitch(mode){\n\tcase \"latex\":\n\t\t// TODO: handle processing of actual block structure\n\t\t// For now, just rendering everything as one raw block to test basic parsing\n\t\treturn await raw(blockContents, 0);\n\tcase \"raw\":\n\tdefault:\n\t\treturn await grabRawText(blockContents);\n\t}\n}\n\nasync function parseBlockEmbed(_match, _p1, _p2, p3){\n\treturn await blockEmbed(p3, \"latex\");\n}\nexport {\n\tblockEmbed,\n\tparseBlockEmbed\n};","import { grabRawText, raw } from \"./common\";\nimport { queryPageContentsByTitle } from \"../roam\";\n\n\nasync function pageEmbed(title, mode = \"raw\"){\n\tconst pageContents = queryPageContentsByTitle(title);\n\tswitch(mode){\n\tcase \"latex\":\n\t\t// TODO: handle actual processing of actual page structure\n\t\t// For now, just rendering everything as one raw block to test basic parsing\n\t\treturn `${pageContents.title}\\\\${(pageContents.children) ? (await Promise.all(pageContents.children.map(async(child) => await raw(child, 0)))).join(\"\\n\") : \"\"}`;\n\tcase \"raw\":\n\tdefault:\n\t\treturn await grabRawText(pageContents);\n\t}\n}\n\nasync function parsePageEmbed(_match, _p1, _p2, p3){\n\treturn await pageEmbed(p3, \"latex\");\n}\n\nexport {\n\tpageEmbed,\n\tparsePageEmbed\n};\n","import REGEX from \"./regex\";\nimport { asyncReplaceAll } from \"../utils\";\n\nimport { parseBlockAlias, parseDoublePars } from \"./doublePar\";\nimport { parseBlockEmbed } from \"./blockEmbed\";\nimport { parsePageEmbed } from \"./pageEmbed\";\n\n\nasync function expandInserts(string){\n\tlet output = string;\n\n\t// Block aliases\n\toutput = await asyncReplaceAll(output, REGEX.aliasBlock, parseBlockAlias);\n\t// Embeds : blocks\n\toutput = await asyncReplaceAll(output, REGEX.embedBlock, parseBlockEmbed);\n\t// Embeds : pages\n\toutput = await asyncReplaceAll(output, REGEX.embedPage, parsePageEmbed);\n\t// `(())` markup\n\toutput = await asyncReplaceAll(output, REGEX.doublePar, parseDoublePars);\n\n\treturn output;\n}\n\nexport default expandInserts;","/* eslint-disable no-useless-escape */\nimport { formatText } from \"./common\";\n\nasync function mathMode(capture, label, offset){\n\tconst mathContent = capture;\n\tif(offset == 0){\n\t\tlet eqLabel = label;\n\t\tif(typeof(eqLabel) == \"undefined\"){\n\t\t\teqLabel = \"\";\n\t\t} else{\n\t\t\tconst hasLabel = Array.from(eqLabel.matchAll(/(`.+?`)/g))[0] || false;\n\t\t\teqLabel = hasLabel[0] ? `\\\\label{eq:${hasLabel[0].slice(1,-1)}}\\n` : \"\";\n\t\t}\n\t\treturn `\\n\\\\begin{equation}\\n${eqLabel}${capture}\\n\\\\end{equation}`;\n\t} else{\n\t\tconst eqLabel = label ? await formatText(label) : \"\";\n\t\treturn `$${mathContent.replaceAll(/\\\\\\&/g, \"&\")}$${eqLabel}`;\n\t}\n}\n\nexport default mathMode;","import REGEX from \"./regex\";\nimport { formatText } from \"./common\";\n\nimport { asyncReplaceAll } from \"../utils\";\n\n\n// TODO: process the popover's contents\nasync function parsePopover(_match, text, content){\n\treturn `${text.trim()} \\\\footnote{${await formatText(content.trim())}}`;\n}\n\nasync function replacePopover(capture){\n\treturn await asyncReplaceAll(capture, REGEX.popover, parsePopover);\n}\n\nasync function parseDoubleBraces(match, pre, capture, _post){\n\treturn (capture.includes(\"iframe\") || capture.includes(\"word-count\")) \n\t\t? \"\"\n\t\t: capture.includes(\"=:\")\n\t\t\t? (pre + await replacePopover(capture))\n\t\t\t: match;\n}\n\nexport default parseDoubleBraces;","import { formatText } from \"./common\";\n\nasync function figure(caption, url, extra){\n\tconst cleanURL = url.replaceAll(\"%2F\", \"/\");\n\tconst fileInfo = Array.from(cleanURL.matchAll(/[^/]+?\\.(png|jpg|jpeg)/g));\n\t// let fileName = fileInfo[0][0];\n\tconst fileExt = fileInfo[0][1];\n\n\tconst figIndex = await window.latexRoam.addFigure(url, fileExt);\n\n\t// Parse extra information : label, description\n\t// Note : the first bit of inline code will be used as the figure label, if there are others they will be ignored\n\tconst labelRegex = /(`.+?`)/g;\n\tconst labelMatch = Array.from(extra.matchAll(labelRegex))[0] || false;\n\tconst labelEl = labelMatch ? `\\\\label{fig:${labelMatch[0].slice(1,-1)}}\\n` : \"\";\n\n\tconst desc = extra.replace(labelRegex, \"\").trim();\n\tconst descEl = (desc.length > 0) ? `\\\\medskip\\n${await formatText(desc)}\\n` : \"\";\n\n\treturn `\\\\begin{figure}[p]\\n\\\\includegraphics[width=\\\\textwidth]{figure-${figIndex}.${fileExt}}\\n\\\\caption{${await formatText(caption.trim())}}\\n${labelEl}\\n${descEl}\\\\end{figure}`;\n}\n\nasync function parseImage(_match, p1, p2, p3) {\n\treturn await figure(p1, p2, p3);\n}\n\nexport {\n\tparseImage\n};","function parseSpecialReferences(_match, type, label){\n\treturn `\\\\ref{${type}:${label}}`;\n}\n\nexport default parseSpecialReferences;","import REGEX from \"./regex\";\n\nfunction citekeyList(first, list){\n\tconst fullList = first + list;\n\tconst citekeys = Array.from(fullList.matchAll(/(?:\\[\\[@)(.+?)(?:\\]\\])/g)).map(match => match[1]);\n\treturn `\\\\cite{${citekeys.join(\", \")}}`;\n}\n\nfunction parseCitekeyInline(_match, pre, citekey){\n\treturn `${pre}\\\\textcite{${citekey}}`;\n}\n\nfunction parseCitekeyList(_match, pre, first, list, post){\n\treturn `(${pre}${citekeyList(first,list)}${post})`;\n}\n\nfunction parseCitekeyPar(_match, pre, citekey, post){\n\treturn `(${pre}\\\\cite{${citekey}}${post})`;\n}\n\nfunction replaceCitekeys(string){\n\tlet output = string;\n\t// Lists within parentheses\n\toutput = output.replaceAll(REGEX.citekeyList, parseCitekeyList);\n\t// Single citations within parentheses\n\toutput = output.replaceAll(REGEX.citekeyPar, parseCitekeyPar);\n\t// Inline citations\n\toutput = output.replaceAll(REGEX.citekey, parseCitekeyInline);\n\n\treturn output;\n}\n\nexport {\n\tparseCitekeyInline,\n\tparseCitekeyList,\n\tparseCitekeyPar,\n\treplaceCitekeys\n};","/* eslint-disable no-useless-escape */\n\nimport { asyncReplaceAll, cleanUpHref } from \"../utils\";\n\n\nimport { isTableBlock, makeTable } from \"./table\";\nimport { parseAlias, parseAliasPage, replaceTextFormatting } from \"./markup\";\nimport { parseCodeBlock, parseCodeInline } from \"./code\";\nimport expandInserts from \"./expand\";\nimport mathMode from \"./mathMode\";\nimport parseDoubleBraces from \"./doubleBraces\";\nimport { parseImage } from \"./figure\";\nimport parseSpecialReferences from \"./specialReferences\";\nimport { replaceCitekeys } from \"./citekeys\";\n\nimport REGEX from \"./regex\";\n\n\nasync function formatText(string){\n\tlet output = string;\n\n\t// RENDERING BLOCK + PAGE REFS/EMBEDS, DOUBLE PARENTHESES ---------\n\t// Aka, is there additional text content that needs to be pulled ?\n\toutput = await expandInserts(output);\n\n\t// DELETING ELEMENTS : iframe, word-count, block part\n\toutput = await asyncReplaceAll(output, REGEX.doubleBraces, parseDoubleBraces);\n\n\t// REPLACING ELEMENTS\n\t// Citekeys\n\toutput = replaceCitekeys(output);\n\t// Page aliases\n\toutput = output.replaceAll(REGEX.aliasPage, parseAliasPage);\n\t// Double brackets\n\toutput = output.replaceAll(REGEX.doubleBrackets, \"\");\n\t// Alias links markup\n\toutput = output.replaceAll(REGEX.aliasAll, parseAlias);\n\t// Image links markup\n\toutput = await asyncReplaceAll(output, REGEX.image, parseImage);\n\n\t// Code blocks\n\toutput = output.replaceAll(REGEX.codeBlock, parseCodeBlock);\n\t// Tags : will be removed\n\toutput = output.replaceAll(REGEX.tag, \"\");\n\n\t// In-text references (figures, equations, tables)\n\toutput = output.replaceAll(REGEX.specialRef, parseSpecialReferences);\n\n\t// ESCAPING SPECIAL CHARACTERS --------------\n\n\tconst spec_chars = [\"&\", \"%\"];\n\tspec_chars.forEach(char => {\n\t\tconst charRegex = new RegExp(`${char}`, \"g\");\n\t\toutput = output.replaceAll(charRegex, \"\\\\$&\");\n\t});\n\n\t// Clean up wrong escapes\n\t// Math mode :\n\toutput = await asyncReplaceAll(output, REGEX.math, async(_match, capture, label, offset) => await mathMode(capture, label, offset));\n\t// URLs :\n\tconst urlRegex = /\\\\href\\{(.+?)\\}\\{(.+?)\\}/g;\n\toutput = output.replaceAll(urlRegex, (_match, p1, p2) => cleanUpHref({ url: p1, text: p2 }));\n\t// Inline code\n\toutput = output.replaceAll(REGEX.codeInline, parseCodeInline);\n\n\t// FORMATTING ACTUAL TEXT -------------------\n\t// Blockquote\n\tif(output.charAt(0) == \">\"){\n\t\toutput = `\\\\begin{quote}${output.slice(1)}\\\\end{quote}`;\n\t}\n\toutput = replaceTextFormatting(output);\n\n\t// TODO: clean up calc/etc. ? attributes ?\n\t// TODO: strikethrough. Seems like this requires an external package, leaving it aside for now\n\n\treturn output;\n}\n\nasync function grabRawText(block){\n\tlet output = block.string || \"\";\n\tif(block.children){\n\t\toutput = `${output} ${(await Promise.all(block.children.map(async(child) => await grabRawText(child)))).join(\" \")}`;\n\t}\n\toutput = await expandInserts(output);\n    \n\treturn output;\n}\n\nasync function raw(block, start_indent = 0){\n\tlet output = \"\";\n\t// If the block is a table, stop processing recursively & generate the table element\n\tconst is_table_block = isTableBlock(block.string);\n\tif(is_table_block){\n\t\tconst extra = is_table_block[1];\n\t\tconst table = await makeTable(block, start_indent, extra);\n\t\toutput = `\\n${table}\\n`;\n\t} else {\n\t\toutput = await formatText(block.string);\n\t\tif(block.children){\n\t\t\tconst elems = await Promise.all(block.children.map(async(child) => await raw(child, start_indent)));\n\t\t\toutput = `${output}\\\\\\\\${elems.join(\"\\\\\\\\\")}`;\n\t\t}\n\t}\n\treturn output;\n}\n\nexport {\n\tformatText,\n\tgrabRawText,\n\traw\n};\n","/* eslint-disable no-useless-escape */\nimport { formatText, grabRawText, raw } from \"./common\";\nimport { isTableBlock, makeTable } from \"./table\";\n\nimport { makeBibliography, sortRoamBlocks, todayDMY } from \"../utils\";\nimport { queryBlockContents } from \"../roam\";\n\nimport REGEX from \"./regex\";\n\n\nasync function convertBlocks(arr, { document_class = \"book\", numbered = true, start_header = 1 }){\n\tconst blocks = sortRoamBlocks(arr);\n\n\tlet processedOutput = await blocks.reduce(async(output, block) => {\n\t\tconst prev = await output;\n\t\tlet out;\n\n\t\tif(block.heading){\n\t\t\tconst header = await makeHeader(block.string, { document_class: document_class, numbered: numbered, level: start_header });\n\t\t\tout = `${prev}\\n${header}`;\n\t\t\tif(block.children){\n\t\t\t\tif(block[\"view-type\"] == \"document\" || typeof(block[\"view-type\"]) == \"undefined\"){\n\t\t\t\t\tconst elems = await convertBlocks(block.children, { document_class: document_class, numbered: numbered, start_header: start_header+1 });\n\t\t\t\t\tout = `${out}${elems}`;\n\t\t\t\t} else{\n\t\t\t\t\tconst list = await makeList(block.children, block[\"view-type\"], 0);\n\t\t\t\t\tout = `${out}${list}`;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn out;\n\t\t} else {\n\t\t\t// If the block isn't a heading, stop using the header tree for recursion\n\t\t\tconst content = await parseBlock(block);\n\t\t\tout = `${prev}\\n${content}\\\\\\\\`;\n\t\t}\n\t\treturn out;\n\t}, \"\");\n\n\tif(processedOutput.slice(-2) == \"\\\\\\\\\"){\n\t\tprocessedOutput = processedOutput.slice(0, -2);\n\t}\n\treturn processedOutput;\n}\n\nasync function _createTEX(exportUID, document_class = \"book\", { numbered = true, cover = true, start_header = 1, authors = \"\", title = \"\" } = {}){\n\tconst contents = queryBlockContents(exportUID);\n\n\t// Scan for citations\n\tconst citekeys = await getCitekeysList(contents);\n\tlet bibliography = \"\";\n\tif(citekeys.length > 0){\n\t\ttry{\n\t\t\tbibliography = await makeBibliography(citekeys);\n\t\t\tif(bibliography && JSON.stringify(bibliography) !== \"\"){\n\t\t\t\twindow.latexRoam.addBibliography(bibliography);\n\t\t\t}\n\t\t} catch(e){\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n\n\tconst bibPreamble = bibliography.length > 0 ? \"\\\\usepackage[backend=biber,style=apa,sorting=nyt]{biblatex}\\n\\\\addbibresource{bibliography.bib}\\n\" : \"\";\n\tconst bibPrint = bibliography.length > 0 ? \"\\\\medskip\\n\\n\\\\printbibliography\\n\" : \"\";\n\n\tconst header = `\\n\\\\documentclass{${document_class}}\\n\\\\title{${title}}\\n\\\\author{${authors}}\\n\\\\date{${todayDMY()}}\\n\\n\\\\usepackage{amsmath}\\n\\\\usepackage{graphicx}\\n\\\\usepackage{soul}\\n${bibPreamble}\\\\usepackage{hyperref}\\n\\\\hypersetup{colorlinks=true,citecolor=black}\\n\\n\\\\begin{document}\\n${cover ? \"\\\\maketitle\" : \"\"}`;\n\n\tlet body = \"\";\n\ttry{\n\t\tbody += await convertBlocks(contents.children, { document_class: document_class, numbered: numbered, start_header: start_header });\n\t} catch(e){\n\t\tconsole.error(e);\n\t}\n\n\tconst footer = `\\n${bibPrint}\\\\end{document}`;\n\n\treturn `${header}\\n${body}\\n${footer}`;\n}\n\n// `entity` is the dictionary returned for the current page/current block (i.e, by queryBlockContents or queryPageContentsByTitle)\n// This function returns an Array containing all the (unique) citekey references contained in the entity's contents\n// Citekey tags aren't taken into account\nasync function getCitekeysList(entity){\n\treturn [...new Set(Array.from((await grabRawText(entity)).matchAll(REGEX.refCitekey)).map(regexmatch => regexmatch[1]))];\n}\n\n\nasync function makeHeader(string, { document_class = \"book\", numbered = true, level = 1 } = {}){\n\tconst text = await formatText(string);\n\n\tlet cmd = \"\";\n\tconst header_level = (document_class == \"article\") ? (level + 1) : level;\n\tswitch(header_level){\n\tcase 1:\n\t\tcmd = \"chapter\";\n\t\tbreak;\n\tcase 2:\n\t\tcmd = \"section\";\n\t\tbreak;\n\tcase 3:\n\t\tcmd = \"subsection\";\n\t\tbreak;\n\tcase 4:\n\t\tcmd = \"subsubsection\";\n\t\tbreak;\n\tdefault:\n\t\treturn `${text}\\\\\\\\`;\n\t}\n\n\treturn `\\\\${cmd}${(!numbered) ? \"*\" : \"\"}{${text}}\\n`;\n}\n\nasync function makeList(elements, type, start_indent = 0){\n\tconst nesting_level = start_indent/2 + 1;\n\tconst list_indent = \"\\t\".repeat(start_indent);\n\tif(nesting_level <= 4){\n\t\tconst cmd = (type == \"bulleted\") ? \"itemize\" : \"enumerate\";\n\t\tconst blocks = await Promise.all(elements.map(async(el) => {\n\t\t\tconst elemContents = await parseListElement(el, start_indent+1);\n\t\t\treturn `${\"\\t\".repeat(start_indent+1)}${elemContents}`;\n\t\t}));\n\t\treturn `${list_indent}\\\\begin{${cmd}}\\n${blocks.join(\"\\n\")}\\n${list_indent}\\\\end{${cmd}}`;\n\t} else {\n\t\tconst blocks = await Promise.all(elements.map(async(el) => await raw(el, start_indent)));\n\t\treturn `${list_indent}${blocks.join(\"\\\\\\\\\")}`;\n\t}\n}\n\nasync function parseBlock(block){\n\tlet output = \"\";\n\t// If the block is a table, stop processing recursively & generate the table element\n\tconst is_table_block = isTableBlock(block.string);\n\tif(is_table_block){\n\t\tconst extra = is_table_block[1];\n\t\toutput = await makeTable(block, 0, extra);\n\t} else {\n\t\t// Do stuff to process the children of a non-heading, non-table block\n\t\tconst text = await formatText(block.string);\n\t\toutput = `${text}`;\n\t\tif(block.children){\n\t\t\tconst children = sortRoamBlocks(block.children);\n\t\t\tconst format = (block[\"view-type\"]) ? block[\"view-type\"] : \"bulleted\";\n\t\t\tswitch(format){\n\t\t\tcase \"document\":{\n\t\t\t\tconst elems = await Promise.all(children.map(async(child) => await parseBlock(child)));\n\t\t\t\toutput = `${output}\\\\\\\\\\n${elems.join(\"\\\\\\\\\")}`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"bulleted\":\n\t\t\tcase \"numbered\":\n\t\t\tdefault:{\n\t\t\t\tconst list = await makeList(children, format, 0);\n\t\t\t\toutput = `${output}\\n${list}`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n}\n\nasync function parseListElement(block, start_indent){\n\tlet output = \"\";\n\tconst is_table_block = isTableBlock(block.string);\n\tif(is_table_block){\n\t\tconst extra = is_table_block[1];\n\t\tconst table = await makeTable(block, start_indent+1, extra);\n\t\toutput = `\\\\item{\\n${table}}`;\n\t} else {\n\t\tconst format = (block[\"view-type\"]) ? block[\"view-type\"] : \"bulleted\";\n\t\tswitch(format){\n\t\t// If the list item is in \"Document\" mode, pull all of its content as raw & use that as the list item, with newline separation\n\t\tcase \"document\": {\n\t\t\tconst content = await raw(block, start_indent+1);\n\t\t\toutput = `\\\\item{${content}}`;\n\t\t\tbreak;\n\t\t}\n\t\t// Otherwise, use the string as the list item & render a sublist\n\t\tcase \"bulleted\":\n\t\tcase \"numbered\":\n\t\tdefault:{\n\t\t\tconst text = await formatText(block.string);\n\t\t\tif(block.children){\n\t\t\t\tconst list = await makeList(block.children, format, start_indent + 1);\n\t\t\t\toutput = `\\\\item{${text}}\\n${list}`;\n\t\t\t} else{\n\t\t\t\toutput = `\\\\item{${text}}`;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\t}\n\t}\n\treturn output;\n}\n\nexport default _createTEX;\n","import { downloadZip } from \"client-zip\";\n\nimport _createTEX from \"./translator/createTEX\";\n\n\nexport const DEFAULT_OUTPUT = {\n\tbib: {\n\t\tcontent: \"\",\n\t\tblob: null,\n\t\tblobURL: null\n\t},\n\tfigs: {\n\t\tlist: [],\n\t\tblob: null,\n\t\tblobURL: null\n\t},\n\ttex: {\n\t\tcontent: \"\",\n\t\tblob: null,\n\t\tblobURL: null\n\t},\n\tpackage: {\n\t\tblob: null,\n\t\tblobURL: null\n\t}\n};\n\n\nexport class ExportManager {\n\tconstructor(){\n\t\tthis.bib = { ...DEFAULT_OUTPUT.bib };\n\t\tthis.figs = { ...DEFAULT_OUTPUT.figs };\n\t\tthis.tex = { ...DEFAULT_OUTPUT.tex };\n\t\tthis.package = { ...DEFAULT_OUTPUT.package };\n\t}\n\n\t#resetBlobBib(){\n\t\tif(this.bib.blob != null){ \n\t\t\tURL.revokeObjectURL(this.bib.blobURL);\n\t\t\tthis.bib.blob = null;\n\t\t\tthis.bib.blobURL = null;\n\t\t}\n\t}\n\n\t#resetBlobFigs(){\n\t\tif(this.figs.blob != null){ \n\t\t\tURL.revokeObjectURL(this.figs.blobURL);\n\t\t\tthis.figs.blob = null;\n\t\t\tthis.figs.blobURL = null;\n\t\t}\n\t}\n\n\t#resetBlobTEX(){\n\t\tif(this.tex.blob != null){ \n\t\t\tURL.revokeObjectURL(this.tex.blobURL);\n\t\t\tthis.tex.blob = null;\n\t\t\tthis.tex.blobURL = null;\n\t\t}\n\t}\n\n\t#resetBlobPackage(){\n\t\tif(this.package.blob != null){\n\t\t\tURL.revokeObjectURL(this.package.blobURL);\n\t\t\tthis.package.blob = null;\n\t\t\tthis.package.blobURL = null;\n\t\t}\n\t}\n\n\t#resetToDefault(){\n\t\tthis.bib = { ...DEFAULT_OUTPUT.bib };\n\t\tthis.figs = { \n\t\t\t...DEFAULT_OUTPUT.figs,\n\t\t\tlist: []\n\t\t};\n\t\tthis.tex = { ...DEFAULT_OUTPUT.tex };\n\t\tthis.package = { ...DEFAULT_OUTPUT.package };\n\t}\n\n\tresetExport(){\n\t\t// Clean up artefacts\n\t\tthis.#resetBlobBib();\n\t\tthis.#resetBlobFigs();\n\t\tthis.#resetBlobTEX();\n\t\tthis.#resetBlobPackage();\n\n\t\tthis.#resetToDefault();\n\t}\n\n\t#updateTEX(tex){\n\t\tif(tex != this.tex.content){\n\t\t\tthis.#resetBlobTEX();\n\t\t\tthis.tex = { ...DEFAULT_OUTPUT.tex };\n\n\t\t\tconst blob = new Blob([tex], { type: \"text/plain\" });\n\n\t\t\tthis.tex ={\n\t\t\t\tcontent: tex,\n\t\t\t\tblob,\n\t\t\t\tblobURL: URL.createObjectURL(blob)\n\t\t\t};\n\t\t}\n\t}\n\n\taddBibliography(bibliography){\n\t\tthis.#resetBlobBib();\n\t\tthis.bib = { ...DEFAULT_OUTPUT.bib };\n\n\t\tconst blob = new Blob([bibliography], { type: \"text/plain\" });\n        \n\t\tthis.bib = {\n\t\t\tcontent: bibliography,\n\t\t\tblob,\n\t\t\tblobURL: URL.createObjectURL(blob)\n\t\t};\n\t}\n\n\tasync addFigure(url, fileExt){\n\t\tlet figCount = -1;\n\n\t\tconst figFile = await fetch(url, { method: \"GET\" });\n\t\tconst figBlob = await figFile.blob();\n\t\tfigCount = this.figs.list.length + 1;\n\n\t\tthis.figs.list.push({\n\t\t\tinput: figBlob,\n\t\t\tname: `figure-${figCount}.${fileExt}`\n\t\t});\n\n\t\treturn figCount;\n\t}\n\n\tasync #zipFigures(){\n\t\tif(this.figs.list.length > 0){\n\t\t\tconst blob = await downloadZip(this.figs.list).blob();\n\t\t\tthis.#resetBlobFigs();\n\n\t\t\tthis.figs.blob = blob;\n\t\t\tthis.figs.blobURL = URL.createObjectURL(blob);\n\t\t}\n\t}\n\n\tasync #zipPackage(title){\n\t\tconst packageFiles = [\n\t\t\t...this.figs.list,\n\t\t\t{ name: `${title}.tex`, input: this.tex.content }\n\t\t];\n\t\tif(this.bib.blob != null){ packageFiles.push({ name: \"bibliography.bib\", input: this.bib.blob }); }\n\n\t\tconst blob = await downloadZip(packageFiles).blob();\n\t\tthis.#resetBlobPackage();\n\n\t\tthis.package.blob = blob;\n\t\tthis.package.blobURL = URL.createObjectURL(blob);\n\t}\n\n\tasync #createTEX(uid, config){\n\t\tconst { document_class, ...rest } = config;\n\t\treturn await _createTEX(uid, document_class, { ...rest });\n\t}\n\n\tasync generateExport(uid, config){\n\t\tthis.resetExport();\n    \n\t\t// Processing of page contents\n\t\tconst texOutput = await this.#createTEX(uid, config);\n\n\t\tthis.#updateTEX(texOutput);\n\t\t// Prepare .zip of figures for download\n\t\tawait this.#zipFigures();\n\t\t// Prepare .zip of full package for download\n\t\tawait this.#zipPackage(config.title);\n\n\t\treturn {\n\t\t\tbib: this.bib,\n\t\t\tfigs: this.figs,\n\t\t\ttex: this.tex,\n\t\t\tpackage: this.package\n\t\t};\n\t}\n}\n","/** @constant {String} The extension's current version (from package.json) */\nexport const EXTENSION_VERSION = require(\"../package.json\").version;\n\n/** @constant {String} The HTML id for the extension's icon's container */\nexport const EXTENSION_SLOT_ID = \"latex-roam-slot\";\n\nexport const CustomClasses = {\n\tBUTTON_CLASS: \"latex-roam--button\",\n\tDIALOG_CLASS: \"latex-roam--dialog\",\n\tMENU_CLASS: \"latex-roam--menu\",\n\tPOPOVER_CLASS: \"latex-roam-popover\"\n};","import { bool, func, string } from \"prop-types\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport { AnchorButton, Button, Classes, Dialog, InputGroup, Label, MenuItem, Switch, TextArea } from \"@blueprintjs/core\";\nimport { Select } from \"@blueprintjs/select\";\n\nimport useBool from \"../hooks/useBool\";\nimport useSelect from \"../hooks/useSelect\";\nimport useText from \"../hooks/useText\";\n\nimport { DEFAULT_OUTPUT } from \"../extension\";\n\nimport { CustomClasses } from \"../constants\";\n\n\nconst popoverProps = {\n\tminimal: true,\n\tpopoverClassName: CustomClasses.POPOVER_CLASS\n};\n\nconst documentClasses = {\n\t\"article\": \"Article\",\n\t\"book\": \"Book\",\n\t\"report\": \"Report\"\n};\n\nconst headers = {\n\t\"1\": \"Start with header 1\",\n\t\"2\": \"Start with header 2\",\n\t\"3\": \"Start with header 3\",\n\t\"4\": \"Start with header 4\"\n};\n\nfunction itemRenderer(item, itemProps) {\n\tconst { handleClick, modifiers: { active } } = itemProps;\n\n\treturn <MenuItem active={active} key={item} onClick={handleClick} text={item} />;\n}\n\nfunction ExportDialog({ isOpen, onClose, uid }){\n\tconst [output, setOutput] = useState({ ...DEFAULT_OUTPUT });\n\tconst outputArea = useRef();\n\tconst [document_class, setDocumentClass] = useSelect({\n\t\tstart: \"report\"\n\t});\n\tconst [authors, setAuthors] = useText(\"\");\n\tconst [title, setTitle] = useText(\"\");\n\tconst [cover, { toggle: toggleCover }] = useBool(true);\n\tconst [numberedHeaders, { toggle: toggleNumberedHeaders }] = useBool(true);\n\tconst [startWithHeader, setStartWithHeader] = useSelect({\n\t\tstart: \"1\"\n\t});\n\n\tconst onOpening = useCallback(() => {\n\t\tsetTitle({ target: { value: document.title } });\n\t}, [setTitle]);\n\n\tconst handleClose = useCallback(() => {\n\t\twindow.latexRoam.resetExport();\n\t\tsetOutput({ ...DEFAULT_OUTPUT });\n\t\tonClose();\n\t}, [onClose]);\n\n\tconst triggerExport = useCallback(async() => {\n\t\tconst client = window.latexRoam;\n\t\tclient.resetExport();\n\t\tconst exportOutput = await client.generateExport(\n\t\t\tuid,\n\t\t\t{ \n\t\t\t\tauthors, \n\t\t\t\tcover,\n\t\t\t\tdocument_class, \n\t\t\t\tnumbered: numberedHeaders, \n\t\t\t\tstart_header: Number(startWithHeader),\n\t\t\t\ttitle\n\t\t\t});\n\t\tsetOutput(exportOutput);\n\t}, [uid, authors, cover, document_class, numberedHeaders, startWithHeader, title]);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\twindow.latexRoam.resetExport();\n\t\t};\n\t}, []);\n\n\treturn <Dialog \n\t\tclassName={CustomClasses.DIALOG_CLASS} \n\t\tisCloseButtonShown={true}\n\t\tisOpen={isOpen} \n\t\tonClose={handleClose} \n\t\tonOpening={onOpening}\n\t\ttitle=\"Export to LaTeX\" >\n\t\t<div className={Classes.DIALOG_BODY}>\n\t\t\t<div id=\"latex-roam-export-div\">\n\t\t\t\t<div className=\"latex-roam--settings-row\">\n\t\t\t\t\t<Label>Document class :</Label>\n\t\t\t\t\t<Select \n\t\t\t\t\t\tfilterable={false}\n\t\t\t\t\t\titemRenderer={itemRenderer}\n\t\t\t\t\t\titems={Object.keys(documentClasses)}\n\t\t\t\t\t\tonItemSelect={setDocumentClass}\n\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\tpopoverProps={popoverProps}>\n\t\t\t\t\t\t<Button minimal={true} rightIcon=\"double-caret-vertical\" text={documentClasses[document_class]} />\n\t\t\t\t\t</Select>\n\t\t\t\t\t<Switch checked={cover} label=\"Use cover title\" onChange={toggleCover} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"latex-roam--settings-row\">\n\t\t\t\t\t<Label>Author(s) :</Label>\n\t\t\t\t\t<InputGroup\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tonChange={setAuthors}\n\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={authors}\n\t\t\t\t\t/>\n\t\t\t\t\t<Label>Title :</Label>\n\t\t\t\t\t<InputGroup\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tonChange={setTitle}\n\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={title}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"latex-roam--settings-row\">\n\t\t\t\t\t<Label>Headers :</Label>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tfilterable={false}\n\t\t\t\t\t\titemRenderer={itemRenderer}\n\t\t\t\t\t\titems={Object.keys(headers)}\n\t\t\t\t\t\tonItemSelect={setStartWithHeader}\n\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\tpopoverProps={popoverProps} >\n\t\t\t\t\t\t<Button minimal={true} rightIcon=\"double-caret-vertical\" text={headers[startWithHeader]} />\n\t\t\t\t\t</Select>\n\t\t\t\t\t<Switch checked={numberedHeaders} label=\"Use numbers\" onChange={toggleNumberedHeaders} />\n\t\t\t\t</div>\n\t\t\t\t<Button id=\"latex-roam-export-trigger\" intent=\"success\" onClick={triggerExport} text=\"Export page contents\" />\n\t\t\t</div>\n\t\t\t{output.tex.content.length > 0\n\t\t\t\t? <form\n\t\t\t\t\taction=\"https://www.overleaf.com/docs\"\n\t\t\t\t\tclassName={Classes.FILL} \n\t\t\t\t\tid=\"latex-roam-export-form\"\n\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\ttarget=\"_blank\" >\n\t\t\t\t\t<TextArea id=\"latex-roam-export-contents\" fill={true} growVertically={false} inputRef={outputArea} name=\"snip\" readOnly={true} small={true} style={{ height: \"200px\" }} value={output.tex.content} />\n\t\t\t\t\t<Button id=\"latex-roam--overleaf-trigger\" intent=\"success\" text=\"Export to Overleaf\" type=\"submit\" />\n\t\t\t\t</form>\n\t\t\t\t: null}\n\t\t</div>\n\t\t<div className={Classes.DIALOG_FOOTER}>\n\t\t\t<div className={Classes.DIALOG_FOOTER_ACTIONS}>\n\t\t\t\t{output.bib.blobURL\n\t\t\t\t\t? <AnchorButton download=\"bibliography.bib\" href={output.bib.blobURL} outlined={true} text=\"Download bibliography\" />\n\t\t\t\t\t: null}\n\t\t\t\t{output.figs.blobURL\n\t\t\t\t\t? <AnchorButton download=\"figures.zip\" href={output.figs.blobURL} outlined={true} text={\"Download figures (\" + output.figs.list.length + \")\"} />\n\t\t\t\t\t: null}\n\t\t\t\t{output.tex.blobURL\n\t\t\t\t\t? <AnchorButton download={title + \".tex\"} href={output.tex.blobURL} outlined={true} text=\"Download .tex file\" />\n\t\t\t\t\t: null}\n\t\t\t\t{output.package.blobURL\n\t\t\t\t\t? <AnchorButton download={title + \".zip\"} href={output.package.blobURL} intent=\"primary\" outlined={true} text=\"Download all files\" />\n\t\t\t\t\t: null}\n\t\t\t</div>\n\t\t</div>\n\t</Dialog>;\n}\nExportDialog.propTypes = {\n\tisOpen: bool,\n\tonClose: func,\n\tuid: string\n};\n\nexport default ExportDialog;\n","import { string } from \"prop-types\";\n\nimport { Button } from \"@blueprintjs/core\";\nimport ExportDialog from \"./ExportDialog\";\n\nimport useBool from \"../hooks/useBool\";\n\nimport { CustomClasses } from \"../constants\";\n\n\nfunction ExportButton({ uid }){\n\tconst [isDialogOpen, { on: openDialog, off: closeDialog }] = useBool(false);\n\n\treturn <>\n\t\t<Button className={CustomClasses.BUTTON_CLASS} icon=\"rect-width\" minimal={true} onClick={openDialog} text=\"LaTeX\" />\n\t\t<ExportDialog isOpen={isDialogOpen} onClose={closeDialog} uid={uid} />\n\t</>;\n}\nExportButton.propTypes = {\n\tuid: string\n};\n\nexport default ExportButton;","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport ExportButton from \"../ExportButton\";\n\nimport { addMenuDivs, findMenus } from \"./utils\";\nimport { hasNodeListChanged } from \"../../utils\";\n\nimport { CustomClasses } from \"../../constants\";\n\n\nconst GraphWatcher = React.memo(function GraphWatcher(){\n\t// From React Docs : https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html\n\t// https://jasonwatmore.com/post/2021/08/27/react-how-to-check-if-a-component-is-mounted-or-unmounted\n\tconst mounted = useRef(false);\n\tconst [menus, setMenus] = useState([]);\n\n\tconst updatePageElements = useCallback(() => {\n\t\t// Page headers\n\t\tsetMenus((prevState) => {\n\t\t\tconst currentMenus = findMenus();\n\t\t\tif(hasNodeListChanged(prevState, currentMenus)){\n\t\t\t\treturn currentMenus;\n\t\t\t} else {\n\t\t\t\treturn prevState;\n\t\t\t}\n\t\t});\n\n\t}, []);\n\n\tuseEffect(() => {\n\t\tmounted.current = true;\n\t\t// The watcher adds empty <div>s to relevant page elements\n\t\t// The contents of the <div>s will be managed by rendering portals\n\t\tconst watcher = setInterval(\n\t\t\t() => {\n\t\t\t\taddMenuDivs();\n\n\t\t\t\tif(mounted.current){\n\t\t\t\t\tupdatePageElements();\n\t\t\t\t}\n\t\t\t},\n\t\t\t1000\n\t\t);\n\n\t\treturn () => {\n\t\t\tmounted.current = false;\n\t\t\tclearInterval(watcher);\n\t\t\tArray.from(document.querySelectorAll(`[class=\"${CustomClasses.MENU_CLASS}\"]`))\n\t\t\t\t.forEach(div => div.remove());\n\t\t};\n\t}, [updatePageElements]);\n\n\treturn menus \n\t\t? menus.map((div, index) => {\n\t\t\tconst pageUID = div.getAttribute(\"data-uid\");\n\t\t\treturn pageUID\n\t\t\t\t? createPortal(<ExportButton key={index} uid={pageUID} />, div)\n\t\t\t\t: null;\n\t\t})\n\t\t: null;\n});\n\nexport default GraphWatcher;\n","import { CustomClasses } from \"../../constants\";\nimport { findRoamPage } from \"../../roam\";\n\n/* istanbul ignore next */\nconst findMenus = () =>{\n\treturn Array.from(document.querySelectorAll(`[class=\"${CustomClasses.MENU_CLASS}\"]`));\n};\n\n/* istanbul ignore next */\nfunction addMenuDivs(){\n\tlet newHeaders = Array.from(document.querySelectorAll(\"h1.rm-title-display\"))\n\t\t.filter(page => !(page.parentElement.querySelector(`[class=\"${CustomClasses.MENU_CLASS}\"]`)));\n\n\tfor(const header of newHeaders){\n\t\tlet title = header.querySelector(\"span\") ? header.querySelector(\"span\").innerText : header.innerText;\n\t\tlet pageUID = findRoamPage(title);\n\n\t\tlet menu = document.createElement(\"div\");\n\t\tmenu.classList.add(CustomClasses.MENU_CLASS);\n\t\tmenu.setAttribute(\"data-title\", title);\n\t\tif(pageUID) { menu.setAttribute(\"data-uid\", pageUID); }\n\n\t\theader.insertAdjacentElement(\"afterend\", menu);\n\t}\n}\n\nexport {\n\taddMenuDivs,\n\tfindMenus\n};","import { shape, string } from \"prop-types\";\nimport { Component } from \"react\";\n\nimport ExportDialog from \"./ExportDialog\";\nimport GraphWatcher from \"./GraphWatcher\";\n\n\nimport { addBlockMenuCommand } from \"../roam\";\n\nclass App extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdialogIsOpen: false,\n\t\t\texportUID: null\n\t\t};\n\t\tthis.closeDialog = this.closeDialog.bind(this);\n\t\tthis.openDialog = this.openDialog.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\taddBlockMenuCommand(\"Export to LaTeX\", (entity) => {\n\t\t\tthis.openDialog(entity[\"block-uid\"]);\n\t\t});\n\t}\n\n\trender(){\n\n\t\tconst { dialogIsOpen, exportUID } = this.state;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<GraphWatcher />\n\t\t\t\t<ExportDialog isOpen={dialogIsOpen} onClose={this.closeDialog} uid={exportUID} />\n\t\t\t</>\n\t\t);\n\t}\n\n\tcloseDialog(){\n\t\tthis.setState((_prev) => ({ dialogIsOpen: false, exportUID: null }));\n\t}\n\n\topenDialog(uid){\n\t\tif(uid){\n\t\t\tthis.setState((_prev) => ({ dialogIsOpen: true, exportUID: uid }));\n\t\t}\n\t}\n}\nApp.propTypes = {\n\textension: shape({\n\t\tversion: string\n\t})\n};\n\nexport default App;\n","import { unmountComponentAtNode } from \"react-dom\";\n\nimport { EXTENSION_SLOT_ID } from \"./constants\";\n\n\nexport function setupInitialSettings(settingsObject){\n\tconst {\n\t\tother = {}\n\t} = settingsObject;\n\n\treturn {\n\t\tother: {\n\t\t\tdarkTheme: false,\n\t\t\t...other\n\t\t}\n\t};\n}\n\n/* istanbul ignore next */\nexport function initialize({ extensionAPI }){\n\tconst current = extensionAPI.settings.getAll();\n\tconst settings = setupInitialSettings(current || {});\n\n\tObject.entries(settings).forEach(([key, val]) => {\n\t\textensionAPI.settings.set(key, val);\n\t});\n\n\treturn {\n\t\tsettings\n\t};\n}\n\n/* istanbul ignore next */\n/** Sets up the extension's theme (light vs dark)\n * @param {Boolean} use_dark - If the extension's theme should be `dark`\n */\nfunction setupDarkTheme(use_dark = false){\n\tdocument.getElementsByTagName(\"body\")[0].setAttribute(\"latex-roam-dark-theme\", (use_dark == true).toString());\n}\n\n/* istanbul ignore next */\n/** Injects DOM elements to be used as React portals by the extension */\nfunction setupPortals(){\n\n\tunmountExtensionIfExists();\n\n\tconst extensionSlot = document.createElement(\"div\");\n\textensionSlot.id = EXTENSION_SLOT_ID;\n\tdocument.getElementById(\"app\").appendChild(extensionSlot);\n\n}\n\n/* istanbul ignore next */\n/** Sets up the extension */\nexport function setup({ settings }){\n\tsetupPortals();\n\tsetupDarkTheme(settings.other.darkTheme);\n}\n\n/* istanbul ignore next */\nexport function unmountExtensionIfExists(){\n\tconst existingSlot = document.getElementById(EXTENSION_SLOT_ID);\n\tif(existingSlot){\n\t\ttry{\n\t\t\tunmountComponentAtNode(existingSlot);\n\t\t\texistingSlot.remove();\n\t\t} catch(e){\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n}","/* istanbul ignore file */\nimport { render } from \"react-dom\";\n\nimport App from \"./components/App\";\n\nimport { initialize, setup, unmountExtensionIfExists } from \"./setup\";\n\nimport { EXTENSION_SLOT_ID, EXTENSION_VERSION } from \"./constants\";\n\nimport \"./index.css\";\nimport { ExportManager } from \"./extension\";\n\n\nfunction onload({ extensionAPI }){\n\tconst { settings } = initialize({ extensionAPI });\n\n\twindow.latexRoam = new ExportManager();\n\n\tsetup({ settings });\n\n\trender(\n\t\t<App extension={{ \n\t\t\tversion: EXTENSION_VERSION \n\t\t}}/>, \n\t\tdocument.getElementById(EXTENSION_SLOT_ID)\n\t);\n\n}\n\nfunction offload(){\n\tunmountExtensionIfExists();\n\twindow.latexRoam.resetExport();\n\tdelete window.latexRoam;\n}\n\nexport default {\n\tonload: onload,\n\tonunload: offload\n};","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0,\n\t532: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_alixlahuec_latex_roam\"] = self[\"webpackChunk_alixlahuec_latex_roam\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [532], () => (__webpack_require__(621)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","window","initialState","useState","state","setState","toggle","useCallback","prevState","set","value","on","off","defaultTransform","start","transform","event","currentTarget","target","Blob","prototype","Object","defineProperty","Response","this","body","DataView","e","n","i","o","Number","f","setUint32","ArrayBuffer","Uint8Array","buffer","Math","min","s","Date","File","name","lastModified","A","stream","headers","get","match","a","URL","url","pathname","split","pop","r","decodeURIComponent","now","length","Error","isNaN","ReadableStream","isView","Symbol","asyncIterator","TypeError","async","desiredSize","next","close","enqueue","byteLength","TextEncoder","encode","String","WebAssembly","Instance","Module","from","atob","charCodeAt","t","c","m","exports","d","subarray","u","y","getSeconds","getMinutes","getHours","getDate","getMonth","getFullYear","setUint16","l","B","BigInt","getReader","done","read","w","setBigUint64","b","C","downloadZip","push","input","asyncReplaceAll","str","regex","asyncReplaceFn","substrs","regexClone","RegExp","flags","exec","slice","index","lastIndex","Promise","all","join","cleanUpHref","text","replaceAll","makeBibliography","citekeys","zoteroRoam","instance","getBibEntries","sortRoamBlocks","arr","sort","order","todayDMY","today","dd","padStart","mm","yyyy","isTableBlock","string","Array","matchAll","REGEX","traverseTable","block","children","reduce","rows","child","prev","traverseRow","content","storeCell","map","path","flat","formatText","charAt","align","makeTable","start_indent","extra","table_indent","repeat","afterTextMatch","labelRegex","labelMatch","labelEl","replace","trim","descEl","n_cols","align_seq","col","fills","row_indent","textRows","row","cell","parseAlias","_match","p1","p2","parseAliasPage","parseBold","parseHighlight","parseItalics","replaceTextFormatting","output","parseCodeBlock","capture","codeBlock","parseCodeInline","codeInline","findRoamPage","title","pageSearch","roamAlphaAPI","q","getBlockText","uid","queryBlockContents","queryPageContentsByTitle","doublePar","mode","isBlockRef","grabRawText","parseBlockAlias","parseDoublePars","blockEmbed","blockContents","raw","parseBlockEmbed","_p1","_p2","p3","pageEmbed","pageContents","parsePageEmbed","label","offset","mathContent","eqLabel","hasLabel","mathMode","parsePopover","replacePopover","pre","_post","includes","parseDoubleBraces","figure","caption","cleanURL","fileInfo","fileExt","latexRoam","addFigure","figIndex","desc","parseImage","type","parseCitekeyInline","citekey","parseCitekeyList","first","list","post","fullList","citekeyList","parseCitekeyPar","replaceCitekeys","expandInserts","parseSpecialReferences","forEach","char","charRegex","urlRegex","is_table_block","table","elems","convertBlocks","document_class","numbered","start_header","blocks","heading","makeHeader","level","header","out","makeList","parseBlock","processedOutput","exportUID","cover","authors","contents","getCitekeysList","bibliography","JSON","stringify","addBibliography","console","error","bibPreamble","bibPrint","footer","entity","Set","regexmatch","cmd","header_level","elements","nesting_level","list_indent","el","parseListElement","elemContents","format","DEFAULT_OUTPUT","bib","blob","blobURL","figs","tex","package","ExportManager","createObjectURL","figCount","fetch","method","figFile","figBlob","config","resetExport","texOutput","revokeObjectURL","packageFiles","rest","_createTEX","EXTENSION_VERSION","require","EXTENSION_SLOT_ID","CustomClasses","popoverProps","minimal","popoverClassName","documentClasses","itemRenderer","item","itemProps","handleClick","active","modifiers","MenuItem","key","onClick","ExportDialog","isOpen","onClose","setOutput","outputArea","useRef","useSelect","setDocumentClass","useText","setAuthors","setTitle","useBool","toggleCover","numberedHeaders","toggleNumberedHeaders","startWithHeader","setStartWithHeader","onOpening","document","handleClose","triggerExport","client","generateExport","exportOutput","useEffect","Dialog","className","isCloseButtonShown","Classes","id","Label","Select","filterable","items","keys","onItemSelect","placement","Button","rightIcon","Switch","checked","onChange","InputGroup","autoComplete","spellCheck","intent","action","TextArea","fill","growVertically","inputRef","readOnly","small","style","height","AnchorButton","download","href","outlined","propTypes","bool","func","ExportButton","isDialogOpen","openDialog","closeDialog","icon","GraphWatcher","React","mounted","menus","setMenus","updatePageElements","current","currentMenus","querySelectorAll","some","watcher","setInterval","filter","page","parentElement","querySelector","innerText","pageUID","menu","createElement","classList","add","setAttribute","insertAdjacentElement","addMenuDivs","clearInterval","div","remove","getAttribute","createPortal","App","props","dialogIsOpen","bind","ui","blockContextMenu","addCommand","callback","_prev","Component","extension","shape","version","initialize","extensionAPI","settings","other","darkTheme","getAll","entries","val","unmountExtensionIfExists","existingSlot","getElementById","unmountComponentAtNode","onload","extensionSlot","appendChild","setupPortals","use_dark","getElementsByTagName","toString","setupDarkTheme","setup","render","onunload","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","module","shim","propName","componentName","location","propFullName","secret","err","getShim","isRequired","ReactPropTypes","array","bigint","number","object","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","exact","checkPropTypes","PropTypes","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","enumerable","obj","prop","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}