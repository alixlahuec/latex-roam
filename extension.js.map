{"version":3,"file":"extension.js","mappings":";IAAIA,qCCAJ,MAAM,EAA+BC,OAAiB,sBCAtD,MAAM,EAA+BA,OAAc,mBCAnD,MAAM,EAA+BA,OAAkB,UAAQ,KCAzD,EAA+BA,OAAkB,UAAU,q8BCwBjE,QAlBgB,WAA0B,IAAzBC,EAAyB,wDACzC,GAA0BC,EAAAA,EAAAA,UAASD,GAAnC,SAAOE,EAAP,KAAcC,EAAd,KAEMC,GAASC,EAAAA,EAAAA,cAAY,WAC1BF,GAAS,SAAAG,GAAS,OAAKA,OACrB,IAEGC,GAAMF,EAAAA,EAAAA,cAAY,SAACG,GACxBL,EAASK,KACP,IAEGC,GAAKJ,EAAAA,EAAAA,cAAY,kBAAMF,GAAS,KAAO,IAEvCO,GAAML,EAAAA,EAAAA,cAAY,kBAAMF,GAAS,KAAQ,IAE/C,MAAO,CAACD,EAAO,CAAEK,IAAAA,EAAKH,OAAAA,EAAQK,GAAAA,EAAIC,IAAAA,+GCnBnC,IAAMC,EAAmB,SAACH,GAAD,OAAWA,GAgBpC,QAVkB,SAAC,GAAmD,QAAjDI,MAAAA,OAAiD,MAAzC,KAAyC,MAAnCC,UAAAA,OAAmC,MAAvBF,EAAuB,EACrE,s1BAA0BV,EAAAA,EAAAA,UAASW,GAAnC,GAAOV,EAAP,KAAcC,EAAd,KAMA,MAAO,CAACD,GAJIG,EAAAA,EAAAA,cAAY,SAACS,GACxBX,EAASU,EAAUC,EAAMC,cAAcP,UACrC,CAACK,o8BCGL,QAVgB,WAAuB,IAAtBb,EAAsB,uDAAP,GAC/B,GAA0BC,EAAAA,EAAAA,UAASD,GAAnC,SAAOE,EAAP,KAAcC,EAAd,KAEMI,GAAMF,EAAAA,EAAAA,cAAY,SAACS,GACxBX,EAASW,EAAME,OAAOR,SACpB,IAEH,MAAO,CAACN,EAAOK,ICbhB,WAAWU,KAAKC,WAAWC,OAAOC,eAAeH,KAAKC,UAAU,SAAS,CAACV,QAAQ,OAAO,IAAIa,SAASC,MAAMC,QAAQ,iBAAiBC,SAASN,WAAWC,OAAOC,eAAeI,SAASN,UAAU,eAAe,CAACV,MAAMiB,EAAEC,EAAEC,GAAG,MAAMC,EAAEC,OAAO,YAAYH,GAAGI,EAAED,OAAOH,GAAG,KAAKJ,KAAKS,UAAUN,GAAGE,EAAE,EAAE,GAAGC,EAAED,GAAGL,KAAKS,UAAUN,GAAGE,EAAE,EAAE,GAAGG,EAAEH,MAAM,IAAIF,EAAEA,GAAG,IAAID,SAAS,IAAIQ,YAAYP,IAAIC,EAAED,GAAG,IAAIQ,WAAWR,EAAES,QAAQT,GAAGE,EAAEF,GAAGU,KAAKC,IAAI,WAAWP,OAAOJ,IAAIG,EAAEH,GAAGU,KAAKC,IAAI,MAAMP,OAAOJ,IAAI,SAASK,EAAEL,EAAEE,EAAEC,GAAG,QAAG,IAASD,GAAGA,aAAaM,aAAaN,EAAEU,EAAEV,SAAI,IAASC,GAAGA,aAAaU,OAAOV,EAAE,IAAIU,KAAKV,IAAIH,aAAac,KAAK,MAAM,CAACZ,EAAEA,GAAGU,EAAEZ,EAAEe,MAAMZ,EAAEA,GAAG,IAAIU,KAAKb,EAAEgB,cAAcC,EAAEjB,EAAEkB,UAAU,GAAGlB,aAAaJ,SAAS,CAAC,MAAMK,EAAED,EAAEmB,QAAQC,IAAI,uBAAuBf,EAAEJ,GAAGA,EAAEoB,MAAM,qCAAqCC,EAAEjB,GAAGA,EAAE,IAAI,IAAIkB,IAAIvB,EAAEwB,KAAKC,SAASC,MAAM,KAAKC,MAAMC,EAAEN,GAAGO,mBAAmBP,GAAG,MAAM,CAACpB,EAAEA,GAAGU,EAAEgB,GAAGzB,EAAEA,GAAG,IAAIU,KAAKb,EAAEmB,QAAQC,IAAI,kBAAkBP,KAAKiB,OAAOb,EAAEjB,EAAEF,MAAM,IAAII,GAAG,IAAIA,EAAE6B,OAAO,MAAM,IAAIC,MAAM,8BAA8B,QAAG,IAAS7B,EAAEA,EAAE,IAAIU,UAAU,GAAGoB,MAAM9B,GAAG,MAAM,IAAI6B,MAAM,8BAA8B,GAAG,iBAAiBhC,EAAE,MAAM,CAACE,EAAAA,EAAEC,EAAAA,EAAEc,EAAEL,EAAEZ,IAAI,GAAGA,aAAaR,KAAK,MAAM,CAACU,EAAAA,EAAEC,EAAAA,EAAEc,EAAEjB,EAAEkB,UAAU,GAAGlB,aAAaQ,YAAYR,aAAakC,eAAe,MAAM,CAAChC,EAAAA,EAAEC,EAAAA,EAAEc,EAAEjB,GAAG,GAAGA,aAAaO,aAAaA,YAAY4B,OAAOnC,GAAG,MAAM,CAACE,EAAAA,EAAEC,EAAAA,EAAEc,EAAEhB,EAAED,IAAI,GAAGoC,OAAOC,iBAAiBrC,EAAE,MAAM,CAACE,EAAAA,EAAEC,EAAAA,EAAEc,EAAEK,EAAEtB,IAAI,MAAM,IAAIsC,UAAU,6BAA6B,SAAShB,EAAEtB,GAAG,MAAMC,EAAE,SAASD,EAAEA,EAAEA,EAAEoC,OAAOC,iBAAiB,OAAO,IAAIH,eAAe,CAACK,WAAWvC,GAAG,IAAIE,EAAE,EAAE,KAAKF,EAAEwC,YAAYtC,GAAG,CAAC,MAAMC,QAAQF,EAAEwC,OAAO,IAAItC,EAAEpB,MAAM,CAACiB,EAAE0C,QAAQ,MAAM,CAAC,MAAMzC,EAAE2B,EAAEzB,EAAEpB,OAAOiB,EAAE2C,QAAQ1C,GAAGC,GAAGD,EAAE2C,gBAAgB,SAAShB,EAAE5B,GAAG,MAAM,iBAAiBA,EAAEY,EAAEZ,GAAGA,aAAaQ,WAAWR,EAAEC,EAAED,GAAG,SAASY,EAAEZ,GAAG,OAAM,IAAK6C,aAAaC,OAAOC,OAAO/C,IAAI,IAAIiB,EAAE,IAAI+B,YAAYC,SAAS,IAAID,YAAYE,OAAO1C,WAAW2C,KAAKC,KAAK,4QAA4QpD,GAAGA,EAAEqD,WAAW,QAAO,EAACC,EAAC,EAACC,EAAC,EAACC,GAAGvC,EAAEwC,QAAQH,IAAI,IAAII,EAAEzD,EAAEuD,GAAGG,SAAS,OAAO,SAASC,EAAE5D,EAAEC,EAAE,GAAG,IAAI,MAAMC,KAAK,UAAUF,GAAG,KAAKA,EAAE+B,OAAO,aAAa/B,EAAE2D,SAAS,EAAE,OAAO3D,EAAEA,EAAE2D,SAAS,OAAO3D,EAAE+B,eAAe/B,GAAjG,CAAqGA,GAAG0D,EAAE5E,IAAIoB,GAAGD,EAAEsD,EAAErD,EAAE6B,OAAO9B,GAAG,OAAOA,EAAE,SAAS4D,EAAE7D,EAAEC,EAAEC,EAAE,GAAG,MAAMC,EAAEH,EAAE8D,cAAc,EAAE9D,EAAE+D,cAAc,EAAE/D,EAAEgE,YAAY,GAAG3D,EAAEL,EAAEiE,UAAUjE,EAAEkE,WAAW,GAAG,EAAElE,EAAEmE,cAAc,MAAM,EAAElE,EAAEmE,UAAUlE,EAAEC,EAAE,GAAGF,EAAEmE,UAAUlE,EAAE,EAAEG,EAAE,GAAG,SAASgE,EAAEnE,GAAG,MAAMC,EAAEH,EAAE,IAAI,OAAOG,EAAEG,UAAU,EAAE,YAAYH,EAAEG,UAAU,EAAE,WAAWuD,EAAE3D,EAAEC,EAAEA,EAAE,IAAIA,EAAEiE,UAAU,GAAGlE,EAAEA,EAAE6B,OAAO,GAAG9B,EAAEE,GAAGoC,eAAe+B,EAAEtE,GAAG,IAAIiB,EAAEhB,GAAGD,EAAE,GAAG,SAASC,IAAIA,QAAQA,GAAGA,aAAaO,iBAAiBP,EAAED,EAAE4D,EAAEA,EAAE3D,EAAE,GAAGD,EAAEqE,EAAEE,OAAOtE,EAAE8B,YAAY,CAAC/B,EAAEqE,EAAE,GAAG,MAAMnE,EAAED,EAAEuE,YAAY,OAAO,CAAC,MAAMzF,MAAMkB,EAAEwE,KAAKtE,SAASD,EAAEwE,OAAO,GAAGvE,EAAE,MAAMH,EAAE4D,EAAEA,EAAE3D,EAAED,EAAE4D,GAAG5D,EAAEqE,GAAGE,OAAOtE,EAAE8B,cAAc9B,IAAI,SAAS0E,EAAExE,EAAEE,GAAG,MAAMiB,EAAEtB,EAAE,IAAIK,EAAE,EAAE,IAAI,OAAOiB,EAAEhB,UAAU,EAAE,YAAYgB,EAAEhB,UAAU,EAAEH,EAAEyD,EAAE,GAAGvD,GAAGiB,EAAEsD,aAAa,EAAEzE,EAAEkE,EAAE,GAAG/C,EAAEsD,aAAa,GAAGzE,EAAEkE,EAAE,KAAK/C,EAAEhB,UAAU,EAAEJ,EAAEC,EAAEkE,GAAG,GAAG/C,EAAEhB,UAAU,GAAGJ,EAAEC,EAAEkE,GAAG,IAAIpE,EAAEqB,GAAG,SAASuD,EAAE1E,EAAEE,EAAEiB,EAAE,GAAG,MAAMM,EAAE5B,EAAE,IAAI,OAAO4B,EAAEtB,UAAU,EAAE,YAAYsB,EAAEtB,UAAU,EAAE,WAAWsB,EAAEwC,UAAU,EAAE,MAAMP,EAAE1D,EAAEA,EAAEyB,EAAE,IAAIA,EAAEtB,UAAU,GAAGH,EAAEyD,EAAE,GAAGhC,EAAEtB,UAAU,GAAGJ,EAAEC,EAAEkE,GAAG,GAAGzC,EAAEtB,UAAU,GAAGJ,EAAEC,EAAEkE,GAAG,GAAGzC,EAAEwC,UAAU,GAAGjE,EAAED,EAAE6B,OAAO,GAAGH,EAAEwC,UAAU,GAAG9C,EAAE,GAAGM,EAAEwC,UAAU,GAAG,MAAM,GAAGxC,EAAEtB,UAAU,GAAGJ,EAAEG,GAAG,GAAGJ,EAAE2B,GAAG,SAASkD,EAAE5E,EAAEC,EAAEE,GAAG,MAAMiB,EAAEtB,EAAEK,GAAG,OAAOiB,EAAE8C,UAAU,EAAE,EAAE,GAAG9C,EAAE8C,UAAU,EAAE/D,EAAE,EAAE,GAAG,GAAGA,IAAIiB,EAAEsD,aAAa,EAAE1E,EAAEmE,EAAE,GAAG/C,EAAEsD,aAAa,GAAG1E,EAAEmE,EAAE,IAAI/C,EAAEsD,aAAavE,EAAE,EAAEF,EAAE,GAAGF,EAAEqB,GAAU,IAAIyD,EAAYnD,GAAG,IAAIhC,SAAS0B,EAAEiB,gBAAgBlC,GAAG,MAAMiB,EAAE,GAAG,IAAIM,EAAE,GAAGhB,EAAE,GAAGK,EAAE,EAAE,UAAU,MAAMjB,KAAKK,EAAE,OAAOgE,EAAErE,SAASA,EAAEE,QAAQoE,EAAEtE,GAAG,MAAMC,EAAED,EAAEqE,GAAG,YAAYnE,EAAE,IAAI0B,GAAG,aAAa,GAAG3B,QAAQ0E,EAAE3E,EAAEC,GAAGqB,EAAE0D,KAAKH,EAAE7E,EAAE4B,EAAE1B,IAAIoB,EAAE0D,KAAKhF,EAAEE,GAAGA,GAAGoB,EAAE0D,KAAKF,EAAE9E,EAAE4B,EAAE1B,IAAID,IAAI2B,GAAG,IAAIhB,IAAIgB,GAAG2C,OAAO,GAAGvE,EAAEE,EAAE6B,QAAQ/B,EAAEqE,EAAEpD,IAAIA,EAAEhB,GAAG,IAAIyD,EAAE,GAAG,IAAI,MAAM1D,KAAKsB,QAAQtB,EAAE0D,GAAGa,OAAOvE,EAAE+B,QAAQ,GAAGd,GAAGW,GAAG,YAAY,CAAC,MAAM1B,EAAEF,EAAE,IAAIE,EAAEI,UAAU,EAAE,YAAYJ,EAAE0E,aAAa,EAAEL,OAAO,IAAI,GAAGrE,EAAEI,UAAU,GAAG,WAAWJ,EAAE0E,aAAa,GAAGhE,EAAE,GAAGV,EAAE0E,aAAa,GAAGhE,EAAE,GAAGV,EAAE0E,aAAa,GAAGlB,EAAE,GAAGxD,EAAE0E,aAAa,GAAGhD,EAAE,GAAG1B,EAAEI,UAAU,GAAG,YAAYJ,EAAE0E,aAAa,GAAGhD,EAAE8B,EAAE,GAAGxD,EAAEI,UAAU,GAAG,EAAE,SAASL,EAAEC,GAAG,MAAM0D,EAAE5D,EAAE,IAAI4D,EAAEtD,UAAU,EAAE,YAAYsD,EAAEQ,UAAU,EAAEjE,EAAES,GAAG,GAAGgD,EAAEQ,UAAU,GAAGjE,EAAES,GAAG,GAAGgD,EAAEtD,UAAU,GAAGJ,EAAEwD,GAAG,GAAGE,EAAEtD,UAAU,GAAGJ,EAAE0B,GAAG,SAAS3B,EAAE2D,GAAtvBrB,CAA0vBA,gBAAgBvC,GAAG,UAAU,MAAMC,KAAKD,EAAEC,aAAaa,MAAMb,aAAaL,eAAeS,EAAEJ,SAASI,EAAEJ,EAAEgF,MAAMhF,EAAEc,KAAKd,EAAEe,cAAvHuB,CAAsIX,KAAK,CAACT,QAAQ,CAAC,eAAe,kBAAkB,sBAAsB,mQCCrhJ,+1OAEe+D,EAAgB,EAAhBA,EAAAA,oEAAf,WAA+BC,EAAKC,EAAOC,GAA3C,6EAUC,IATMC,EAAU,GAEZpF,EAAI,EAKFqF,EAAa,IAAIC,OAAOJ,EAAOA,EAAMK,OAED,QAAlCpE,EAAQkE,EAAWG,KAAKP,KAE/BG,EAAQN,KAAKG,EAAIQ,MAAMzF,EAAGmB,EAAMuE,QAGhCN,EAAQN,KAAKK,EAAc,WAAd,IAAkBhE,GAAlB,QAAyBA,EAAMuE,UAC5C1F,EAAIqF,EAAWM,UAhBjB,OAmBCP,EAAQN,KAAKG,EAAIQ,MAAMzF,IAnBxB,SAqBe4F,QAAQC,IAAIT,GArB3B,uCAqBqCU,KAAK,KArB1C,mEAwBA,SAASC,EAAT,GAAmC,IAAZC,EAAY,EAAZA,KAClB3G,EAD8B,EAANiC,IAK5B,OAFAjC,GADAA,EAASA,EAAO4G,WAAW,QAAS,MACpBA,WAAW,QAAS,KAE7B,UAAP,OAAiB5G,EAAjB,aAA4B2G,EAA5B,cAacE,EAAiB,oEAAhC,WAAgCC,GAAhC,0EACK/H,OAAOgI,WADZ,sBAEQ,IAAItE,MAAM,uCAFlB,WAIQuE,EAAWjI,OAAOgI,YACXE,cALf,sBAMS,IAAIxE,MAAM,kEANnB,wBAQgBuE,EAASC,cAAcH,GARvC,4GAaA,SAASI,EAAeC,GACvB,OAAO,EAAIA,GAAKC,MAAK,SAACrF,EAAEuD,GAAH,OAASvD,EAAEsF,MAAQ/B,EAAE+B,OAAS,EAAI,KAGxD,SAASC,IACR,IAAMC,EAAQ,IAAIjG,KACZkG,EAAKhE,OAAO+D,EAAM7C,WAAW+C,SAAS,EAAG,KACzCC,EAAKlE,OAAO+D,EAAM5C,WAAa,GAAG8C,SAAS,EAAG,KAC9CE,EAAOJ,EAAM3C,cAEnB,MAAO,GAAP,OAAU4C,EAAV,YAAgBE,EAAhB,YAAsBC,GCvBvB,QAxCW,gCAwCX,EAvCa,mCAuCb,GAtCY,kCAsCZ,GAnCa,qDAmCb,GAlCY,qDAkCZ,GA/BY,uBA+BZ,GA9Be,2BA8Bf,GA5BiB,cA4BjB,GA3BM,sBA2BN,GAxBa,oBAwBb,GAvBc,kEAuBd,GAtBa,2CAsBb,GArBU,gCAqBV,GAlBY,oBAkBZ,GAjBa,wBAiBb,GAdO,sBAcP,GAbU,oBAaV,GAZY,sBAYZ,GATQ,2BASR,GARO,kCAQP,GAPU,mBAOV,GANQ,2CAMR,GAHa,yRCzCb,s2OAKA,SAASC,GAAaC,GACrB,IAAM/F,EAAQgG,MAAMlE,KAAKiE,EAAOE,SAASC,KACzC,OAAGlG,EAAMU,OAAS,2jBACjB,CAAgDV,EAAM,GAAtD,eAOamG,GAAc,yEAA7B,WAA6BC,GAA7B,kFACehB,EAAegB,EAAMC,UAAUC,OAA/B,+BAAsC,WAAMC,EAAMC,GAAZ,0FAChCD,EADgC,cAC7CE,EAD6C,gBAE7BC,GAAYF,GAFiB,cAE7CG,EAF6C,sCAGxCF,GAHwC,GAG/BE,KAH+B,2CAAtC,wDAIX,IALJ,qHAQeD,GAAY,yEAA3B,WAA2BN,GAA3B,qEACKA,EAAMC,SADX,gCAEiBO,GAAUR,GAF3B,wFAIgB3B,QAAQC,IAAIU,EAAegB,EAAMC,UAC7CQ,IADwB,+BACpB,WAAML,GAAN,wFACkBE,GAAYF,GAD9B,cACEG,EADF,gBAESlC,QAAQC,IAAIiC,EAAQE,IAAR,+BAAY,WAAMC,GAAN,kFAAsBF,GAAUR,GAAhC,6DAA2CU,KAA3C,2CAAZ,wDAFrB,mFADoB,wDAJ5B,wCASIC,KAAK,IATT,8EAaeH,GAAU,yEAAzB,WAAyBR,GAAzB,kFAEcY,GAAWZ,EAAML,QAF/B,gCAGUK,EAAM,eAAiB,QAAQa,OAAO,GAHhD,mBAEEpC,KAFF,KAGEqC,MAHF,kFAOeC,GAAU,yEAAzB,WAAyBf,GAAzB,mHAAgCgB,EAAhC,+BAA+C,EAAGC,EAAlD,+BAA0D,GACnDC,EAAe,KAAKC,OAAOH,GAE3BI,EAAiBxB,MAAMlE,KAAKsE,EAAML,OAAOE,SAAS,yCAAyC,KAAM,EAEjGwB,EAAa,WACbC,EAAa1B,MAAMlE,KAAKuF,EAAMpB,SAASwB,IAAa,KAAM,EAC1DE,EAAUD,EAAa,GAAH,OAAMJ,EAAN,yBAAmCI,EAAW,GAAGpD,MAAM,GAAG,GAA1D,OAAoE,KAEjF+C,EAAMO,QAAQH,EAAY,IAAII,OACtBnH,OAAS,GAV/B,uCAUuC4G,EAVvC,wBAUsEN,GAAWQ,EAAe,GAAGK,QAVnG,wFAUkH,GAVlH,eAUOC,EAVP,eAYoB3B,GAAcC,GAZlC,eAYOG,EAZP,OAeOwB,EAASxB,EAAKD,QAAO,SAACtH,EAAGO,GAAJ,OAAUP,EAAE0B,QAAUnB,EAAEmB,OAAS1B,EAAE0B,OAASnB,EAAEmB,WAErEsH,EAAYzB,EAAK,GAAGM,KAAI,SAAAoB,GAAG,OAAIA,EAAIf,UAC1BxG,OAASqH,IACfG,EAAQlC,MAAMlE,KAAK,CAAEpB,OAAQqH,EAASC,EAAUtH,SAAU,iBAAM,QACtE,EAAAsH,GAAUrE,KAAV,QAAkBuE,IAEnBF,EAAYA,EAAUrD,KAAK,KAErBwD,EAAa,KAAKZ,OAAOH,EAAa,GACtCgB,EAAW7B,EAAKM,KAAI,SAAAwB,GAAG,MAAI,UAAGF,GAAeE,EAAIxB,KAAI,SAAAyB,GAAI,OAAIA,EAAKzD,QAAMF,KAAK,OAAS,WAASA,KAAK,MAzB3G,4BA2BW2C,EA3BX,+BA2B8CA,EA3B9C,wBA2B0EA,EA3B1E,4BA2B0GU,EA3B1G,cA2ByHG,EA3BzH,oBA2B+IC,EA3B/I,aA2B4JD,EA3B5J,oBA2BkLb,EA3BlL,2BA2BiNQ,GA3BjN,OA2B0NH,GA3B1N,OA2BoOL,EA3BpO,sFC1CA,SAASiB,GAAWC,EAAQC,EAAIC,GAC/B,MAAO,WAAP,OAAkBA,EAAlB,aAAyBD,EAAzB,KAGD,SAASE,GAAeH,EAAQC,GAC/B,OAAOA,EAGR,SAASG,GAAUJ,EAAQC,GAC1B,MAAO,YAAP,OAAmBA,EAAnB,KAGD,SAASI,GAAeL,EAAQC,GAC/B,MAAO,QAAP,OAAeA,EAAf,KAGD,SAASK,GAAaN,EAAQC,GAC7B,MAAO,YAAP,OAAmBA,EAAnB,KAGD,SAASM,GAAsBhD,GAC9B,IAAIiD,EAASjD,EAQb,OAJAiD,GAFAA,EAASA,EAAOlE,WAAWoB,GAAY0C,KAEvB9D,WAAWoB,GAAe4C,KAE1BhE,WAAWoB,GAAiB2C,ICrB7C,SAASI,GAAeT,EAAQU,GAC/B,OATD,SAAmBA,GAClB,MAAO,sBAAP,OAA6BA,EAA7B,qBAQOC,CAAUD,GAGlB,SAASE,GAAgBZ,EAAQU,GAChC,MAAO,IAAP,OATD,SAAoBA,GACnB,MAAO,UAAP,OAAiBA,EAAjB,KAQWG,CAAWH,ICDvB,SAASI,GAAaC,GACrB,IAAMC,EAAavM,OAAOwM,aAAaC,EAApB,sHAMdH,GACL,OAAGC,EAAW9I,OAAS,GACf8I,EAAW,GAAG,GAMvB,SAASG,GAAaC,GACrB,OAAO3M,OAAOwM,aAAaC,EAApB,4IAMAE,GAGR,SAASC,GAAmBD,GAC3B,OAAO3M,OAAOwM,aAAaC,EAApB,kPAQHE,GAAK,GAGV,SAASE,GAAyBP,GACjC,OAAOtM,OAAOwM,aAAaC,EAApB,6PAOHH,GAAO,0PCxDZ,giGAAA1K,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,+kBAGekL,GAAU,EAAVA,yEAAf,WAAyBpD,EAASqD,GAAlC,8EAEOC,EAAaN,GAAahD,IAElBjG,OAAS,GAJxB,sBAKSsJ,EALT,OAMO,UANP,sDAOUC,EAAW,GAAG,IAPxB,uBAUgBC,GAAY,CAAEnE,OAAQkE,EAAW,GAAG,KAVpD,4EAaSD,EAbT,OAcO,UAdP,8EAiBwBrD,EAjBxB,uCAoBUA,GApBV,4EAyBewD,GAAgB,EAAhBA,EAAAA,yEAAf,WAA+B3B,EAAQC,EAAIC,GAA3C,wFACWD,EADX,yBACkCsB,GAAUrB,EAAI,OADhD,wJAIe0B,GAAgB,EAAhBA,yEAAf,WAA+B5B,EAAQC,GAAvC,kFACcsB,GAAUtB,EAAI,SAD5B,iWChCA,giGAAA5J,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,+kBAGewL,GAAW,EAAXA,yEAAf,WAA0BT,EAAKI,GAA/B,wEACOM,EAAgBT,GAAmBD,GAD1C,KAEQI,EAFR,OAGM,UAHN,6CAMeO,GAAID,EAAe,GANlC,sEASeJ,GAAYI,GAT3B,4EAaeE,GAAgB,EAAhBA,EAAAA,EAAAA,yEAAf,WAA+BhC,EAAQiC,EAAKC,EAAKC,GAAjD,kFACcN,GAAWM,EAAI,SAD7B,iWChBA,giGAAA9L,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,+kBAGe+L,GAAU,EAAVA,yEAAf,WAAyBrB,EAAOS,GAAhC,4EACOa,EAAef,GAAyBP,GAD/C,KAEQS,EAFR,OAGM,UAHN,iCAMQc,EAAQD,EAAaxE,UAAY,GACnC0E,EAAe,KAChBD,EAAMpK,OAAS,GARpB,iCASwB+D,QAAQC,IAAIoG,EAAMjE,IAAN,+BAAU,WAAML,GAAN,kFAAsB+D,GAAI/D,EAAO,GAAjC,mFAAV,wDATpC,OASGuE,EATH,OAUGA,EAAe,KAAH,OAAQA,EAAapG,KAAK,OAVzC,2CAYYkG,EAAatB,OAZzB,OAYiCwB,IAZjC,yBAgBeb,GAAYW,GAhB3B,uHAoBeG,GAAe,EAAfA,EAAAA,EAAAA,yEAAf,WAA8BxC,EAAQiC,EAAKC,EAAKC,GAAhD,kFACcC,GAAUD,EAAI,SAD5B,iWCvBA,giGAAA9L,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4mBAOA,WAA6BkH,GAA7B,+EACKiD,EAASjD,EADd,SAIgBlC,EAAgBmF,EAAQ9C,EAAkBiE,IAJ1D,cAICnB,EAJD,gBAMgBnF,EAAgBmF,EAAQ9C,GAAkBsE,IAN1D,cAMCxB,EAND,gBAQgBnF,EAAgBmF,EAAQ9C,GAAiB8E,IARzD,cAQChC,EARD,iBAUgBnF,EAAgBmF,EAAQ9C,GAAiBkE,IAVzD,eAUCpB,EAVD,yBAYQA,GAZR,mEAeA,kBAf6B,2RCP7B,giGAAAnK,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,+kBAMeoM,GAAa,EAAbA,EAAAA,yEAAf,WAA4BzC,EAAQ3D,EAAM8B,GAA1C,wFACW9B,EAAKgD,OADhB,yBAC2Cb,GAAWL,EAAQkB,QAD9D,wJAIeqD,GAAe,yEAA9B,WAA8BhC,GAA9B,kFACcrF,EAAgBqF,EAAShD,GAAe+E,IADtD,gJAIA,WAAiCjL,EAAOmL,EAAKjC,EAASkC,GAAtD,sEACSlC,EAAQmC,SAAS,YAAanC,EAAQmC,SAAS,cADxD,qBAEI,GAFJ,2BAGInC,EAAQmC,SAAS,MAHrB,6BAIMF,EAJN,SAIkBD,GAAehC,GAJjC,+DAKKlJ,EALL,4HAQA,kBARiC,EAAlBsL,EAAAA,EAAAA,2RCdf,qnNACeC,GAAO,EAAPA,EAAAA,yEAAf,WAAsBC,EAASrL,EAAKkH,GAApC,iGACOoE,EAAWtL,EAAI2E,WAAW,MAAO,KACjC4G,EAAW1F,MAAMlE,KAAK2J,EAASxF,SAAS,4BAExC0F,EAAUD,EAAS,GAAG,GAJ7B,SAMwBzO,OAAO2O,UAAUC,UAAU1L,EAAKwL,GANxD,UAMOG,EANP,OAUOrE,EAAa,WACbC,EAAa1B,MAAMlE,KAAKuF,EAAMpB,SAASwB,IAAa,KAAM,EAC1DE,EAAUD,EAAa,eAAH,OAAkBA,EAAW,GAAGpD,MAAM,GAAG,GAAzC,KAAiD,MAErEyH,EAAO1E,EAAMO,QAAQH,EAAY,IAAII,QACtBnH,OAAS,GAf/B,qDAewDsG,GAAW+E,GAfnE,kFAe6E,GAf7E,eAeOjE,EAfP,MAiBKkE,EAAe,CAACrE,EAASG,GAAQmE,OAAOC,SAASvH,KAAK,SACxCqH,GAAgB,MAlBnC,+EAoB2EF,EApB3E,YAoBuFH,EApBvF,2BAoBoH3E,GAAWwE,EAAQ3D,QApBvI,sFAoBoJmE,EApBpJ,8FAuBeG,GAAW,EAAXA,EAAAA,EAAAA,yEAAf,WAA0B3D,EAAQC,EAAIC,EAAIiC,GAA1C,kFACcY,GAAO9C,EAAIC,EAAIiC,GAD7B,iWCxBA,giGAAA9L,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,+kBAEeuN,GAAS,yEAAxB,WAAwBlD,GAAxB,mGAAiC7B,EAAjC,+BAAyC,GAAIgF,EAA7C,uBACOC,EAAcpD,EAEP,GAAVmD,EAHJ,wBAIQ5E,EAAa,WACbC,EAAa1B,MAAMlE,KAAKuF,EAAMpB,SAASwB,IAAa,KAAM,EAC1DE,EAAUD,EAAa,cAAH,OAAiBA,EAAW,GAAGpD,MAAM,GAAG,GAAxC,KAAgD,GAN5E,iDAQiCqD,GARjC,OAQ2C2E,EAR3C,kCAUkBjF,EAVlB,kCAUgCL,GAAWK,GAV3C,iDAUoD,GAVpD,eAUQkF,EAVR,kCAWaD,EAAYxH,WAAW,QAAS,KAX7C,YAWqDyH,IAXrD,8EAeeC,GAAc,EAAdA,EAAAA,EAAAA,yEAAf,WAA6BhE,EAAQU,EAAS7B,EAAOgF,GAArD,kFACcD,GAASlD,EAAS7B,EAAOgF,GADvC,0GCdA,SAJA,SAAgC7D,EAAQiE,EAAMC,GAC7C,MAAO,SAAP,OAAgBD,EAAhB,YAAwBC,EAAxB,MCOD,SAASC,GAAmBnE,EAAQ2C,EAAKyB,GACxC,MAAO,GAAP,OAAUzB,EAAV,sBAA2ByB,EAA3B,KAGD,SAASC,GAAiBrE,EAAQ2C,EAAK2B,EAAOC,EAAMC,GACnD,MAAO,IAAP,OAAW7B,GAAX,OAXD,SAAqB2B,EAAOC,GAC3B,IAAME,EAAWH,EAAQC,EACnB/H,EAAWgB,MAAMlE,KAAKmL,EAAShH,SAAS,4BAA4BY,KAAI,SAAA7G,GAAK,OAAIA,EAAM,MAC7F,MAAO,UAAP,OAAiBgF,EAASL,KAAK,MAA/B,KAQiBuI,CAAYJ,EAAMC,IAAnC,OAA2CC,EAA3C,KAGD,SAASG,GAAgB3E,EAAQ2C,EAAKyB,EAASI,GAC9C,MAAO,IAAP,OAAW7B,EAAX,kBAAwByB,EAAxB,YAAmCI,EAAnC,KAGD,SAASI,GAAgBrH,GACxB,IAAIiD,EAASjD,EAQb,OAJAiD,GAFAA,EAASA,EAAOlE,WAAWoB,GAAmB2G,KAE9B/H,WAAWoB,GAAkBiH,KAE7BrI,WAAWoB,GAAeyG,2PC1B3C,qnNAiBe3F,GAAW,yEAA1B,WAA0BjB,GAA1B,iFACKiD,EAASjD,EADd,SAKgBsH,GAAcrE,GAL9B,cAKCA,EALD,gBAQgBnF,EAAgBmF,EAAQ9C,GAAoBoF,IAR5D,cAkBCtC,GAFAA,GAFAA,GAFAA,EAASoE,GAJTpE,EARD,SAciBlE,WAAWoB,GAAiByC,KAE5B7D,WAAWoB,GAAsB,KAEjCpB,WAAWoB,EAAgBqC,IAlB5C,UAoBgB1E,EAAgBmF,EAAQ9C,GAAaiG,IApBrD,eA4BCnD,GAHAA,GAFAA,GAHAA,EApBD,QAuBiBlE,WAAWoB,GAAiB+C,KAE5BnE,WAAWoB,GAAW,KAGtBpB,WAAWoB,GAAkBoH,IAI1B,CAAC,IAAK,KACdC,SAAQ,SAAAC,GAClB,IAAMC,EAAY,IAAItJ,OAAJ,UAAcqJ,GAAQ,KACxCxE,EAASA,EAAOlE,WAAW2I,EAAW,WAnCxC,UAwCgB5J,EAAgBmF,EAAQ9C,GAAYsG,IAxCpD,eAwCCxD,EAxCD,OA0CO0E,EAAW,4BAOM,MAJvB1E,GAFAA,EAASA,EAAOlE,WAAW4I,GAAU,SAAClF,EAAQC,EAAIC,GAAb,OAAoB9D,EAAY,CAAEzE,IAAKsI,EAAI5D,KAAM6D,QAEtE5D,WAAWoB,GAAkBkD,KAInCnC,OAAO,KAChB+B,EAAS,iBAAH,OAAoBA,EAAO1E,MAAM,GAAjC,iBAEP0E,EAASD,GAAsBC,GApDhC,kBAyDQA,GAzDR,4EA4DekB,GAAY,yEAA3B,WAA2B9D,GAA3B,2EACK4C,EAAS5C,EAAML,QAAU,IAC1BK,EAAMC,SAFV,sCAGc2C,EAHd,cAG+BvE,QAAQC,IAAI0B,EAAMC,SAASQ,IAAf,+BAAmB,WAAML,GAAN,kFAAsB0D,GAAY1D,GAAlC,mFAAnB,wDAH3C,mBAG0G7B,KAAK,KAA7GqE,EAHF,mDAKgBqE,GAAcrE,GAL9B,cAKCA,EALD,yBAOQA,GAPR,8EAUeuB,GAAI,yEAAnB,WAAmBnE,GAAnB,iGAA0BgB,EAA1B,+BAAyC,EACpC4B,EAAS,IAEP2E,EAAiB7H,GAAaM,EAAML,SACxB6H,cAAgBlM,OAJnC,wBAKQ2F,EAAQsG,EAAe,GAL/B,SAMsBxG,GAAUf,EAAOgB,EAAcC,GANrD,OAMQwG,EANR,OAOE7E,EAAS,KAAH,OAAQ6E,EAAR,MAPR,yCASiB7G,GAAWZ,EAAML,QATlC,WASEiD,EATF,QAUK5C,EAAMC,SAVX,kCAWuB5B,QAAQC,IAAI0B,EAAMC,SAASQ,IAAf,+BAAmB,WAAML,GAAN,kFAAsB+D,GAAI/D,EAAOY,GAAjC,mFAAnB,wDAXnC,QAWS0D,EAXT,OAYG9B,EAAS,GAAH,OAAMA,EAAN,eAAmB8B,EAAMnG,KAAK,SAZvC,iCAeQqE,GAfR,ijCCvFA,giGAAAnK,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,+kBASeiP,GAAc,EAAdA,yEAAf,WAA6BzI,EAA7B,oGAAoC0I,eAAAA,OAApC,MAAqD,OAArD,MAA6DC,SAAAA,OAA7D,aAA8EC,aAAAA,OAA9E,MAA6F,EAA7F,EACOC,EAAS9I,EAAeC,GAD/B,SAG6B6I,EAAO5H,OAAP,+BAAc,WAAM0C,EAAQ5C,GAAd,kGACtB4C,EADsB,UACnCvC,EADmC,QAItCL,EAAM+H,QAJgC,iCAKnBC,GAAWhI,EAAML,OAAQ,CAAEgI,eAAgBA,EAAgBC,SAAUA,EAAUK,MAAOJ,IALnE,UAKlCK,EALkC,OAMxCC,EAAM,GAAH,OAAM9H,EAAN,aAAe6H,IACflI,EAAMC,SAP+B,oBAQd,YAAtBD,EAAM,mBAA4D,IAAvBA,EAAM,aARb,kCASlB0H,GAAc1H,EAAMC,SAAU,CAAE0H,eAAgBA,EAAgBC,SAAUA,EAAUC,aAAcA,EAAa,IAT7F,QAShCnD,EATgC,OAUtCyD,EAAM,GAAH,OAAMA,GAAN,OAAYzD,GAVuB,yCAYnB0D,GAASpI,EAAMC,SAAUD,EAAM,aAAc,GAZ1B,QAYhC2G,EAZgC,OAatCwB,EAAM,GAAH,OAAMA,GAAN,OAAYxB,GAbuB,iCAgBjCwB,GAhBiC,yBAmBlBE,GAAWrI,GAnBO,QAmBlCO,EAnBkC,OAoBxC4H,EAAM,GAAH,OAAM9H,EAAN,aAAeE,EAAf,QApBqC,iCAsBlC4H,GAtBkC,4CAAd,wDAuBzB,IA1BJ,aA4BiC,SAzB5BG,EAHL,QA4BoBpK,OAAO,KACzBoK,EAAkBA,EAAgBpK,MAAM,GAAI,IA7B9C,kBA+BQoK,GA/BR,6EAkCeC,GAAW,yEAA1B,WAA0BC,GAA1B,iIAAqCb,EAArC,+BAAsD,OAAtD,iCAA8I,GAA9I,IAAgEC,SAAAA,OAAhE,aAAiFa,MAAAA,OAAjF,aAA+FZ,aAAAA,OAA/F,MAA8G,EAA9G,MAAiHa,QAAAA,OAAjH,MAA2H,GAA3H,MAA+HvF,MAAAA,OAA/H,MAAuI,GAAvI,EACOwF,EAAWlF,GAAmB+E,GADrC,SAIwBI,GAAgBD,GAJxC,UAIO/J,EAJP,OAKKiK,EAAe,KAChBjK,EAAStE,OAAS,GANtB,2CAQwBqE,EAAiBC,GARzC,SAQGiK,EARH,SASuD,KAAjCC,KAAKC,UAAUF,IACjChS,OAAO2O,UAAUwD,gBAAgBH,GAVrC,kDAaGI,QAAQC,MAAR,MAbH,eAiBOC,EAAcN,EAAavO,OAAS,EAAI,oGAAsG,GAC9I8O,EAAWP,EAAavO,OAAS,EAAI,qCAAuC,GAE5E4N,EApBP,4BAoBqCP,EApBrC,sBAoBiExE,EApBjE,uBAoBqFuF,EApBrF,qBAoByGtJ,IApBzG,mFAoB8L+J,EApB9L,uGAoBwSV,EAAQ,cAAgB,IAE3TpQ,EAAO,GAtBZ,eAwBEA,EAxBF,UAwBgBqP,GAAciB,EAAS1I,SAAU,CAAE0H,eAAgBA,EAAgBC,SAAUA,EAAUC,aAAcA,IAxBrH,QAwBExP,EAxBF,gEA0BE4Q,QAAQC,MAAR,MA1BF,eA6BOG,EA7BP,YA6BqBD,EA7BrB,+CA+BWlB,EA/BX,aA+BsB7P,EA/BtB,aA+B+BgR,IA/B/B,oGAqCeT,GAAgB,yEAA/B,WAA+BU,GAA/B,sFACgBC,IADhB,KACoB3J,MADpB,SACsCkE,GAAYwF,GADlD,0BAC2DzJ,SAASC,IADpE,UAC0BpE,KAD1B,gBACuF+E,KAAI,SAAA+I,GAAU,OAAIA,EAAW,MADpH,iIAKexB,GAAW,yEAA1B,WAA0BrI,GAA1B,8IAA4F,GAA5F,IAAoCgI,eAAAA,OAApC,MAAqD,OAArD,MAA6DC,SAAAA,OAA7D,aAA8EK,MAAAA,OAA9E,MAAsF,EAAtF,WACoBrH,GAAWjB,GAD/B,OACOlB,EADP,OAGKgL,EAAM,GACJC,EAAkC,WAAlB/B,EAAgCM,EAAQ,EAAKA,EAJpE,KAKQyB,EALR,OAMM,IANN,OASM,IATN,QAYM,IAZN,QAeM,IAfN,+BAOED,EAAM,UAPR,oCAUEA,EAAM,UAVR,oCAaEA,EAAM,aAbR,oCAgBEA,EAAM,gBAhBR,gEAmBYhL,EAnBZ,sDAsBagL,GAtBb,OAsBqB7B,EAAkB,GAAN,IAtBjC,YAsB6CnJ,EAtB7C,sFAyBe2J,GAAS,EAATA,yEAAf,WAAwBuB,EAAUtD,GAAlC,iGAAwCrF,EAAxC,+BAAuD,EAChD4I,EAAgB5I,EAAa,EAAI,EACjC6I,EAAc,KAAK1I,OAAOH,KAC7B4I,GAAiB,GAHrB,wBAIQH,EAAe,YAARpD,EAAsB,UAAY,YAJjD,SAKuBhI,QAAQC,IAAIqL,EAASlJ,IAAT,+BAAa,WAAMqJ,GAAN,wFAClBC,GAAiBD,EAAI9I,EAAa,GADhB,cACvC2D,EADuC,mCAEnC,KAAKxD,OAAOH,EAAa,IAFU,OAEL2D,IAFK,2CAAb,wDALnC,cAKQmD,EALR,mCASY+B,EATZ,mBASkCJ,EATlC,cAS2C3B,EAAOvJ,KAAK,MATvD,aASiEsL,EATjE,iBASqFJ,EATrF,+BAWuBpL,QAAQC,IAAIqL,EAASlJ,IAAT,+BAAa,WAAMqJ,GAAN,kFAAmB3F,GAAI2F,EAAI9I,GAA3B,mFAAb,wDAXnC,eAWQ8G,EAXR,mCAYY+B,GAZZ,OAY0B/B,EAAOvJ,KAAK,UAZtC,8EAgBe8J,GAAW,yEAA1B,WAA0BrI,GAA1B,yFACK4C,EAAS,IAEP2E,EAAiB7H,GAAaM,EAAML,SACxB6H,cAAgBlM,OAJnC,uBAKQ2F,EAAQsG,EAAe,GAL/B,SAMiBxG,GAAUf,EAAO,EAAGiB,GANrC,OAME2B,EANF,+CASqBhC,GAAWZ,EAAML,QATtC,WASQlB,EATR,OAUEmE,EAAS,GAAH,OAAMnE,IACTuB,EAAMC,SAXX,iBAYSA,EAAWjB,EAAegB,EAAMC,UAChC+J,EAAUhK,EAAM,aAAgBA,EAAM,aAAe,WAb9D,KAcUgK,EAdV,OAeQ,aAfR,SAoBQ,aApBR,8CAgBwB3L,QAAQC,IAAI2B,EAASQ,IAAT,+BAAa,WAAML,GAAN,kFAAsBiI,GAAWjI,GAAjC,mFAAb,wDAhBpC,eAgBUsE,EAhBV,OAiBI9B,EAAS,GAAH,OAAMA,EAAN,iBAAqB8B,EAAMnG,KAAK,SAjB1C,8CAuBuB6J,GAASnI,EAAU+J,EAAQ,GAvBlD,eAuBUrD,EAvBV,OAwBI/D,EAAS,GAAH,OAAMA,EAAN,aAAiB+D,GAxB3B,sDA8BQ/D,GA9BR,8EAiCemH,GAAiB,EAAjBA,yEAAf,WAAgC/J,EAAOgB,GAAvC,yFACK4B,EAAS,IACP2E,EAAiB7H,GAAaM,EAAML,SACxB6H,cAAgBlM,OAHnC,wBAIQ2F,EAAQsG,EAAe,GAJ/B,SAKsBxG,GAAUf,EAAOgB,EAAa,EAAGC,GALvD,OAKQwG,EALR,OAME7E,EAAS,YAAH,OAAe6E,EAAf,KANR,wBAQQuC,EAAUhK,EAAM,aAAgBA,EAAM,aAAe,WAR7D,KASSgK,EATT,OAWO,aAXP,SAiBO,aAjBP,8CAYyB7F,GAAInE,EAAOgB,EAAa,GAZjD,eAYST,EAZT,OAaGqC,EAAS,UAAH,OAAarC,EAAb,KAbT,8CAoBsBK,GAAWZ,EAAML,QApBvC,WAoBSlB,EApBT,QAqBMuB,EAAMC,SArBZ,kCAsBuBmI,GAASpI,EAAMC,SAAU+J,EAAQhJ,EAAe,GAtBvE,QAsBU2F,EAtBV,OAuBI/D,EAAS,UAAH,OAAanE,EAAb,cAAuBkI,GAvBjC,wBAyBI/D,EAAS,UAAH,OAAanE,EAAb,KAzBV,qEA+BQmE,GA/BR,87CC/JA,gtPAIO,IAAMqH,GAAiB,CAC7BC,IAAK,CACJ3J,QAAS,GACT4J,KAAM,KACNC,QAAS,MAEVC,KAAM,CACL1D,KAAM,GACNwD,KAAM,KACNC,QAAS,MAEVE,IAAK,CACJ/J,QAAS,GACT4J,KAAM,KACNC,QAAS,MAEVG,QAAS,CACRJ,KAAM,KACNC,QAAS,8IAKEI,GAAb,WACC,0GAAa,qHACZpS,KAAK8R,IAAL,MAAgBD,GAAeC,KAC/B9R,KAAKiS,KAAL,MAAiBJ,GAAeI,MAChCjS,KAAKkS,IAAL,MAAgBL,GAAeK,KAC/BlS,KAAA,cAAoB6R,GAAc,iBALpC,2CAkDC,WAEC,GAAA7R,KAAA,YAAAA,MACA,GAAAA,KAAA,YAAAA,MACA,GAAAA,KAAA,YAAAA,MACA,GAAAA,KAAA,YAAAA,MAEA,GAAAA,KAAA,YAAAA,QAzDF,6BA2EC,SAAgByQ,GACf,GAAAzQ,KAAA,YAAAA,MACAA,KAAK8R,IAAL,MAAgBD,GAAeC,KAE/B,IAAMC,EAAO,IAAIpS,KAAK,CAAC8Q,GAAe,CAAExC,KAAM,eAE9CjO,KAAK8R,IAAM,CACV3J,QAASsI,EACTsB,KAAAA,EACAC,QAAStQ,IAAI2Q,gBAAgBN,MApFhC,wCAwFC,WAAgBpQ,EAAKwL,GAArB,mFACKmF,GAAY,EADjB,SAGuBC,MAAM5Q,EAAK,CAAE6Q,OAAQ,QAH5C,cAGOC,EAHP,gBAIuBA,EAAQV,OAJ/B,cAIOW,EAJP,OAKCJ,EAAWtS,KAAKiS,KAAK1D,KAAKrM,OAAS,EAEnClC,KAAKiS,KAAK1D,KAAKpJ,KAAK,CACnBC,MAAOsN,EACPxR,KAAM,UAAF,OAAYoR,EAAZ,YAAwBnF,KAT9B,kBAYQmF,GAZR,iDAxFD,6FAoIC,WAAqBlH,EAAKuH,GAA1B,+EACC3S,KAAK4S,cADN,YAIyB5S,KAJzB,YAIyBA,KAAgBoL,EAAKuH,GAJ9C,cAIOE,EAJP,OAMC,GAAA7S,KAAA,YAAAA,KAAgB6S,GANjB,YAQO7S,KARP,YAQOA,MARP,0BAUOA,KAVP,YAUOA,KAAiB2S,EAAO5H,OAV/B,gCAYQ,CACN+G,IAAK9R,KAAK8R,IACVG,KAAMjS,KAAKiS,KACXC,IAAKlS,KAAKkS,IACVC,QAASnS,KAAA,UAhBX,iDApID,4IASsB,MAAjBA,KAAK8R,IAAIC,OACXrQ,IAAIoR,gBAAgB9S,KAAK8R,IAAIE,SAC7BhS,KAAK8R,IAAIC,KAAO,KAChB/R,KAAK8R,IAAIE,QAAU,oBAKC,MAAlBhS,KAAKiS,KAAKF,OACZrQ,IAAIoR,gBAAgB9S,KAAKiS,KAAKD,SAC9BhS,KAAKiS,KAAKF,KAAO,KACjB/R,KAAKiS,KAAKD,QAAU,oBAKD,MAAjBhS,KAAKkS,IAAIH,OACXrQ,IAAIoR,gBAAgB9S,KAAKkS,IAAIF,SAC7BhS,KAAKkS,IAAIH,KAAO,KAChB/R,KAAKkS,IAAIF,QAAU,oBAKI,MAArBhS,KAAA,QAAa+R,OACfrQ,IAAIoR,gBAAgB9S,KAAA,QAAagS,SACjChS,KAAA,QAAa+R,KAAO,KACpB/R,KAAA,QAAagS,QAAU,oBAKxBhS,KAAK8R,IAAL,MAAgBD,GAAeC,KAC/B9R,KAAKiS,KAAL,SACIJ,GAAeI,MADnB,IAEC1D,KAAM,KAEPvO,KAAKkS,IAAL,MAAgBL,GAAeK,KAC/BlS,KAAA,cAAoB6R,GAAc,qBAaxBK,GACV,GAAGA,GAAOlS,KAAKkS,IAAI/J,QAAQ,CAC1B,GAAAnI,KAAA,YAAAA,MACAA,KAAKkS,IAAL,MAAgBL,GAAeK,KAE/B,IAAMH,EAAO,IAAIpS,KAAK,CAACuS,GAAM,CAAEjE,KAAM,eAErCjO,KAAKkS,IAAK,CACT/J,QAAS+J,EACTH,KAAAA,EACAC,QAAStQ,IAAI2Q,gBAAgBN,mLAkC5B/R,KAAKiS,KAAK1D,KAAKrM,OAAS,mCACPgD,EAAYlF,KAAKiS,KAAK1D,MAAMwD,cAAzCA,EAAO,EAAPA,KACN,GAAA/R,KAAA,YAAAA,MAEAA,KAAKiS,KAAKF,KAAOA,EACjB/R,KAAKiS,KAAKD,QAAUtQ,IAAI2Q,gBAAgBN,0KAIxBhH,oFACXgI,EAAe,GAAfA,OAAAA,GACF/S,KAAKiS,KAAK1D,MAAAA,CACb,CAAErN,KAAM,GAAF,OAAK6J,EAAL,QAAkB3F,MAAOpF,KAAKkS,IAAI/J,WAErB,MAAjBnI,KAAK8R,IAAIC,MAAegB,EAAa5N,KAAK,CAAEjE,KAAM,mBAAoBkE,MAAOpF,KAAK8R,IAAIC,gBAEtE7M,EAAY6N,GAAchB,cAAvCA,EAAO,EAAPA,KACN,GAAA/R,KAAA,YAAAA,MAEAA,KAAA,QAAa+R,KAAOA,EACpB/R,KAAA,QAAagS,QAAUtQ,IAAI2Q,gBAAgBN,4KAG3B3G,EAAKuH,oFACbpD,EAA4BoD,EAA5BpD,eAAmByD,EAAAA,GAASL,EAAAA,aACvBxC,GAAW/E,EAAKmE,EAAN,MAA2ByD,8GC5J7C,IAAMC,GAAoBC,EAAAA,KAAAA,GAGpBC,GAAoB,kBAEpBC,GAGA,0QCRb,giGAAA/S,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qsEAcA,IAAMgT,GAAe,CACpBC,SAAS,EACTC,iBDPe,sBCUVC,GAAkB,CACvB,QAAW,UACX,KAAQ,OACR,OAAU,UAGLlS,GAAU,CACf,EAAK,sBACL,EAAK,sBACL,EAAK,sBACL,EAAK,uBAGN,SAASmS,GAAaC,EAAMC,GAC3B,IAAQC,EAAuCD,EAAvCC,YAA0BC,EAAaF,EAA1BG,UAAaD,OAElC,OAAO,oBAAC,EAAAE,SAAD,CAAUF,OAAQA,EAAQG,IAAKN,EAAMO,QAASL,EAAavN,KAAMqN,IAGzE,SAASQ,GAAT,GAA+C,IAAvBC,EAAuB,EAAvBA,OAAQC,EAAe,EAAfA,QAAShJ,EAAM,EAANA,IACxC,MAA4BzM,EAAAA,EAAAA,UAAS,MAAKkT,KAA1C,GAAOrH,EAAP,KAAe6J,EAAf,KACMC,GAAaC,EAAAA,EAAAA,UACnB,KAA2CC,EAAU,CACpDlV,MAAO,WADR,GAAOiQ,EAAP,KAAuBkF,EAAvB,KAGA,KAA8BC,EAAQ,IAAtC,GAAOpE,EAAP,KAAgBqE,EAAhB,KACA,KAA0BD,EAAQ,IAAlC,GAAO3J,EAAP,KAAc6J,EAAd,KACA,KAAyCC,GAAQ,GAAjD,GAAOxE,EAAP,KAAwByE,EAAxB,KAAgBhW,OAChB,KAA6D+V,GAAQ,GAArE,GAAOE,EAAP,KAAkCC,EAAlC,KAA0BlW,OAC1B,KAA8C0V,EAAU,CACvDlV,MAAO,MADR,GAAO2V,EAAP,KAAwBC,EAAxB,KAIMC,GAAYpW,EAAAA,EAAAA,cAAY,WAC7B6V,EAAS,CAAElV,OAAQ,CAAER,MAAOkW,SAASrK,WACnC,CAAC6J,IAEES,GAActW,EAAAA,EAAAA,cAAY,WAC/BN,OAAO2O,UAAUwF,cACjByB,EAAU,MAAKxC,KACfuC,MACE,CAACA,IAEEkB,GAAgBvW,EAAAA,EAAAA,aAAW,cAAC,8FAC3BwW,EAAS9W,OAAO2O,WACfwF,cAF0B,SAGN2C,EAAOC,eACjCpK,EACA,CACCkF,QAAAA,EACAD,MAAAA,EACAd,eAAAA,EACAC,SAAUuF,EACVtF,aAAclP,OAAO0U,GACrBlK,MAAAA,IAX+B,OAG3B0K,EAH2B,OAajCpB,EAAUoB,GAbuB,2CAc/B,CAACrK,EAAKkF,EAASD,EAAOd,EAAgBwF,EAAiBE,EAAiBlK,IAS3E,OANA2K,EAAAA,EAAAA,YAAU,WACT,OAAO,WACNjX,OAAO2O,UAAUwF,iBAEhB,IAEI,oBAAC,EAAA+C,OAAD,CACNC,UD/Ea,qBCgFbC,oBAAoB,EACpB1B,OAAQA,EACRC,QAASiB,EACTF,UAAWA,EACXpK,MAAM,mBACN,2BAAK6K,UAAWE,EAAAA,QAAAA,aACf,2BAAKC,GAAG,yBACP,2BAAKH,UAAU,4BACd,oBAAC,EAAAI,MAAD,yBACA,oBAAC,EAAAC,OAAD,CACCC,YAAY,EACZzC,aAAcA,GACd0C,MAAOtW,OAAOuW,KAAK5C,IACnB6C,aAAc5B,EACd6B,UAAU,SACVjD,aAAcA,IACd,oBAAC,EAAAkD,OAAD,CAAQjD,SAAS,EAAMkD,UAAU,wBAAwBnQ,KAAMmN,GAAgBjE,MAEhF,oBAAC,EAAAkH,OAAD,CAAQC,QAASrG,EAAOnC,MAAM,kBAAkByI,SAAU7B,KAE3D,2BAAKc,UAAU,4BACd,oBAAC,EAAAI,MAAD,oBACA,oBAAC,EAAAY,WAAD,CACCC,aAAa,MACbF,SAAUhC,EACVmC,WAAW,QACX7I,KAAK,OACL/O,MAAOoR,IAER,oBAAC,EAAA0F,MAAD,gBACA,oBAAC,EAAAY,WAAD,CACCC,aAAa,MACbF,SAAU/B,EACVkC,WAAW,QACX7I,KAAK,OACL/O,MAAO6L,KAGT,2BAAK6K,UAAU,4BACd,oBAAC,EAAAI,MAAD,kBACA,oBAAC,EAAAC,OAAD,CACCC,YAAY,EACZzC,aAAcA,GACd0C,MAAOtW,OAAOuW,KAAK9U,IACnB+U,aAAcnB,EACdoB,UAAU,SACVjD,aAAcA,IACd,oBAAC,EAAAkD,OAAD,CAAQjD,SAAS,EAAMkD,UAAU,wBAAwBnQ,KAAM/E,GAAQ2T,MAExE,oBAAC,EAAAwB,OAAD,CAAQC,QAAS3B,EAAiB7G,MAAM,cAAcyI,SAAU3B,KAEjE,oBAAC,EAAAuB,OAAD,CAAQR,GAAG,4BAA4BgB,OAAO,UAAU9C,QAASqB,EAAejP,KAAK,0BAErFmE,EAAO0H,IAAI/J,QAAQjG,OAAS,EAC1B,4BACD8U,OAAO,gCACPpB,UAAWE,EAAAA,QAAAA,KACXC,GAAG,yBACHvD,OAAO,OACP9S,OAAO,UACP,oBAAC,EAAAuX,SAAD,CAAU,aAAW,yBAAyBlB,GAAG,6BAA6BmB,MAAM,EAAMC,gBAAgB,EAAOC,SAAU9C,EAAYpT,KAAK,OAAOmW,UAAU,EAAMC,OAAO,EAAMC,MAAO,CAAEC,OAAQ,SAAWtY,MAAOsL,EAAO0H,IAAI/J,UAC9N,oBAAC,EAAAoO,OAAD,CAAQR,GAAG,+BAA+BgB,OAAO,UAAU1Q,KAAK,qBAAqB4H,KAAK,YAEzF,MAEJ,2BAAK2H,UAAWE,EAAAA,QAAAA,eACf,2BAAKF,UAAWE,EAAAA,QAAAA,uBACdtL,EAAOsH,IAAIE,QACT,oBAAC,EAAAyF,aAAD,CAAcC,SAAS,mBAAmBC,KAAMnN,EAAOsH,IAAIE,QAAS4F,UAAU,EAAMvR,KAAK,0BACzF,KACFmE,EAAOyH,KAAKD,QACV,oBAAC,EAAAyF,aAAD,CAAcC,SAAS,cAAcC,KAAMnN,EAAOyH,KAAKD,QAAS4F,UAAU,EAAMvR,KAAM,qBAAuBmE,EAAOyH,KAAK1D,KAAKrM,OAAS,MACvI,KACFsI,EAAO0H,IAAIF,QACT,oBAAC,EAAAyF,aAAD,CAAcC,SAAU3M,EAAQ,OAAQ4M,KAAMnN,EAAO0H,IAAIF,QAAS4F,UAAU,EAAMvR,KAAK,uBACvF,KACFmE,EAAM,QAASwH,QACb,oBAAC,EAAAyF,aAAD,CAAcC,SAAU3M,EAAQ,OAAQ4M,KAAMnN,EAAM,QAASwH,QAAS+E,OAAO,UAAUa,UAAU,EAAMvR,KAAK,uBAC5G,QAKP6N,GAAa2D,UAAY,CACxB1D,OAAQ2D,EAAAA,KACR1D,QAAS2D,EAAAA,KACT3M,IAAK7D,EAAAA,QAGN,uHCvKA,SAASyQ,GAAT,GAA8B,IAAN5M,EAAM,EAANA,IACvB,u1BAA6DyJ,GAAQ,GAArE,GAAOoD,EAAP,YAA2BC,EAA3B,EAAuB/Y,GAAqBgZ,EAA5C,EAAuC/Y,IAEvC,OAAO,wCACN,oBAAC,EAAAmX,OAAD,CAAQX,UFPK,qBEOkCwC,KAAK,aAAa9E,SAAS,EAAMW,QAASiE,EAAY7R,KAAK,UAC1G,oBAAC,GAAD,CAAc8N,OAAQ8D,EAAc7D,QAAS+D,EAAa/M,IAAKA,KAGjE4M,GAAaH,UAAY,CACxBzM,IAAK7D,EAAAA,QAGN,kOCVA,IAAM8Q,GAAeC,IAAAA,MAAW,WAG/B,IAAMC,GAAUhE,EAAAA,EAAAA,SAAO,GACvB,w1BAA0B5V,EAAAA,EAAAA,UAAS,IAAnC,GAAO6Z,EAAP,KAAcC,EAAd,KAEMC,GAAqB3Z,EAAAA,EAAAA,cAAY,WAEtC0Z,GAAS,SAACzZ,GACT,IrBoByBiJ,EAAM0Q,EqBpBzBC,EChBDpR,MAAMlE,KAAK8R,SAASyD,iBAAT,kBAAqCzF,GAArC,QDiBhB,OrBmB+BuF,EqBnBEC,GrBmBR3Q,EqBnBHjJ,GrBoBXkD,OAASyW,EAAQzW,QAAW,GAAM+F,EAAK/F,SAAWyW,EAAQzW,SAAU+F,EAAK6Q,MAAK,SAACpH,EAAIrR,GAAL,OAAWqR,IAAOiH,EAAQtY,MqBjB3GrB,EAFA4Z,OAMP,IAyBH,OAvBAlD,EAAAA,EAAAA,YAAU,WACT6C,EAAQI,SAAU,EAGlB,IAAMI,EAAUC,aACf,YC3BH,WACC,IADqB,k6BACJxR,MAAMlE,KAAK8R,SAASyD,iBAAiB,wBACpDpL,QAAO,SAAAwL,GAAI,OAAMA,EAAKC,cAAcC,cAAnB,kBAA4C/F,GAA5C,WAFE,IAIrB,2BAA+B,KAArBtD,EAAqB,QAC1B/E,EAAQ+E,EAAOqJ,cAAc,QAAUrJ,EAAOqJ,cAAc,QAAQC,UAAYtJ,EAAOsJ,UACvFC,EAAUvO,GAAaC,GAEvBuO,EAAOlE,SAASmE,cAAc,OAClCD,EAAKE,UAAUC,IAAIrG,IACnBkG,EAAKI,aAAa,aAAc3O,GAC7BsO,GAAWC,EAAKI,aAAa,WAAYL,GAE5CvJ,EAAO6J,sBAAsB,WAAYL,IAbrB,+BD4BlBM,GAEGrB,EAAQI,SACVD,MAGF,KAGD,OAAO,WACNH,EAAQI,SAAU,EAClBkB,cAAcd,GACdvR,MAAMlE,KAAK8R,SAASyD,iBAAT,kBAAqCzF,GAArC,QACTrE,SAAQ,SAAA+K,GAAG,OAAIA,EAAIC,eAEpB,CAACrB,IAEGF,EACJA,EAAMnQ,KAAI,SAACyR,EAAK/T,GACjB,IAAMsT,EAAUS,EAAIE,aAAa,YACjC,OAAOX,GACJY,EAAAA,EAAAA,cAAa,kBAAC,GAAD,CAAcjG,IAAKjO,EAAOqF,IAAKiO,IAAaS,GACzD,QAEF,QAGJ,w9BEtDMI,GAAAA,SAAAA,qsBACL,WAAYC,GAAM,mHACjB,cAAMA,IACDvb,MAAQ,CACZwb,cAAc,EACdhK,UAAW,MAEZ,EAAK+H,YAAc,EAAKA,YAAYkC,KAAjB,OACnB,EAAKnC,WAAa,EAAKA,WAAWmC,KAAhB,OAPD,gDAUlB,WAAmB,IlBpBgBpG,EkBoBhB,OlBpBgBA,EkBqBK,SAAC/C,GACvC,EAAKgH,WAAWhH,EAAO,elBrBlBzS,OAAOwM,aAAaqP,GAAGC,iBAAiBC,WAAW,CACzDtM,MkBmBoB,kBlBlBpBuM,SAAU,SAACvJ,GAAD,OAAY+C,EAAQ/C,4BkBuB/B,WAEC,MAAoClR,KAAKpB,MAAjCwb,EAAR,EAAQA,aAAchK,EAAtB,EAAsBA,UAEtB,OACC,wCACC,oBAAC,GAAD,MACA,oBAAC,GAAD,CAAc+D,OAAQiG,EAAchG,QAASpU,KAAKmY,YAAa/M,IAAKgF,gCAKvE,WACCpQ,KAAKnB,UAAS,SAAC6b,GAAD,MAAY,CAAEN,cAAc,EAAOhK,UAAW,mCAG7D,SAAWhF,GACPA,GACFpL,KAAKnB,UAAS,SAAC6b,GAAD,MAAY,CAAEN,cAAc,EAAMhK,UAAWhF,kFAnCxD8O,CAAYS,EAAAA,WAuClBT,GAAIrC,UAAY,CACf+C,WAAWC,EAAAA,EAAAA,OAAM,CAChBC,QAASvT,EAAAA,UAIX,ozBCpCO,SAASwT,GAAT,GAAqC,IAb3C,EAa4BC,EAAe,EAAfA,aAEtBC,EAXC,CACNC,MAAO,IACNC,WAAW,QANb,QAcgBH,EAAaC,SAASG,UACW,IAdhDF,OAAQ,GADT,IAqBA,OAJArb,OAAOwb,QAAQJ,GAAUlM,SAAQ,YAAgB,g2BAAdiF,EAAc,KAATsH,EAAS,KAChDN,EAAaC,SAAShc,IAAI+U,EAAKsH,MAGzB,CACNL,SAAAA,GAgCK,SAASM,KACf,IAAMC,EAAepG,SAASqG,eAAetI,IAC7C,GAAGqI,EACF,KACCE,EAAAA,EAAAA,wBAAuBF,GACvBA,EAAazB,SACZ,MAAM5Z,GACP0Q,QAAQC,MAAM3Q,IChCjB,UACCwb,OAvBD,YAAiC,IACxBV,EAAaF,GAAW,CAAEC,aADF,EAAfA,eACTC,SAERxc,OAAO2O,UAAY,IAAIgF,GDsCjB,YAA4B,IAAX6I,EAAW,EAAXA,UAZxB,WAECM,KAEA,IAAMK,EAAgBxG,SAASmE,cAAc,OAC7CqC,EAAc7F,GAAK5C,GACnBiC,SAASqG,eAAe,OAAOI,YAAYD,GAO3CE,GAnBD,WAAyC,IAAjBC,EAAiB,wDACxC3G,SAAS4G,qBAAqB,QAAQ,GAAGtC,aAAa,yBAAsC,GAAZqC,GAAkBE,YAmBlGC,CAAejB,EAASC,MAAMC,WCtC9BgB,CAAM,CAAElB,SAAAA,KAERmB,EAAAA,EAAAA,QACC,oBAAC,GAAD,CAAKxB,UAAW,CACfE,QAAS7H,MAEVmC,SAASqG,eAAetI,MAazBkJ,SARD,WACCd,KACA9c,OAAO2O,UAAUwF,qBACVnU,OAAO2O,2BCvBf,IAAIkP,EAAuB,EAAQ,KAEnC,SAASC,KACT,SAASC,KACTA,EAAuBC,kBAAoBF,EAE3CG,EAAO9Y,QAAU,WACf,SAAS+Y,EAAKxC,EAAOyC,EAAUC,EAAeC,EAAUC,EAAcC,GACpE,GAAIA,IAAWV,EAAf,CAIA,IAAIW,EAAM,IAAI9a,MACZ,mLAKF,MADA8a,EAAI/b,KAAO,sBACL+b,GAGR,SAASC,IACP,OAAOP,EAFTA,EAAKQ,WAAaR,EAMlB,IAAIS,EAAiB,CACnBC,MAAOV,EACPW,OAAQX,EACR7E,KAAM6E,EACN5E,KAAM4E,EACNY,OAAQZ,EACRa,OAAQb,EACRpV,OAAQoV,EACRc,OAAQd,EAERe,IAAKf,EACLgB,QAAST,EACTU,QAASjB,EACTkB,YAAalB,EACbmB,WAAYZ,EACZa,KAAMpB,EACNqB,SAAUd,EACVe,MAAOf,EACPgB,UAAWhB,EACXrC,MAAOqC,EACPiB,MAAOjB,EAEPkB,eAAgB5B,EAChBC,kBAAmBF,GAKrB,OAFAa,EAAeiB,UAAYjB,EAEpBA,kBC9CPV,EAAO9Y,QAAU,EAAQ,IAAR,YCNnB8Y,EAAO9Y,QAFoB,iFCRvB0a,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAa7a,QAGrB,IAAI8Y,EAAS4B,EAAyBE,GAAY,CAGjD5a,QAAS,IAOV,OAHA+a,EAAoBH,GAAU9B,EAAQA,EAAO9Y,QAAS2a,GAG/C7B,EAAO9Y,QAIf2a,EAAoB5a,EAAIgb,EtCzBpBngB,EAAW,GACf+f,EAAoBK,EAAI,CAACC,EAAQC,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,EAAAA,EACnB,IAAS7e,EAAI,EAAGA,EAAI7B,EAAS0D,OAAQ7B,IAAK,CAGzC,IAFA,IAAKye,EAAUC,EAAIC,GAAYxgB,EAAS6B,GACpC8e,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAAS5c,OAAQkd,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAanf,OAAOuW,KAAKmI,EAAoBK,GAAGS,OAAOrL,GAASuK,EAAoBK,EAAE5K,GAAK8K,EAASM,MAC9IN,EAASQ,OAAOF,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACb3gB,EAAS8gB,OAAOjf,IAAK,GACrB,IAAI0B,EAAIgd,SACEL,IAAN3c,IAAiB8c,EAAS9c,IAGhC,OAAO8c,EAvBNG,EAAWA,GAAY,EACvB,IAAI,IAAI3e,EAAI7B,EAAS0D,OAAQ7B,EAAI,GAAK7B,EAAS6B,EAAI,GAAG,GAAK2e,EAAU3e,IAAK7B,EAAS6B,GAAK7B,EAAS6B,EAAI,GACrG7B,EAAS6B,GAAK,CAACye,EAAUC,EAAIC,IuCJ/BT,EAAoBne,EAAKsc,IACxB,IAAI6C,EAAS7C,GAAUA,EAAO8C,WAC7B,IAAO9C,EAAiB,QACxB,IAAM,EAEP,OADA6B,EAAoB1a,EAAE0b,EAAQ,CAAE9d,EAAG8d,IAC5BA,GCLRhB,EAAoB1a,EAAI,CAACD,EAAS6b,KACjC,IAAI,IAAIzL,KAAOyL,EACXlB,EAAoBje,EAAEmf,EAAYzL,KAASuK,EAAoBje,EAAEsD,EAASoQ,IAC5EnU,OAAOC,eAAe8D,EAASoQ,EAAK,CAAE0L,YAAY,EAAMne,IAAKke,EAAWzL,MCJ3EuK,EAAoBje,EAAI,CAACqf,EAAKC,IAAU/f,OAAOD,UAAUigB,eAAeC,KAAKH,EAAKC,SCKlF,IAAIG,EAAkB,CACrB,IAAK,EACL,IAAK,GAaNxB,EAAoBK,EAAEQ,EAAKY,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4BC,KACvD,IAGI3B,EAAUwB,GAHTlB,EAAUsB,EAAaC,GAAWF,EAGhB9f,EAAI,EAC3B,GAAGye,EAAShG,MAAM/C,GAAgC,IAAxBgK,EAAgBhK,KAAa,CACtD,IAAIyI,KAAY4B,EACZ7B,EAAoBje,EAAE8f,EAAa5B,KACrCD,EAAoB5a,EAAE6a,GAAY4B,EAAY5B,IAGhD,GAAG6B,EAAS,IAAIxB,EAASwB,EAAQ9B,GAGlC,IADG2B,GAA4BA,EAA2BC,GACrD9f,EAAIye,EAAS5c,OAAQ7B,IACzB2f,EAAUlB,EAASze,GAChBke,EAAoBje,EAAEyf,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOzB,EAAoBK,EAAEC,IAG1ByB,EAAqBC,KAAyC,mCAAIA,KAAyC,oCAAK,GACpHD,EAAmBvR,QAAQkR,EAAqB5F,KAAK,KAAM,IAC3DiG,EAAmBnb,KAAO8a,EAAqB5F,KAAK,KAAMiG,EAAmBnb,KAAKkV,KAAKiG,QC9CvF,IAAIE,EAAsBjC,EAAoBK,OAAEF,EAAW,CAAC,MAAM,IAAOH,EAAoB,UAC7FiC,EAAsBjC,EAAoBK,EAAE4B","sources":["webpack://@alixlahuec/latex-roam/webpack/runtime/chunk loaded","webpack://@alixlahuec/latex-roam/external window \"ReactDOM\"","webpack://@alixlahuec/latex-roam/external window \"React\"","webpack://@alixlahuec/latex-roam/external window [\"Blueprint\",\"Core\"]","webpack://@alixlahuec/latex-roam/external window [\"Blueprint\",\"Select\"]","webpack://@alixlahuec/latex-roam/./src/hooks/useBool.js","webpack://@alixlahuec/latex-roam/./src/hooks/useSelect.js","webpack://@alixlahuec/latex-roam/./src/hooks/useText.js","webpack://@alixlahuec/latex-roam/./node_modules/client-zip/index.js","webpack://@alixlahuec/latex-roam/./src/utils.js","webpack://@alixlahuec/latex-roam/./src/translator/regex.js","webpack://@alixlahuec/latex-roam/./src/translator/table.js","webpack://@alixlahuec/latex-roam/./src/translator/markup.js","webpack://@alixlahuec/latex-roam/./src/translator/code.js","webpack://@alixlahuec/latex-roam/./src/roam.js","webpack://@alixlahuec/latex-roam/./src/translator/doublePar.js","webpack://@alixlahuec/latex-roam/./src/translator/blockEmbed.js","webpack://@alixlahuec/latex-roam/./src/translator/pageEmbed.js","webpack://@alixlahuec/latex-roam/./src/translator/expand.js","webpack://@alixlahuec/latex-roam/./src/translator/doubleBraces.js","webpack://@alixlahuec/latex-roam/./src/translator/figure.js","webpack://@alixlahuec/latex-roam/./src/translator/mathMode.js","webpack://@alixlahuec/latex-roam/./src/translator/specialReferences.js","webpack://@alixlahuec/latex-roam/./src/translator/citekeys.js","webpack://@alixlahuec/latex-roam/./src/translator/common.js","webpack://@alixlahuec/latex-roam/./src/translator/createTEX.js","webpack://@alixlahuec/latex-roam/./src/extension.js","webpack://@alixlahuec/latex-roam/./src/constants.js","webpack://@alixlahuec/latex-roam/./src/components/ExportDialog/index.jsx","webpack://@alixlahuec/latex-roam/./src/components/ExportButton/index.jsx","webpack://@alixlahuec/latex-roam/./src/components/GraphWatcher/index.jsx","webpack://@alixlahuec/latex-roam/./src/components/GraphWatcher/utils.js","webpack://@alixlahuec/latex-roam/./src/components/App.jsx","webpack://@alixlahuec/latex-roam/./src/setup.js","webpack://@alixlahuec/latex-roam/./src/index.js","webpack://@alixlahuec/latex-roam/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://@alixlahuec/latex-roam/./node_modules/prop-types/index.js","webpack://@alixlahuec/latex-roam/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://@alixlahuec/latex-roam/webpack/bootstrap","webpack://@alixlahuec/latex-roam/webpack/runtime/compat get default export","webpack://@alixlahuec/latex-roam/webpack/runtime/define property getters","webpack://@alixlahuec/latex-roam/webpack/runtime/hasOwnProperty shorthand","webpack://@alixlahuec/latex-roam/webpack/runtime/jsonp chunk loading","webpack://@alixlahuec/latex-roam/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactDOM\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"Blueprint\"][\"Core\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"Blueprint\"][\"Select\"];","import { useCallback, useState } from \"react\";\r\n\r\n/** Custom hook for handling component state that takes a boolean\r\n * @param {*} initialState \r\n * @returns \r\n */\r\nconst useBool = (initialState = false) => {\r\n\tconst [state, setState] = useState(initialState);\r\n\t\r\n\tconst toggle = useCallback(() => {\r\n\t\tsetState(prevState => !prevState);\r\n\t}, []);\r\n    \r\n\tconst set = useCallback((value) => {\r\n\t\tsetState(value);\r\n\t}, []);\r\n\r\n\tconst on = useCallback(() => setState(true), []);\r\n\r\n\tconst off = useCallback(() => setState(false), []);\r\n\r\n\treturn [state, { set, toggle, on, off }];\r\n};\r\n\r\nexport default useBool;","import { useCallback, useState } from \"react\";\r\n\r\nconst defaultTransform = (value) => value;\r\n\r\n/** Custom hook for working with component state that works with a target select\r\n * @param {{start: any, transform: function}} config \r\n * @returns {[any, function]}\r\n */\r\nconst useSelect = ({ start = null, transform = defaultTransform }) => {\r\n\tconst [state, setState] = useState(start);\r\n\r\n\tconst set = useCallback((event) => {\r\n\t\tsetState(transform(event.currentTarget.value));\r\n\t}, [transform]);\r\n\r\n\treturn [state, set];\r\n};\r\n\r\nexport default useSelect;","import { useCallback, useState } from \"react\";\r\n\r\n/** Custom hook to work with component state that is based on a text input\r\n * @param {string} initialState - The initial value for the text input\r\n * @returns {[string, function]}\r\n */\r\nconst useText = (initialState = \"\") => {\r\n\tconst [state, setState] = useState(initialState);\r\n\r\n\tconst set = useCallback((event) => {\r\n\t\tsetState(event.target.value);\r\n\t}, []);\r\n\r\n\treturn [state, set];\r\n};\r\n\r\nexport default useText;","\"stream\"in Blob.prototype||Object.defineProperty(Blob.prototype,\"stream\",{value(){return new Response(this).body}}),\"setBigUint64\"in DataView.prototype||Object.defineProperty(DataView.prototype,\"setBigUint64\",{value(e,n,i){const o=Number(0xffffffffn&n),f=Number(n>>32n);this.setUint32(e+(i?0:4),o,i),this.setUint32(e+(i?4:0),f,i)}});var e=e=>new DataView(new ArrayBuffer(e)),n=e=>new Uint8Array(e.buffer||e),i=e=>Math.min(4294967295,Number(e)),o=e=>Math.min(65535,Number(e));function f(e,i,o){if(void 0===i||i instanceof Uint8Array||(i=s(i)),void 0===o||o instanceof Date||(o=new Date(o)),e instanceof File)return{i:i||s(e.name),o:o||new Date(e.lastModified),A:e.stream()};if(e instanceof Response){const n=e.headers.get(\"content-disposition\"),f=n&&n.match(/;\\s*filename\\*?=[\"']?(.*?)[\"']?$/i),a=f&&f[1]||new URL(e.url).pathname.split(\"/\").pop(),r=a&&decodeURIComponent(a);return{i:i||s(r),o:o||new Date(e.headers.get(\"Last-Modified\")||Date.now()),A:e.body}}if(!i||0===i.length)throw new Error(\"The file must have a name.\");if(void 0===o)o=new Date;else if(isNaN(o))throw new Error(\"Invalid modification date.\");if(\"string\"==typeof e)return{i,o,A:s(e)};if(e instanceof Blob)return{i,o,A:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{i,o,A:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{i,o,A:n(e)};if(Symbol.asyncIterator in e)return{i,o,A:a(e)};throw new TypeError(\"Unsupported input format.\")}function a(e){const n=\"next\"in e?e:e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){let i=0;for(;e.desiredSize>i;){const o=await n.next();if(!o.value){e.close();break}{const n=r(o.value);e.enqueue(n),i+=n.byteLength}}}})}function r(e){return\"string\"==typeof e?s(e):e instanceof Uint8Array?e:n(e)}function s(e){return(new TextEncoder).encode(String(e))}var A=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob(\"AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBw0DAW0CAAF0AAABYwABCpUBAkkBA38DQCABIQBBACECA0AgAEEBdiAAQQFxQaCG4u1+bHMhACACQQFqIgJBCEcNAAsgAUECdCAANgIAIAFBAWoiAUGAAkcNAAsLSQEBfyABQX9zIQFBgIAEIQJBgIAEIABqIQADQCABQf8BcSACLQAAc0ECdCgCACABQQh2cyEBIAJBAWoiAiAASQ0ACyABQX9zuAs\"),(e=>e.charCodeAt(0))))),{t,c,m}=A.exports;t();var d=n(m).subarray(65536);function u(e,n=0){for(const i of function*(e){for(;e.length>65536;)yield e.subarray(0,65536),e=e.subarray(65536);e.length&&(yield e)}(e))d.set(i),n=c(i.length,n);return n}function y(e,n,i=0){const o=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,f=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;n.setUint16(i,o,1),n.setUint16(i+2,f,1)}function l(i){const o=e(30);return o.setUint32(0,1347093252),o.setUint32(4,754976768),y(i.o,o,10),o.setUint16(26,i.i.length,1),n(o)}async function*B(e){let{A:n}=e;if(\"then\"in n&&(n=await n),n instanceof Uint8Array)yield n,e.u=u(n,0),e.l=BigInt(n.length);else{e.l=0n;const i=n.getReader();for(;;){const{value:n,done:o}=await i.read();if(o)break;e.u=u(n,e.u),e.l+=BigInt(n.length),yield n}}}function w(o,f){const a=e(16+(f?8:0));return a.setUint32(0,1347094280),a.setUint32(4,o.u,1),f?(a.setBigUint64(8,o.l,1),a.setBigUint64(16,o.l,1)):(a.setUint32(8,i(o.l),1),a.setUint32(12,i(o.l),1)),n(a)}function b(o,f,a=0){const r=e(46);return r.setUint32(0,1347092738),r.setUint32(4,755182848),r.setUint16(8,2048),y(o.o,r,12),r.setUint32(16,o.u,1),r.setUint32(20,i(o.l),1),r.setUint32(24,i(o.l),1),r.setUint16(28,o.i.length,1),r.setUint16(30,a,1),r.setUint16(40,33204,1),r.setUint32(42,i(f),1),n(r)}function C(i,o,f){const a=e(f);return a.setUint16(0,1,1),a.setUint16(2,f-4,1),16&f&&(a.setBigUint64(4,i.l,1),a.setBigUint64(12,i.l,1)),a.setBigUint64(f-8,o,1),n(a)}export var downloadZip=r=>new Response(a(async function*(f){const a=[];let r=0n,s=0n,A=0;for await(const e of f){yield l(e),yield e.i,yield*B(e);const n=e.l>=0xffffffffn,i=12*(r>=0xffffffffn)|28*n;yield w(e,n),a.push(b(e,r,i)),a.push(e.i),i&&a.push(C(e,r,i)),n&&(r+=8n),s++,r+=BigInt(46+e.i.length)+e.l,A||(A=n)}let d=0n;for(const e of a)yield e,d+=BigInt(e.length);if(A||r>=0xffffffffn){const i=e(76);i.setUint32(0,1347094022),i.setBigUint64(4,BigInt(44),1),i.setUint32(12,755182848),i.setBigUint64(24,s,1),i.setBigUint64(32,s,1),i.setBigUint64(40,d,1),i.setBigUint64(48,r,1),i.setUint32(56,1347094023),i.setBigUint64(64,r+d,1),i.setUint32(72,1,1),yield n(i)}const u=e(22);u.setUint32(0,1347093766),u.setUint16(8,o(s),1),u.setUint16(10,o(s),1),u.setUint32(12,i(d),1),u.setUint32(16,i(r),1),yield n(u)}(async function*(e){for await(const n of e)n instanceof File||n instanceof Response?yield f(n):yield f(n.input,n.name,n.lastModified)}(r))),{headers:{\"Content-Type\":\"application/zip\",\"Content-Disposition\":\"attachment\"}});","/* eslint-disable no-useless-escape */\r\n\r\n// From Jason Yu: https://dev.to/ycmjason/stringprototypereplace-asynchronously-28k9\r\nasync function asyncReplaceAll(str, regex, asyncReplaceFn){\r\n\tconst substrs = [];\r\n\tlet match;\r\n\tlet i = 0;\r\n\r\n\t// The regex needs to be cloned, because global regexes are stateful\r\n\t// (.lastIndex will be kept in memory, which can cause an infinite loop\r\n\t// if we match against the same regex at a different step in the stack)\r\n\tconst regexClone = new RegExp(regex, regex.flags);\r\n\r\n\twhile ((match = regexClone.exec(str)) !== null) {\r\n\t\t// Push the non-matching string\r\n\t\tsubstrs.push(str.slice(i, match.index));\r\n\t\t// Call the async replacer function with the match information\r\n\t\t// The asyncFn receives (match, p1, p2, p3, ...)\r\n\t\tsubstrs.push(asyncReplaceFn(...match, match.index));\r\n\t\ti = regexClone.lastIndex;\r\n\t}\r\n\t// Push the rest of the string\r\n\tsubstrs.push(str.slice(i));\r\n\t// Wait for the asyncFn calls to finish, and join all the pieces back into one string\r\n\treturn (await Promise.all(substrs)).join(\"\");\r\n}\r\n\r\nfunction cleanUpHref({ text, url }){\r\n\tlet target = url;\r\n\ttarget = target.replaceAll(/\\\\\\&/g, \"&\");\r\n\ttarget = target.replaceAll(/\\\\\\%/g, \"%\");\r\n\r\n\treturn `\\\\href{${target}}{${text}}`;\r\n}\r\n\r\n/** Checks if the contents of a NodeList have changed\r\n * From mauroc8 on SO: https://stackoverflow.com/questions/51958759/how-can-i-test-the-equality-of-two-nodelists\r\n * @param {NodeList} prev - The previous contents of the NodeList\r\n * @param {NodeList} current - The current contents of the NodeList\r\n * @returns {Boolean} `true` if the NodeList has changed ; `false` otherwise\r\n */\r\nfunction hasNodeListChanged(prev, current){\r\n\treturn (prev.length + current.length) != 0 && (prev.length !== current.length || prev.some((el, i) => el !== current[i]));\r\n}\r\n\r\nasync function makeBibliography(citekeys){\r\n\tif(!window.zoteroRoam){\r\n\t\tthrow new Error(\"No instance of zoteroRoam was found\");\r\n\t} else {\r\n\t\tconst instance = window.zoteroRoam;\r\n\t\tif(!instance.getBibEntries){\r\n\t\t\tthrow new Error(\"The zoteroRoam instance does not expose bibliographic entries.\");\r\n\t\t} else {\r\n\t\t\treturn await instance.getBibEntries(citekeys);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction sortRoamBlocks(arr){\r\n\treturn [...arr].sort((a,b) => a.order < b.order ? -1 : 1);\r\n}\r\n\r\nfunction todayDMY(){\r\n\tconst today = new Date();\r\n\tconst dd = String(today.getDate()).padStart(2, \"0\");\r\n\tconst mm = String(today.getMonth() + 1).padStart(2, \"0\");\r\n\tconst yyyy = today.getFullYear();\r\n\r\n\treturn `${dd}/${mm}/${yyyy}`;\r\n}\r\n\r\nexport {\r\n\tasyncReplaceAll,\r\n\tcleanUpHref,\r\n\thasNodeListChanged,\r\n\tmakeBibliography,\r\n\tsortRoamBlocks,\r\n\ttodayDMY\r\n};","\r\n\r\n/** @constant {Object} The dictionary of RegExps */\r\nconst REGEX = {\r\n\t// Aliases\r\n\taliasAll: /(?:^|[^!])\\[(.+?)\\]\\((.+?)\\)/g,\r\n\taliasBlock: /(?!^| )\\[(.+?)\\]\\({3}(.+?)\\){3}/g,\r\n\taliasPage: /\\[([^\\]]+?)\\]\\(\\[\\[(.+?)\\]\\]\\)/g,\r\n\r\n\t// Embeds\r\n\tembedBlock: /\\{{2}(\\[{2})?embed(\\]{2})?: ?\\({2}(.+?)\\){2}\\}{2}/g,\r\n\tembedPage: /\\{{2}(\\[{2})?embed(\\]{2})?: ?\\[{2}(.+?)\\]{2}\\}{2}/g,\r\n\r\n\t// Groupings and pages\r\n\tdoublePar: /\\({2}([^()]+?)\\){2}/g,\r\n\tdoubleBraces: /( ?)\\{{2}(.+?)\\}{2}( ?)/g,\r\n\t// Note: this will target all instances of `[[` and `]]`, even if they're not page references.\r\n\tdoubleBrackets: /(\\[|\\]){2}/g,\r\n\ttag: /(?!^| )#(.+?)( |$)/g,\r\n\t\r\n\t// Citations\r\n\trefCitekey: /\\[{2}@(.+?)\\]{2}/g,\r\n\tcitekeyList: /\\((.*?)(\\[{2}@.+?\\]{2})((?: ?[,;] ?\\[{2}@.+?\\]{2}){1,})(.*?)\\)/g,\r\n\tcitekeyPar: /\\(([^)]*?)\\[{2}@([^)]+?)\\]{2}([^)]*?)\\)/g,\r\n\tcitekey: /(^|[^#])\\[{2}@([^\\]]+?)\\]{2}/g,\r\n\t\r\n\t// Code\r\n\tcodeBlock: /```([\\s\\S]+?)```/g,\r\n\tcodeInline: /(?:^|[^`])`([^`]+?)`/g,\r\n\t\r\n\t// Markup\r\n\tbold: /\\*{2}([^*]+?)\\*{2}/g,\r\n\titalics: /_{2}([^_]+?)_{2}/g,\r\n\thighlight: /\\^{2}([^^]+?)\\^{2}/g,\r\n\r\n\t// Miscellaneous\r\n\timage: /!\\[(.*?)\\]\\((.+?)\\)(.*)/g,\r\n\tmath: /\\$\\$([\\s\\S^$]+?)\\$\\$([\\s\\S]+)?/g,\r\n\tpopover: /=:([^|]+)\\|(.+)/g,\r\n\ttable: /\\{{2}(?:\\[{2})?table(?:\\]{2})?\\}{2}(.*)/g,\r\n\t\r\n\t// Special references\r\n\tspecialRef: /\\{{2}(fig|eq|table):(.+?)\\}{2}/g\r\n};\r\n\r\nexport default REGEX;","import REGEX from \"./regex\";\r\n\r\nimport { formatText } from \"./common\";\r\nimport { sortRoamBlocks } from \"../utils\";\r\n\r\n\r\nfunction isTableBlock(string){\r\n\tconst match = Array.from(string.matchAll(REGEX.table));\r\n\tif(match.length > 0){\r\n\t\tconst [/*_match*/, extra/*, _index, _input*/] = match[0];\r\n\t\treturn extra;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nasync function traverseTable(block){\r\n\treturn await (sortRoamBlocks(block.children).reduce(async(rows, child) => {\r\n\t\tconst prev = await rows;\r\n\t\tconst content = await traverseRow(child);\r\n\t\treturn [...prev, ...content];\r\n\t}, []));\r\n}\r\n\r\nasync function traverseRow(block){\r\n\tif(!block.children){\r\n\t\treturn [[await storeCell(block)]];\r\n\t} else {\r\n\t\treturn (await Promise.all(sortRoamBlocks(block.children)\r\n\t\t\t.map(async(child) => {\r\n\t\t\t\tconst content = await traverseRow(child);\r\n\t\t\t\treturn await Promise.all(content.map(async(path) => [await storeCell(block), ...path]));\r\n\t\t\t})))\r\n\t\t\t.flat(1);\r\n\t}\r\n}\r\n\r\nasync function storeCell(block){\r\n\treturn {\r\n\t\ttext: await formatText(block.string),\r\n\t\talign: (block[\"text-align\"] || \"left\").charAt(0)\r\n\t};\r\n}\r\n\r\nasync function makeTable(block, start_indent = 0, extra = \"\"){\r\n\tconst table_indent = \"\\t\".repeat(start_indent);\r\n\r\n\tconst afterTextMatch = Array.from(block.string.matchAll(/\\{\\{(?:\\[\\[)?table(?:\\]\\])?\\}\\}(.+)/g))[0] || false;\r\n\t// Below is the same structure as with figures rendering\r\n\tconst labelRegex = /(`.+?`)/g;\r\n\tconst labelMatch = Array.from(extra.matchAll(labelRegex))[0] || false;\r\n\tconst labelEl = labelMatch ? `${table_indent}\\\\label{table:${labelMatch[0].slice(1,-1)}}\\n` : \"\";\r\n\r\n\tconst desc = extra.replace(labelRegex, \"\").trim();\r\n\tconst descEl = (desc.length > 0) ? `${table_indent}\\\\caption{${await formatText(afterTextMatch[1].trim())}}\\n` : \"\";\r\n\r\n\tconst rows = await traverseTable(block);\r\n\r\n\t// Count the actual number of columns\r\n\tconst n_cols = rows.reduce((f, s) => f.length >= s.length ? f.length : s.length);\r\n\t// Extract alignment sequence from header row\r\n\tlet align_seq = rows[0].map(col => col.align);\r\n\tif(align_seq.length < n_cols){\r\n\t\tconst fills = Array.from({ length: n_cols - align_seq.length }, () => \"l\");\r\n\t\talign_seq.push(...fills);\r\n\t}\r\n\talign_seq = align_seq.join(\" \");\r\n\t// Get contents of rows\r\n\tconst row_indent = \"\\t\".repeat(start_indent+1);\r\n\tconst textRows = rows.map(row => `${row_indent}` + row.map(cell => cell.text).join(\" & \") + \" \\\\\\\\\").join(\"\\n\");\r\n\r\n\treturn `${table_indent}\\\\begin{table}[h!]\\n${table_indent}\\\\centering\\n${table_indent}\\\\begin{tabular}{${align_seq}}\\n${row_indent}\\\\hline\\n${textRows}\\n${row_indent}\\\\hline\\n${table_indent}\\\\end{tabular}\\n${descEl}${labelEl}${table_indent}\\\\end{table}`;\r\n}\r\n\r\nexport {\r\n\tisTableBlock,\r\n\tmakeTable,\r\n\ttraverseTable\r\n};","import REGEX from \"./regex\";\r\n\r\nfunction parseAlias(_match, p1, p2){\r\n\treturn ` \\\\href{${p2}}{${p1}}`;\r\n}\r\n\r\nfunction parseAliasPage(_match, p1){\r\n\treturn p1;\r\n}\r\n\r\nfunction parseBold(_match, p1){\r\n\treturn `\\\\textbf{${p1}}`;\r\n}\r\n\r\nfunction parseHighlight(_match, p1){\r\n\treturn `\\\\hl{${p1}}`;\r\n}\r\n\r\nfunction parseItalics(_match, p1){\r\n\treturn `\\\\textit{${p1}}`;\r\n}\r\n\r\nfunction replaceTextFormatting(string){\r\n\tlet output = string;\r\n\t// Bold markup\r\n\toutput = output.replaceAll(REGEX.bold, parseBold);\r\n\t// Italic markup\r\n\toutput = output.replaceAll(REGEX.italics, parseItalics);\r\n\t// Highlight markup\r\n\toutput = output.replaceAll(REGEX.highlight, parseHighlight);\r\n\r\n\treturn output;\r\n}\r\n\r\nexport {\r\n\tparseAlias,\r\n\tparseAliasPage,\r\n\tparseBold,\r\n\tparseHighlight,\r\n\tparseItalics,\r\n\treplaceTextFormatting\r\n};","function codeBlock(capture){\r\n\treturn `\\\\begin{verbatim}\\n${capture}\\n\\\\end{verbatim}`;\r\n}\r\n\r\nfunction codeInline(capture){\r\n\treturn `\\\\verb|${capture}|`;\r\n}\r\n\r\nfunction parseCodeBlock(_match, capture){\r\n\treturn codeBlock(capture);\r\n}\r\n\r\nfunction parseCodeInline(_match, capture){\r\n\treturn ` ${codeInline(capture)}`;\r\n}\r\n\r\nexport {\r\n\tcodeBlock,\r\n\tcodeInline,\r\n\tparseCodeBlock,\r\n\tparseCodeInline\r\n};","/* istanbul ignore file */\r\nfunction addBlockMenuCommand(label, onClick){\r\n\treturn window.roamAlphaAPI.ui.blockContextMenu.addCommand({\r\n\t\tlabel,\r\n\t\tcallback: (entity) => onClick(entity)\r\n\t});\r\n}\r\n\r\n/** Searches a Roam page by its title\r\n * @param {String} title - The title to be searched\r\n * @returns {String|false} The UID of the Roam page (if it exists), otherwise `false`\r\n */\r\nfunction findRoamPage(title){\r\n\tconst pageSearch = window.roamAlphaAPI.q(`[\r\n\t\t:find ?uid \r\n\t\t:in $ ?title \r\n\t\t:where\r\n\t\t\t[?p :node/title ?title]\r\n\t\t\t[?p :block/uid ?uid]\r\n\t\t]`, title);\r\n\tif(pageSearch.length > 0){\r\n\t\treturn pageSearch[0][0];\r\n\t} else{\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction getBlockText(uid){\r\n\treturn window.roamAlphaAPI.q(`[\r\n        :find ?str \r\n        :in $ ?uid \r\n        :where\r\n            [?b :block/uid ?uid]\r\n            [?b :block/string ?str]\r\n    ]`, uid);\r\n}\r\n\r\nfunction queryBlockContents(uid){\r\n\treturn window.roamAlphaAPI.q(`[\r\n\t\t:find \r\n\t\t\t[(pull ?b \r\n\t\t\t\t[ :block/string :block/children :block/order :block/heading :children/view-type :block/text-align {:block/children ...} ]) \r\n\t\t\t...] \r\n\t\t:in $ ?uid \r\n\t\t:where\r\n\t\t\t[?b :block/uid ?uid]\r\n\t]`, uid)[0];\r\n}\r\n\r\nfunction queryPageContentsByTitle(title){\r\n\treturn window.roamAlphaAPI.q(`[\r\n\t\t:find [\r\n\t\t\t(pull ?e [ :node/title :block/string :block/children :block/order :block/heading :children/view-type :block/text-align {:block/children ...} ]) \r\n\t\t\t...] \r\n\t\t:in $ ?ptitle \r\n\t\t:where \r\n\t\t\t[?e :node/title ?ptitle] \r\n\t]`, title)[0];\r\n}\r\n\r\nexport {\r\n\taddBlockMenuCommand,\r\n\tfindRoamPage,\r\n\tgetBlockText,\r\n\tqueryBlockContents,\r\n\tqueryPageContentsByTitle\r\n};","import { getBlockText } from \"Roam\";\r\nimport { grabRawText } from \"./common\";\r\n\r\n\r\nasync function doublePar(content, mode){\r\n\t// Check if content is a valid block reference\r\n\tconst isBlockRef = getBlockText(content);\r\n\t// If it's a block ref, render its contents\r\n\tif(isBlockRef.length > 0){\r\n\t\tswitch(mode){\r\n\t\tcase \"latex\":\r\n\t\t\treturn isBlockRef[0][0];\r\n\t\tcase \"raw\":\r\n\t\tdefault: \r\n\t\t\treturn await grabRawText({ string: isBlockRef[0][0] });\r\n\t\t}\r\n\t} else{\r\n\t\tswitch(mode){\r\n\t\tcase \"latex\":\r\n\t\t\t// In Roam, it's invalid to insert any aliases in a `(())` so no need to handle that case here\r\n\t\t\t// If the `(())` just contains text, render it as footnote\r\n\t\t\treturn `\\\\footnote{${content}}`;\r\n\t\tcase \"raw\":\r\n\t\tdefault:\r\n\t\t\treturn content;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function parseBlockAlias(_match, p1, p2){\r\n\treturn `${p1} \\\\footnote{${await doublePar(p2, \"raw\")}}`;\r\n}\r\n\r\nasync function parseDoublePars(_match, p1){\r\n\treturn await doublePar(p1, \"latex\");\r\n}\r\n\r\nexport {\r\n\tdoublePar,\r\n\tparseBlockAlias,\r\n\tparseDoublePars\r\n};\r\n","import { grabRawText, raw } from \"./common\";\r\nimport { queryBlockContents } from \"Roam\";\r\n\r\n// RAW only\r\nasync function blockEmbed(uid, mode){\r\n\tconst blockContents = queryBlockContents(uid);\r\n\tswitch(mode){\r\n\tcase \"latex\":\r\n\t\t// TODO: handle processing of actual block structure\r\n\t\t// For now, just rendering everything as one raw block to test basic parsing\r\n\t\treturn await raw(blockContents, 0);\r\n\tcase \"raw\":\r\n\tdefault:\r\n\t\treturn await grabRawText(blockContents);\r\n\t}\r\n}\r\n\r\nasync function parseBlockEmbed(_match, _p1, _p2, p3){\r\n\treturn await blockEmbed(p3, \"latex\");\r\n}\r\nexport {\r\n\tblockEmbed,\r\n\tparseBlockEmbed\r\n};","import { grabRawText, raw } from \"./common\";\r\nimport { queryPageContentsByTitle } from \"Roam\";\r\n\r\n\r\nasync function pageEmbed(title, mode){\r\n\tconst pageContents = queryPageContentsByTitle(title);\r\n\tswitch(mode){\r\n\tcase \"latex\":{\r\n\t\t// TODO: handle actual processing of actual page structure\r\n\t\t// For now, just rendering everything as one raw block to test basic parsing\r\n\t\tconst elems = pageContents.children || [];\r\n\t\tlet elemContents = \"\";\r\n\t\tif(elems.length > 0){\r\n\t\t\telemContents = await Promise.all(elems.map(async(child) => await raw(child, 0)));\r\n\t\t\telemContents = `\\\\${elemContents.join(\"\\n\")}`;\r\n\t\t}\r\n\t\treturn `${pageContents.title}${elemContents}`;\r\n\t}\r\n\tcase \"raw\":\r\n\tdefault:\r\n\t\treturn await grabRawText(pageContents);\r\n\t}\r\n}\r\n\r\nasync function parsePageEmbed(_match, _p1, _p2, p3){\r\n\treturn await pageEmbed(p3, \"latex\");\r\n}\r\n\r\nexport {\r\n\tpageEmbed,\r\n\tparsePageEmbed\r\n};\r\n","import REGEX from \"./regex\";\r\nimport { asyncReplaceAll } from \"../utils\";\r\n\r\nimport { parseBlockAlias, parseDoublePars } from \"./doublePar\";\r\nimport { parseBlockEmbed } from \"./blockEmbed\";\r\nimport { parsePageEmbed } from \"./pageEmbed\";\r\n\r\n\r\nasync function expandInserts(string){\r\n\tlet output = string;\r\n\r\n\t// Block aliases\r\n\toutput = await asyncReplaceAll(output, REGEX.aliasBlock, parseBlockAlias);\r\n\t// Embeds : blocks\r\n\toutput = await asyncReplaceAll(output, REGEX.embedBlock, parseBlockEmbed);\r\n\t// Embeds : pages\r\n\toutput = await asyncReplaceAll(output, REGEX.embedPage, parsePageEmbed);\r\n\t// `(())` markup\r\n\toutput = await asyncReplaceAll(output, REGEX.doublePar, parseDoublePars);\r\n\r\n\treturn output;\r\n}\r\n\r\nexport default expandInserts;","import REGEX from \"./regex\";\r\nimport { formatText } from \"./common\";\r\n\r\nimport { asyncReplaceAll } from \"../utils\";\r\n\r\n\r\n// TODO: process the popover's contents\r\nasync function parsePopover(_match, text, content){\r\n\treturn `${text.trim()} \\\\footnote{${await formatText(content.trim())}}`;\r\n}\r\n\r\nasync function replacePopover(capture){\r\n\treturn await asyncReplaceAll(capture, REGEX.popover, parsePopover);\r\n}\r\n\r\nasync function parseDoubleBraces(match, pre, capture, _post){\r\n\treturn (capture.includes(\"iframe\") || capture.includes(\"word-count\")) \r\n\t\t? \"\"\r\n\t\t: capture.includes(\"=:\")\r\n\t\t\t? (pre + await replacePopover(capture))\r\n\t\t\t: match;\r\n}\r\n\r\nexport default parseDoubleBraces;","import { formatText } from \"./common\";\r\n\r\nasync function figure(caption, url, extra){\r\n\tconst cleanURL = url.replaceAll(\"%2F\", \"/\");\r\n\tconst fileInfo = Array.from(cleanURL.matchAll(/[^/]+?\\.(png|jpg|jpeg)/g));\r\n\t// let fileName = fileInfo[0][0];\r\n\tconst fileExt = fileInfo[0][1];\r\n\r\n\tconst figIndex = await window.latexRoam.addFigure(url, fileExt);\r\n\r\n\t// Parse extra information : label, description\r\n\t// Note : the first bit of inline code will be used as the figure label, if there are others they will be ignored\r\n\tconst labelRegex = /(`.+?`)/g;\r\n\tconst labelMatch = Array.from(extra.matchAll(labelRegex))[0] || false;\r\n\tconst labelEl = labelMatch ? `\\\\label{fig:${labelMatch[0].slice(1,-1)}}` : \"\";\r\n\r\n\tconst desc = extra.replace(labelRegex, \"\").trim();\r\n\tconst descEl = (desc.length > 0) ? `\\\\medskip\\n${await formatText(desc)}` : \"\";\r\n\r\n\tlet extraContent = [labelEl, descEl].filter(Boolean).join(\"\\n\");\r\n\tif(extraContent){ extraContent += \"\\n\"; }\r\n\r\n\treturn `\\\\begin{figure}[p]\\n\\\\includegraphics[width=\\\\textwidth]{figure-${figIndex}.${fileExt}}\\n\\\\caption{${await formatText(caption.trim())}}\\n${extraContent}\\\\end{figure}`;\r\n}\r\n\r\nasync function parseImage(_match, p1, p2, p3) {\r\n\treturn await figure(p1, p2, p3);\r\n}\r\n\r\nexport {\r\n\tparseImage\r\n};","/* eslint-disable no-useless-escape */\r\nimport { formatText } from \"./common\";\r\n\r\nasync function mathMode(capture, extra = \"\", offset){\r\n\tconst mathContent = capture;\r\n\t\r\n\tif(offset == 0){\r\n\t\tconst labelRegex = /(`.+?`)/g;\r\n\t\tconst labelMatch = Array.from(extra.matchAll(labelRegex))[0] || false;\r\n\t\tconst labelEl = labelMatch ? `\\\\label{eq:${labelMatch[0].slice(1,-1)}}` : \"\";\r\n\r\n\t\treturn `\\n\\\\begin{equation}\\n${labelEl}${mathContent}\\n\\\\end{equation}`;\r\n\t} else {\r\n\t\tconst eqLabel = extra ? await formatText(extra) : \"\";\r\n\t\treturn `$${mathContent.replaceAll(/\\\\\\&/g, \"&\")}$${eqLabel}`;\r\n\t}\r\n}\r\n\r\nasync function parseMathMode(_match, capture, extra, offset){\r\n\treturn await mathMode(capture, extra, offset);\r\n}\r\n\r\nexport {\r\n\tparseMathMode\r\n};","function parseSpecialReferences(_match, type, label){\r\n\treturn `\\\\ref{${type}:${label}}`;\r\n}\r\n\r\nexport default parseSpecialReferences;","import REGEX from \"./regex\";\r\n\r\nfunction citekeyList(first, list){\r\n\tconst fullList = first + list;\r\n\tconst citekeys = Array.from(fullList.matchAll(/(?:\\[\\[@)(.+?)(?:\\]\\])/g)).map(match => match[1]);\r\n\treturn `\\\\cite{${citekeys.join(\", \")}}`;\r\n}\r\n\r\nfunction parseCitekeyInline(_match, pre, citekey){\r\n\treturn `${pre}\\\\textcite{${citekey}}`;\r\n}\r\n\r\nfunction parseCitekeyList(_match, pre, first, list, post){\r\n\treturn `(${pre}${citekeyList(first,list)}${post})`;\r\n}\r\n\r\nfunction parseCitekeyPar(_match, pre, citekey, post){\r\n\treturn `(${pre}\\\\cite{${citekey}}${post})`;\r\n}\r\n\r\nfunction replaceCitekeys(string){\r\n\tlet output = string;\r\n\t// Lists within parentheses\r\n\toutput = output.replaceAll(REGEX.citekeyList, parseCitekeyList);\r\n\t// Single citations within parentheses\r\n\toutput = output.replaceAll(REGEX.citekeyPar, parseCitekeyPar);\r\n\t// Inline citations\r\n\toutput = output.replaceAll(REGEX.citekey, parseCitekeyInline);\r\n\r\n\treturn output;\r\n}\r\n\r\nexport {\r\n\tparseCitekeyInline,\r\n\tparseCitekeyList,\r\n\tparseCitekeyPar,\r\n\treplaceCitekeys\r\n};","/* eslint-disable no-useless-escape */\r\n\r\nimport { asyncReplaceAll, cleanUpHref } from \"../utils\";\r\n\r\n\r\nimport { isTableBlock, makeTable } from \"./table\";\r\nimport { parseAlias, parseAliasPage, replaceTextFormatting } from \"./markup\";\r\nimport { parseCodeBlock, parseCodeInline } from \"./code\";\r\nimport expandInserts from \"./expand\";\r\nimport parseDoubleBraces from \"./doubleBraces\";\r\nimport { parseImage } from \"./figure\";\r\nimport { parseMathMode } from \"./mathMode\";\r\nimport parseSpecialReferences from \"./specialReferences\";\r\nimport { replaceCitekeys } from \"./citekeys\";\r\n\r\nimport REGEX from \"./regex\";\r\n\r\n\r\nasync function formatText(string){\r\n\tlet output = string;\r\n\r\n\t// RENDERING BLOCK + PAGE REFS/EMBEDS, DOUBLE PARENTHESES ---------\r\n\t// Aka, is there additional text content that needs to be pulled ?\r\n\toutput = await expandInserts(output);\r\n\r\n\t// DELETING ELEMENTS : iframe, word-count, block part\r\n\toutput = await asyncReplaceAll(output, REGEX.doubleBraces, parseDoubleBraces);\r\n\r\n\t// REPLACING ELEMENTS\r\n\t// Citekeys\r\n\toutput = replaceCitekeys(output);\r\n\t// Page aliases\r\n\toutput = output.replaceAll(REGEX.aliasPage, parseAliasPage);\r\n\t// Double brackets\r\n\toutput = output.replaceAll(REGEX.doubleBrackets, \"\");\r\n\t// Alias links markup\r\n\toutput = output.replaceAll(REGEX.aliasAll, parseAlias);\r\n\t// Image links markup\r\n\toutput = await asyncReplaceAll(output, REGEX.image, parseImage);\r\n\r\n\t// Code blocks\r\n\toutput = output.replaceAll(REGEX.codeBlock, parseCodeBlock);\r\n\t// Tags : will be removed\r\n\toutput = output.replaceAll(REGEX.tag, \"\");\r\n\r\n\t// In-text references (figures, equations, tables)\r\n\toutput = output.replaceAll(REGEX.specialRef, parseSpecialReferences);\r\n\r\n\t// ESCAPING SPECIAL CHARACTERS --------------\r\n\r\n\tconst spec_chars = [\"&\", \"%\"];\r\n\tspec_chars.forEach(char => {\r\n\t\tconst charRegex = new RegExp(`${char}`, \"g\");\r\n\t\toutput = output.replaceAll(charRegex, \"\\\\$&\");\r\n\t});\r\n\r\n\t// Clean up wrong escapes\r\n\t// Math mode :\r\n\toutput = await asyncReplaceAll(output, REGEX.math, parseMathMode);\r\n\t// URLs :\r\n\tconst urlRegex = /\\\\href\\{(.+?)\\}\\{(.+?)\\}/g;\r\n\toutput = output.replaceAll(urlRegex, (_match, p1, p2) => cleanUpHref({ url: p1, text: p2 }));\r\n\t// Inline code\r\n\toutput = output.replaceAll(REGEX.codeInline, parseCodeInline);\r\n\r\n\t// FORMATTING ACTUAL TEXT -------------------\r\n\t// Blockquote\r\n\tif(output.charAt(0) == \">\"){\r\n\t\toutput = `\\\\begin{quote}${output.slice(1)}\\\\end{quote}`;\r\n\t}\r\n\toutput = replaceTextFormatting(output);\r\n\r\n\t// TODO: clean up calc/etc. ? attributes ?\r\n\t// TODO: strikethrough. Seems like this requires an external package, leaving it aside for now\r\n\r\n\treturn output;\r\n}\r\n\r\nasync function grabRawText(block){\r\n\tlet output = block.string || \"\";\r\n\tif(block.children){\r\n\t\toutput = `${output} ${(await Promise.all(block.children.map(async(child) => await grabRawText(child)))).join(\" \")}`;\r\n\t}\r\n\toutput = await expandInserts(output);\r\n    \r\n\treturn output;\r\n}\r\n\r\nasync function raw(block, start_indent = 0){\r\n\tlet output = \"\";\r\n\t// If the block is a table, stop processing recursively & generate the table element\r\n\tconst is_table_block = isTableBlock(block.string);\r\n\tif(is_table_block.constructor === String){\r\n\t\tconst extra = is_table_block[1];\r\n\t\tconst table = await makeTable(block, start_indent, extra);\r\n\t\toutput = `\\n${table}\\n`;\r\n\t} else {\r\n\t\toutput = await formatText(block.string);\r\n\t\tif(block.children){\r\n\t\t\tconst elems = await Promise.all(block.children.map(async(child) => await raw(child, start_indent)));\r\n\t\t\toutput = `${output}\\\\\\\\${elems.join(\"\\\\\\\\\")}`;\r\n\t\t}\r\n\t}\r\n\treturn output;\r\n}\r\n\r\nexport {\r\n\tformatText,\r\n\tgrabRawText,\r\n\traw\r\n};\r\n","/* eslint-disable no-useless-escape */\r\nimport { formatText, grabRawText, raw } from \"./common\";\r\nimport { isTableBlock, makeTable } from \"./table\";\r\n\r\nimport { makeBibliography, sortRoamBlocks, todayDMY } from \"../utils\";\r\nimport { queryBlockContents } from \"Roam\";\r\n\r\nimport REGEX from \"./regex\";\r\n\r\n\r\nasync function convertBlocks(arr, { document_class = \"book\", numbered = true, start_header = 1 }){\r\n\tconst blocks = sortRoamBlocks(arr);\r\n\r\n\tlet processedOutput = await blocks.reduce(async(output, block) => {\r\n\t\tconst prev = await output;\r\n\t\tlet out;\r\n\r\n\t\tif(block.heading){\r\n\t\t\tconst header = await makeHeader(block.string, { document_class: document_class, numbered: numbered, level: start_header });\r\n\t\t\tout = `${prev}\\n${header}`;\r\n\t\t\tif(block.children){\r\n\t\t\t\tif(block[\"view-type\"] == \"document\" || typeof(block[\"view-type\"]) == \"undefined\"){\r\n\t\t\t\t\tconst elems = await convertBlocks(block.children, { document_class: document_class, numbered: numbered, start_header: start_header+1 });\r\n\t\t\t\t\tout = `${out}${elems}`;\r\n\t\t\t\t} else{\r\n\t\t\t\t\tconst list = await makeList(block.children, block[\"view-type\"], 0);\r\n\t\t\t\t\tout = `${out}${list}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t} else {\r\n\t\t\t// If the block isn't a heading, stop using the header tree for recursion\r\n\t\t\tconst content = await parseBlock(block);\r\n\t\t\tout = `${prev}\\n${content}\\\\\\\\`;\r\n\t\t}\r\n\t\treturn out;\r\n\t}, \"\");\r\n\r\n\tif(processedOutput.slice(-2) == \"\\\\\\\\\"){\r\n\t\tprocessedOutput = processedOutput.slice(0, -2);\r\n\t}\r\n\treturn processedOutput;\r\n}\r\n\r\nasync function _createTEX(exportUID, document_class = \"book\", { numbered = true, cover = true, start_header = 1, authors = \"\", title = \"\" } = {}){\r\n\tconst contents = queryBlockContents(exportUID);\r\n\r\n\t// Scan for citations\r\n\tconst citekeys = await getCitekeysList(contents);\r\n\tlet bibliography = \"\";\r\n\tif(citekeys.length > 0){\r\n\t\ttry{\r\n\t\t\tbibliography = await makeBibliography(citekeys);\r\n\t\t\tif(bibliography && JSON.stringify(bibliography) !== \"\"){\r\n\t\t\t\twindow.latexRoam.addBibliography(bibliography);\r\n\t\t\t}\r\n\t\t} catch(e){\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tconst bibPreamble = bibliography.length > 0 ? \"\\\\usepackage[backend=biber,style=apa,sorting=nyt]{biblatex}\\n\\\\addbibresource{bibliography.bib}\\n\" : \"\";\r\n\tconst bibPrint = bibliography.length > 0 ? \"\\\\medskip\\n\\n\\\\printbibliography\\n\" : \"\";\r\n\r\n\tconst header = `\\n\\\\documentclass{${document_class}}\\n\\\\title{${title}}\\n\\\\author{${authors}}\\n\\\\date{${todayDMY()}}\\n\\n\\\\usepackage{amsmath}\\n\\\\usepackage{graphicx}\\n\\\\usepackage{soul}\\n${bibPreamble}\\\\usepackage{hyperref}\\n\\\\hypersetup{colorlinks=true,citecolor=black}\\n\\n\\\\begin{document}\\n${cover ? \"\\\\maketitle\" : \"\"}`;\r\n\r\n\tlet body = \"\";\r\n\ttry{\r\n\t\tbody += await convertBlocks(contents.children, { document_class: document_class, numbered: numbered, start_header: start_header });\r\n\t} catch(e){\r\n\t\tconsole.error(e);\r\n\t}\r\n\r\n\tconst footer = `\\n${bibPrint}\\\\end{document}`;\r\n\r\n\treturn `${header}\\n${body}\\n${footer}`;\r\n}\r\n\r\n// `entity` is the dictionary returned for the current page/current block (i.e, by queryBlockContents or queryPageContentsByTitle)\r\n// This function returns an Array containing all the (unique) citekey references contained in the entity's contents\r\n// Citekey tags aren't taken into account\r\nasync function getCitekeysList(entity){\r\n\treturn [...new Set(Array.from((await grabRawText(entity)).matchAll(REGEX.refCitekey)).map(regexmatch => regexmatch[1]))];\r\n}\r\n\r\n\r\nasync function makeHeader(string, { document_class = \"book\", numbered = true, level = 1 } = {}){\r\n\tconst text = await formatText(string);\r\n\r\n\tlet cmd = \"\";\r\n\tconst header_level = (document_class == \"article\") ? (level + 1) : level;\r\n\tswitch(header_level){\r\n\tcase 1:\r\n\t\tcmd = \"chapter\";\r\n\t\tbreak;\r\n\tcase 2:\r\n\t\tcmd = \"section\";\r\n\t\tbreak;\r\n\tcase 3:\r\n\t\tcmd = \"subsection\";\r\n\t\tbreak;\r\n\tcase 4:\r\n\t\tcmd = \"subsubsection\";\r\n\t\tbreak;\r\n\tdefault:\r\n\t\treturn `${text}\\\\\\\\`;\r\n\t}\r\n\r\n\treturn `\\\\${cmd}${(!numbered) ? \"*\" : \"\"}{${text}}\\n`;\r\n}\r\n\r\nasync function makeList(elements, type, start_indent = 0){\r\n\tconst nesting_level = start_indent/2 + 1;\r\n\tconst list_indent = \"\\t\".repeat(start_indent);\r\n\tif(nesting_level <= 4){\r\n\t\tconst cmd = (type == \"bulleted\") ? \"itemize\" : \"enumerate\";\r\n\t\tconst blocks = await Promise.all(elements.map(async(el) => {\r\n\t\t\tconst elemContents = await parseListElement(el, start_indent+1);\r\n\t\t\treturn `${\"\\t\".repeat(start_indent+1)}${elemContents}`;\r\n\t\t}));\r\n\t\treturn `${list_indent}\\\\begin{${cmd}}\\n${blocks.join(\"\\n\")}\\n${list_indent}\\\\end{${cmd}}`;\r\n\t} else {\r\n\t\tconst blocks = await Promise.all(elements.map(async(el) => await raw(el, start_indent)));\r\n\t\treturn `${list_indent}${blocks.join(\"\\\\\\\\\")}`;\r\n\t}\r\n}\r\n\r\nasync function parseBlock(block){\r\n\tlet output = \"\";\r\n\t// If the block is a table, stop processing recursively & generate the table element\r\n\tconst is_table_block = isTableBlock(block.string);\r\n\tif(is_table_block.constructor === String){\r\n\t\tconst extra = is_table_block[1];\r\n\t\toutput = await makeTable(block, 0, extra);\r\n\t} else {\r\n\t\t// Do stuff to process the children of a non-heading, non-table block\r\n\t\tconst text = await formatText(block.string);\r\n\t\toutput = `${text}`;\r\n\t\tif(block.children){\r\n\t\t\tconst children = sortRoamBlocks(block.children);\r\n\t\t\tconst format = (block[\"view-type\"]) ? block[\"view-type\"] : \"bulleted\";\r\n\t\t\tswitch(format){\r\n\t\t\tcase \"document\":{\r\n\t\t\t\tconst elems = await Promise.all(children.map(async(child) => await parseBlock(child)));\r\n\t\t\t\toutput = `${output}\\\\\\\\\\n${elems.join(\"\\\\\\\\\")}`;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"bulleted\":\r\n\t\t\tcase \"numbered\":\r\n\t\t\tdefault:{\r\n\t\t\t\tconst list = await makeList(children, format, 0);\r\n\t\t\t\toutput = `${output}\\n${list}`;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn output;\r\n}\r\n\r\nasync function parseListElement(block, start_indent){\r\n\tlet output = \"\";\r\n\tconst is_table_block = isTableBlock(block.string);\r\n\tif(is_table_block.constructor === String){\r\n\t\tconst extra = is_table_block[1];\r\n\t\tconst table = await makeTable(block, start_indent+1, extra);\r\n\t\toutput = `\\\\item{\\n${table}}`;\r\n\t} else {\r\n\t\tconst format = (block[\"view-type\"]) ? block[\"view-type\"] : \"bulleted\";\r\n\t\tswitch(format){\r\n\t\t// If the list item is in \"Document\" mode, pull all of its content as raw & use that as the list item, with newline separation\r\n\t\tcase \"document\": {\r\n\t\t\tconst content = await raw(block, start_indent+1);\r\n\t\t\toutput = `\\\\item{${content}}`;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t// Otherwise, use the string as the list item & render a sublist\r\n\t\tcase \"bulleted\":\r\n\t\tcase \"numbered\":\r\n\t\tdefault:{\r\n\t\t\tconst text = await formatText(block.string);\r\n\t\t\tif(block.children){\r\n\t\t\t\tconst list = await makeList(block.children, format, start_indent + 1);\r\n\t\t\t\toutput = `\\\\item{${text}}\\n${list}`;\r\n\t\t\t} else{\r\n\t\t\t\toutput = `\\\\item{${text}}`;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\treturn output;\r\n}\r\n\r\nexport {\r\n\t_createTEX,\r\n\tmakeHeader,\r\n\tmakeList,\r\n\tparseBlock\r\n};\r\n","import { downloadZip } from \"client-zip\";\r\n\r\nimport { _createTEX } from \"./translator/createTEX\";\r\n\r\n\r\nexport const DEFAULT_OUTPUT = {\r\n\tbib: {\r\n\t\tcontent: \"\",\r\n\t\tblob: null,\r\n\t\tblobURL: null\r\n\t},\r\n\tfigs: {\r\n\t\tlist: [],\r\n\t\tblob: null,\r\n\t\tblobURL: null\r\n\t},\r\n\ttex: {\r\n\t\tcontent: \"\",\r\n\t\tblob: null,\r\n\t\tblobURL: null\r\n\t},\r\n\tpackage: {\r\n\t\tblob: null,\r\n\t\tblobURL: null\r\n\t}\r\n};\r\n\r\n\r\nexport class ExportManager {\r\n\tconstructor(){\r\n\t\tthis.bib = { ...DEFAULT_OUTPUT.bib };\r\n\t\tthis.figs = { ...DEFAULT_OUTPUT.figs };\r\n\t\tthis.tex = { ...DEFAULT_OUTPUT.tex };\r\n\t\tthis.package = { ...DEFAULT_OUTPUT.package };\r\n\t}\r\n\r\n\t#resetBlobBib(){\r\n\t\tif(this.bib.blob != null){ \r\n\t\t\tURL.revokeObjectURL(this.bib.blobURL);\r\n\t\t\tthis.bib.blob = null;\r\n\t\t\tthis.bib.blobURL = null;\r\n\t\t}\r\n\t}\r\n\r\n\t#resetBlobFigs(){\r\n\t\tif(this.figs.blob != null){ \r\n\t\t\tURL.revokeObjectURL(this.figs.blobURL);\r\n\t\t\tthis.figs.blob = null;\r\n\t\t\tthis.figs.blobURL = null;\r\n\t\t}\r\n\t}\r\n\r\n\t#resetBlobTEX(){\r\n\t\tif(this.tex.blob != null){ \r\n\t\t\tURL.revokeObjectURL(this.tex.blobURL);\r\n\t\t\tthis.tex.blob = null;\r\n\t\t\tthis.tex.blobURL = null;\r\n\t\t}\r\n\t}\r\n\r\n\t#resetBlobPackage(){\r\n\t\tif(this.package.blob != null){\r\n\t\t\tURL.revokeObjectURL(this.package.blobURL);\r\n\t\t\tthis.package.blob = null;\r\n\t\t\tthis.package.blobURL = null;\r\n\t\t}\r\n\t}\r\n\r\n\t#resetToDefault(){\r\n\t\tthis.bib = { ...DEFAULT_OUTPUT.bib };\r\n\t\tthis.figs = { \r\n\t\t\t...DEFAULT_OUTPUT.figs,\r\n\t\t\tlist: []\r\n\t\t};\r\n\t\tthis.tex = { ...DEFAULT_OUTPUT.tex };\r\n\t\tthis.package = { ...DEFAULT_OUTPUT.package };\r\n\t}\r\n\r\n\tresetExport(){\r\n\t\t// Clean up artefacts\r\n\t\tthis.#resetBlobBib();\r\n\t\tthis.#resetBlobFigs();\r\n\t\tthis.#resetBlobTEX();\r\n\t\tthis.#resetBlobPackage();\r\n\r\n\t\tthis.#resetToDefault();\r\n\t}\r\n\r\n\t#updateTEX(tex){\r\n\t\tif(tex != this.tex.content){\r\n\t\t\tthis.#resetBlobTEX();\r\n\t\t\tthis.tex = { ...DEFAULT_OUTPUT.tex };\r\n\r\n\t\t\tconst blob = new Blob([tex], { type: \"text/plain\" });\r\n\r\n\t\t\tthis.tex ={\r\n\t\t\t\tcontent: tex,\r\n\t\t\t\tblob,\r\n\t\t\t\tblobURL: URL.createObjectURL(blob)\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\taddBibliography(bibliography){\r\n\t\tthis.#resetBlobBib();\r\n\t\tthis.bib = { ...DEFAULT_OUTPUT.bib };\r\n\r\n\t\tconst blob = new Blob([bibliography], { type: \"text/plain\" });\r\n        \r\n\t\tthis.bib = {\r\n\t\t\tcontent: bibliography,\r\n\t\t\tblob,\r\n\t\t\tblobURL: URL.createObjectURL(blob)\r\n\t\t};\r\n\t}\r\n\r\n\tasync addFigure(url, fileExt){\r\n\t\tlet figCount = -1;\r\n\r\n\t\tconst figFile = await fetch(url, { method: \"GET\" });\r\n\t\tconst figBlob = await figFile.blob();\r\n\t\tfigCount = this.figs.list.length + 1;\r\n\r\n\t\tthis.figs.list.push({\r\n\t\t\tinput: figBlob,\r\n\t\t\tname: `figure-${figCount}.${fileExt}`\r\n\t\t});\r\n\r\n\t\treturn figCount;\r\n\t}\r\n\r\n\tasync #zipFigures(){\r\n\t\tif(this.figs.list.length > 0){\r\n\t\t\tconst blob = await downloadZip(this.figs.list).blob();\r\n\t\t\tthis.#resetBlobFigs();\r\n\r\n\t\t\tthis.figs.blob = blob;\r\n\t\t\tthis.figs.blobURL = URL.createObjectURL(blob);\r\n\t\t}\r\n\t}\r\n\r\n\tasync #zipPackage(title){\r\n\t\tconst packageFiles = [\r\n\t\t\t...this.figs.list,\r\n\t\t\t{ name: `${title}.tex`, input: this.tex.content }\r\n\t\t];\r\n\t\tif(this.bib.blob != null){ packageFiles.push({ name: \"bibliography.bib\", input: this.bib.blob }); }\r\n\r\n\t\tconst blob = await downloadZip(packageFiles).blob();\r\n\t\tthis.#resetBlobPackage();\r\n\r\n\t\tthis.package.blob = blob;\r\n\t\tthis.package.blobURL = URL.createObjectURL(blob);\r\n\t}\r\n\r\n\tasync #createTEX(uid, config){\r\n\t\tconst { document_class, ...rest } = config;\r\n\t\treturn await _createTEX(uid, document_class, { ...rest });\r\n\t}\r\n\r\n\tasync generateExport(uid, config){\r\n\t\tthis.resetExport();\r\n    \r\n\t\t// Processing of page contents\r\n\t\tconst texOutput = await this.#createTEX(uid, config);\r\n\r\n\t\tthis.#updateTEX(texOutput);\r\n\t\t// Prepare .zip of figures for download\r\n\t\tawait this.#zipFigures();\r\n\t\t// Prepare .zip of full package for download\r\n\t\tawait this.#zipPackage(config.title);\r\n\r\n\t\treturn {\r\n\t\t\tbib: this.bib,\r\n\t\t\tfigs: this.figs,\r\n\t\t\ttex: this.tex,\r\n\t\t\tpackage: this.package\r\n\t\t};\r\n\t}\r\n}\r\n","/** @constant {String} The extension's current version (from package.json) */\r\nexport const EXTENSION_VERSION = require(\"../package.json\").version;\r\n\r\n/** @constant {String} The HTML id for the extension's icon's container */\r\nexport const EXTENSION_SLOT_ID = \"latex-roam-slot\";\r\n\r\nexport const CustomClasses = {\r\n\tBUTTON_CLASS: \"latex-roam--button\",\r\n\tDIALOG_CLASS: \"latex-roam--dialog\",\r\n\tMENU_CLASS: \"latex-roam--menu\",\r\n\tPOPOVER_CLASS: \"latex-roam-popover\"\r\n};","import { bool, func, string } from \"prop-types\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { AnchorButton, Button, Classes, Dialog, InputGroup, Label, MenuItem, Switch, TextArea } from \"@blueprintjs/core\";\r\nimport { Select } from \"@blueprintjs/select\";\r\n\r\nimport useBool from \"../../hooks/useBool\";\r\nimport useSelect from \"../../hooks/useSelect\";\r\nimport useText from \"../../hooks/useText\";\r\n\r\nimport { DEFAULT_OUTPUT } from \"../../extension\";\r\n\r\nimport { CustomClasses } from \"../../constants\";\r\n\r\n\r\nconst popoverProps = {\r\n\tminimal: true,\r\n\tpopoverClassName: CustomClasses.POPOVER_CLASS\r\n};\r\n\r\nconst documentClasses = {\r\n\t\"article\": \"Article\",\r\n\t\"book\": \"Book\",\r\n\t\"report\": \"Report\"\r\n};\r\n\r\nconst headers = {\r\n\t\"1\": \"Start with header 1\",\r\n\t\"2\": \"Start with header 2\",\r\n\t\"3\": \"Start with header 3\",\r\n\t\"4\": \"Start with header 4\"\r\n};\r\n\r\nfunction itemRenderer(item, itemProps) {\r\n\tconst { handleClick, modifiers: { active } } = itemProps;\r\n\r\n\treturn <MenuItem active={active} key={item} onClick={handleClick} text={item} />;\r\n}\r\n\r\nfunction ExportDialog({ isOpen, onClose, uid }){\r\n\tconst [output, setOutput] = useState({ ...DEFAULT_OUTPUT });\r\n\tconst outputArea = useRef();\r\n\tconst [document_class, setDocumentClass] = useSelect({\r\n\t\tstart: \"report\"\r\n\t});\r\n\tconst [authors, setAuthors] = useText(\"\");\r\n\tconst [title, setTitle] = useText(\"\");\r\n\tconst [cover, { toggle: toggleCover }] = useBool(true);\r\n\tconst [numberedHeaders, { toggle: toggleNumberedHeaders }] = useBool(true);\r\n\tconst [startWithHeader, setStartWithHeader] = useSelect({\r\n\t\tstart: \"1\"\r\n\t});\r\n\r\n\tconst onOpening = useCallback(() => {\r\n\t\tsetTitle({ target: { value: document.title } });\r\n\t}, [setTitle]);\r\n\r\n\tconst handleClose = useCallback(() => {\r\n\t\twindow.latexRoam.resetExport();\r\n\t\tsetOutput({ ...DEFAULT_OUTPUT });\r\n\t\tonClose();\r\n\t}, [onClose]);\r\n\r\n\tconst triggerExport = useCallback(async() => {\r\n\t\tconst client = window.latexRoam;\r\n\t\tclient.resetExport();\r\n\t\tconst exportOutput = await client.generateExport(\r\n\t\t\tuid,\r\n\t\t\t{ \r\n\t\t\t\tauthors, \r\n\t\t\t\tcover,\r\n\t\t\t\tdocument_class, \r\n\t\t\t\tnumbered: numberedHeaders, \r\n\t\t\t\tstart_header: Number(startWithHeader),\r\n\t\t\t\ttitle\r\n\t\t\t});\r\n\t\tsetOutput(exportOutput);\r\n\t}, [uid, authors, cover, document_class, numberedHeaders, startWithHeader, title]);\r\n\r\n\t/* istanbul ignore next */\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\twindow.latexRoam.resetExport();\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn <Dialog \r\n\t\tclassName={CustomClasses.DIALOG_CLASS} \r\n\t\tisCloseButtonShown={true}\r\n\t\tisOpen={isOpen} \r\n\t\tonClose={handleClose} \r\n\t\tonOpening={onOpening}\r\n\t\ttitle=\"Export to LaTeX\" >\r\n\t\t<div className={Classes.DIALOG_BODY}>\r\n\t\t\t<div id=\"latex-roam-export-div\">\r\n\t\t\t\t<div className=\"latex-roam--settings-row\">\r\n\t\t\t\t\t<Label>Document class :</Label>\r\n\t\t\t\t\t<Select \r\n\t\t\t\t\t\tfilterable={false}\r\n\t\t\t\t\t\titemRenderer={itemRenderer}\r\n\t\t\t\t\t\titems={Object.keys(documentClasses)}\r\n\t\t\t\t\t\tonItemSelect={setDocumentClass}\r\n\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t\tpopoverProps={popoverProps}>\r\n\t\t\t\t\t\t<Button minimal={true} rightIcon=\"double-caret-vertical\" text={documentClasses[document_class]} />\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t<Switch checked={cover} label=\"Use cover title\" onChange={toggleCover} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"latex-roam--settings-row\">\r\n\t\t\t\t\t<Label>Author(s) :</Label>\r\n\t\t\t\t\t<InputGroup\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tonChange={setAuthors}\r\n\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tvalue={authors}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Label>Title :</Label>\r\n\t\t\t\t\t<InputGroup\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tonChange={setTitle}\r\n\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"latex-roam--settings-row\">\r\n\t\t\t\t\t<Label>Headers :</Label>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tfilterable={false}\r\n\t\t\t\t\t\titemRenderer={itemRenderer}\r\n\t\t\t\t\t\titems={Object.keys(headers)}\r\n\t\t\t\t\t\tonItemSelect={setStartWithHeader}\r\n\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t\tpopoverProps={popoverProps} >\r\n\t\t\t\t\t\t<Button minimal={true} rightIcon=\"double-caret-vertical\" text={headers[startWithHeader]} />\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t<Switch checked={numberedHeaders} label=\"Use numbers\" onChange={toggleNumberedHeaders} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button id=\"latex-roam-export-trigger\" intent=\"success\" onClick={triggerExport} text=\"Export page contents\" />\r\n\t\t\t</div>\r\n\t\t\t{output.tex.content.length > 0\r\n\t\t\t\t? <form\r\n\t\t\t\t\taction=\"https://www.overleaf.com/docs\"\r\n\t\t\t\t\tclassName={Classes.FILL} \r\n\t\t\t\t\tid=\"latex-roam-export-form\"\r\n\t\t\t\t\tmethod=\"POST\"\r\n\t\t\t\t\ttarget=\"_blank\" >\r\n\t\t\t\t\t<TextArea aria-label=\"Generated LaTeX output\" id=\"latex-roam-export-contents\" fill={true} growVertically={false} inputRef={outputArea} name=\"snip\" readOnly={true} small={true} style={{ height: \"200px\" }} value={output.tex.content} />\r\n\t\t\t\t\t<Button id=\"latex-roam--overleaf-trigger\" intent=\"success\" text=\"Export to Overleaf\" type=\"submit\" />\r\n\t\t\t\t</form>\r\n\t\t\t\t: null}\r\n\t\t</div>\r\n\t\t<div className={Classes.DIALOG_FOOTER}>\r\n\t\t\t<div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n\t\t\t\t{output.bib.blobURL\r\n\t\t\t\t\t? <AnchorButton download=\"bibliography.bib\" href={output.bib.blobURL} outlined={true} text=\"Download bibliography\" />\r\n\t\t\t\t\t: null}\r\n\t\t\t\t{output.figs.blobURL\r\n\t\t\t\t\t? <AnchorButton download=\"figures.zip\" href={output.figs.blobURL} outlined={true} text={\"Download figures (\" + output.figs.list.length + \")\"} />\r\n\t\t\t\t\t: null}\r\n\t\t\t\t{output.tex.blobURL\r\n\t\t\t\t\t? <AnchorButton download={title + \".tex\"} href={output.tex.blobURL} outlined={true} text=\"Download .tex file\" />\r\n\t\t\t\t\t: null}\r\n\t\t\t\t{output.package.blobURL\r\n\t\t\t\t\t? <AnchorButton download={title + \".zip\"} href={output.package.blobURL} intent=\"primary\" outlined={true} text=\"Download all files\" />\r\n\t\t\t\t\t: null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</Dialog>;\r\n}\r\nExportDialog.propTypes = {\r\n\tisOpen: bool,\r\n\tonClose: func,\r\n\tuid: string\r\n};\r\n\r\nexport default ExportDialog;\r\n","import { string } from \"prop-types\";\r\n\r\nimport { Button } from \"@blueprintjs/core\";\r\nimport ExportDialog from \"../ExportDialog\";\r\n\r\nimport useBool from \"../../hooks/useBool\";\r\n\r\nimport { CustomClasses } from \"../../constants\";\r\n\r\n\r\nfunction ExportButton({ uid }){\r\n\tconst [isDialogOpen, { on: openDialog, off: closeDialog }] = useBool(false);\r\n\r\n\treturn <>\r\n\t\t<Button className={CustomClasses.BUTTON_CLASS} icon=\"rect-width\" minimal={true} onClick={openDialog} text=\"LaTeX\" />\r\n\t\t<ExportDialog isOpen={isDialogOpen} onClose={closeDialog} uid={uid} />\r\n\t</>;\r\n}\r\nExportButton.propTypes = {\r\n\tuid: string\r\n};\r\n\r\nexport default ExportButton;","/* istanbul ignore file */\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nimport ExportButton from \"../ExportButton\";\r\n\r\nimport { addMenuDivs, findMenus } from \"./utils\";\r\nimport { hasNodeListChanged } from \"../../utils\";\r\n\r\nimport { CustomClasses } from \"../../constants\";\r\n\r\n\r\nconst GraphWatcher = React.memo(function GraphWatcher(){\r\n\t// From React Docs : https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html\r\n\t// https://jasonwatmore.com/post/2021/08/27/react-how-to-check-if-a-component-is-mounted-or-unmounted\r\n\tconst mounted = useRef(false);\r\n\tconst [menus, setMenus] = useState([]);\r\n\r\n\tconst updatePageElements = useCallback(() => {\r\n\t\t// Page headers\r\n\t\tsetMenus((prevState) => {\r\n\t\t\tconst currentMenus = findMenus();\r\n\t\t\tif(hasNodeListChanged(prevState, currentMenus)){\r\n\t\t\t\treturn currentMenus;\r\n\t\t\t} else {\r\n\t\t\t\treturn prevState;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tmounted.current = true;\r\n\t\t// The watcher adds empty <div>s to relevant page elements\r\n\t\t// The contents of the <div>s will be managed by rendering portals\r\n\t\tconst watcher = setInterval(\r\n\t\t\t() => {\r\n\t\t\t\taddMenuDivs();\r\n\r\n\t\t\t\tif(mounted.current){\r\n\t\t\t\t\tupdatePageElements();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\treturn () => {\r\n\t\t\tmounted.current = false;\r\n\t\t\tclearInterval(watcher);\r\n\t\t\tArray.from(document.querySelectorAll(`[class=\"${CustomClasses.MENU_CLASS}\"]`))\r\n\t\t\t\t.forEach(div => div.remove());\r\n\t\t};\r\n\t}, [updatePageElements]);\r\n\r\n\treturn menus \r\n\t\t? menus.map((div, index) => {\r\n\t\t\tconst pageUID = div.getAttribute(\"data-uid\");\r\n\t\t\treturn pageUID\r\n\t\t\t\t? createPortal(<ExportButton key={index} uid={pageUID} />, div)\r\n\t\t\t\t: null;\r\n\t\t})\r\n\t\t: null;\r\n});\r\n\r\nexport default GraphWatcher;\r\n","import { CustomClasses } from \"../../constants\";\r\nimport { findRoamPage } from \"Roam\";\r\n\r\n/* istanbul ignore next */\r\nconst findMenus = () =>{\r\n\treturn Array.from(document.querySelectorAll(`[class=\"${CustomClasses.MENU_CLASS}\"]`));\r\n};\r\n\r\n/* istanbul ignore next */\r\nfunction addMenuDivs(){\r\n\tlet newHeaders = Array.from(document.querySelectorAll(\"h1.rm-title-display\"))\r\n\t\t.filter(page => !(page.parentElement.querySelector(`[class=\"${CustomClasses.MENU_CLASS}\"]`)));\r\n\r\n\tfor(const header of newHeaders){\r\n\t\tlet title = header.querySelector(\"span\") ? header.querySelector(\"span\").innerText : header.innerText;\r\n\t\tlet pageUID = findRoamPage(title);\r\n\r\n\t\tlet menu = document.createElement(\"div\");\r\n\t\tmenu.classList.add(CustomClasses.MENU_CLASS);\r\n\t\tmenu.setAttribute(\"data-title\", title);\r\n\t\tif(pageUID) { menu.setAttribute(\"data-uid\", pageUID); }\r\n\r\n\t\theader.insertAdjacentElement(\"afterend\", menu);\r\n\t}\r\n}\r\n\r\nexport {\r\n\taddMenuDivs,\r\n\tfindMenus\r\n};","/* istanbul ignore file */\r\nimport { shape, string } from \"prop-types\";\r\nimport { Component } from \"react\";\r\n\r\nimport ExportDialog from \"./ExportDialog\";\r\nimport GraphWatcher from \"./GraphWatcher\";\r\n\r\n\r\nimport { addBlockMenuCommand } from \"Roam\";\r\n\r\nclass App extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdialogIsOpen: false,\r\n\t\t\texportUID: null\r\n\t\t};\r\n\t\tthis.closeDialog = this.closeDialog.bind(this);\r\n\t\tthis.openDialog = this.openDialog.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\taddBlockMenuCommand(\"Export to LaTeX\", (entity) => {\r\n\t\t\tthis.openDialog(entity[\"block-uid\"]);\r\n\t\t});\r\n\t}\r\n\r\n\trender(){\r\n\r\n\t\tconst { dialogIsOpen, exportUID } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<GraphWatcher />\r\n\t\t\t\t<ExportDialog isOpen={dialogIsOpen} onClose={this.closeDialog} uid={exportUID} />\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tcloseDialog(){\r\n\t\tthis.setState((_prev) => ({ dialogIsOpen: false, exportUID: null }));\r\n\t}\r\n\r\n\topenDialog(uid){\r\n\t\tif(uid){\r\n\t\t\tthis.setState((_prev) => ({ dialogIsOpen: true, exportUID: uid }));\r\n\t\t}\r\n\t}\r\n}\r\nApp.propTypes = {\r\n\textension: shape({\r\n\t\tversion: string\r\n\t})\r\n};\r\n\r\nexport default App;\r\n","import { unmountComponentAtNode } from \"react-dom\";\r\n\r\nimport { EXTENSION_SLOT_ID } from \"./constants\";\r\n\r\n\r\nexport function setupInitialSettings(settingsObject){\r\n\tconst {\r\n\t\tother = {}\r\n\t} = settingsObject;\r\n\r\n\treturn {\r\n\t\tother: {\r\n\t\t\tdarkTheme: false,\r\n\t\t\t...other\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function initialize({ extensionAPI }){\r\n\tconst current = extensionAPI.settings.getAll();\r\n\tconst settings = setupInitialSettings(current || {});\r\n\r\n\tObject.entries(settings).forEach(([key, val]) => {\r\n\t\textensionAPI.settings.set(key, val);\r\n\t});\r\n\r\n\treturn {\r\n\t\tsettings\r\n\t};\r\n}\r\n\r\n/* istanbul ignore next */\r\n/** Sets up the extension's theme (light vs dark)\r\n * @param {Boolean} use_dark - If the extension's theme should be `dark`\r\n */\r\nfunction setupDarkTheme(use_dark = false){\r\n\tdocument.getElementsByTagName(\"body\")[0].setAttribute(\"latex-roam-dark-theme\", (use_dark == true).toString());\r\n}\r\n\r\n/* istanbul ignore next */\r\n/** Injects DOM elements to be used as React portals by the extension */\r\nfunction setupPortals(){\r\n\r\n\tunmountExtensionIfExists();\r\n\r\n\tconst extensionSlot = document.createElement(\"div\");\r\n\textensionSlot.id = EXTENSION_SLOT_ID;\r\n\tdocument.getElementById(\"app\").appendChild(extensionSlot);\r\n\r\n}\r\n\r\n/* istanbul ignore next */\r\n/** Sets up the extension */\r\nexport function setup({ settings }){\r\n\tsetupPortals();\r\n\tsetupDarkTheme(settings.other.darkTheme);\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function unmountExtensionIfExists(){\r\n\tconst existingSlot = document.getElementById(EXTENSION_SLOT_ID);\r\n\tif(existingSlot){\r\n\t\ttry{\r\n\t\t\tunmountComponentAtNode(existingSlot);\r\n\t\t\texistingSlot.remove();\r\n\t\t} catch(e){\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t}\r\n}","/* istanbul ignore file */\r\nimport { render } from \"react-dom\";\r\n\r\nimport App from \"./components/App\";\r\n\r\nimport { initialize, setup, unmountExtensionIfExists } from \"./setup\";\r\n\r\nimport { EXTENSION_SLOT_ID, EXTENSION_VERSION } from \"./constants\";\r\n\r\nimport \"./index.css\";\r\nimport { ExportManager } from \"./extension\";\r\n\r\n\r\nfunction onload({ extensionAPI }){\r\n\tconst { settings } = initialize({ extensionAPI });\r\n\r\n\twindow.latexRoam = new ExportManager();\r\n\r\n\tsetup({ settings });\r\n\r\n\trender(\r\n\t\t<App extension={{ \r\n\t\t\tversion: EXTENSION_VERSION \r\n\t\t}}/>, \r\n\t\tdocument.getElementById(EXTENSION_SLOT_ID)\r\n\t);\r\n\r\n}\r\n\r\nfunction offload(){\r\n\tunmountExtensionIfExists();\r\n\twindow.latexRoam.resetExport();\r\n\tdelete window.latexRoam;\r\n}\r\n\r\nexport default {\r\n\tonload: onload,\r\n\tonunload: offload\r\n};","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0,\n\t532: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_alixlahuec_latex_roam\"] = self[\"webpackChunk_alixlahuec_latex_roam\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [532], () => (__webpack_require__(502)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","window","initialState","useState","state","setState","toggle","useCallback","prevState","set","value","on","off","defaultTransform","start","transform","event","currentTarget","target","Blob","prototype","Object","defineProperty","Response","this","body","DataView","e","n","i","o","Number","f","setUint32","ArrayBuffer","Uint8Array","buffer","Math","min","s","Date","File","name","lastModified","A","stream","headers","get","match","a","URL","url","pathname","split","pop","r","decodeURIComponent","now","length","Error","isNaN","ReadableStream","isView","Symbol","asyncIterator","TypeError","async","desiredSize","next","close","enqueue","byteLength","TextEncoder","encode","String","WebAssembly","Instance","Module","from","atob","charCodeAt","t","c","m","exports","d","subarray","u","y","getSeconds","getMinutes","getHours","getDate","getMonth","getFullYear","setUint16","l","B","BigInt","getReader","done","read","w","setBigUint64","b","C","downloadZip","push","input","asyncReplaceAll","str","regex","asyncReplaceFn","substrs","regexClone","RegExp","flags","exec","slice","index","lastIndex","Promise","all","join","cleanUpHref","text","replaceAll","makeBibliography","citekeys","zoteroRoam","instance","getBibEntries","sortRoamBlocks","arr","sort","order","todayDMY","today","dd","padStart","mm","yyyy","isTableBlock","string","Array","matchAll","REGEX","traverseTable","block","children","reduce","rows","child","prev","traverseRow","content","storeCell","map","path","flat","formatText","charAt","align","makeTable","start_indent","extra","table_indent","repeat","afterTextMatch","labelRegex","labelMatch","labelEl","replace","trim","descEl","n_cols","align_seq","col","fills","row_indent","textRows","row","cell","parseAlias","_match","p1","p2","parseAliasPage","parseBold","parseHighlight","parseItalics","replaceTextFormatting","output","parseCodeBlock","capture","codeBlock","parseCodeInline","codeInline","findRoamPage","title","pageSearch","roamAlphaAPI","q","getBlockText","uid","queryBlockContents","queryPageContentsByTitle","doublePar","mode","isBlockRef","grabRawText","parseBlockAlias","parseDoublePars","blockEmbed","blockContents","raw","parseBlockEmbed","_p1","_p2","p3","pageEmbed","pageContents","elems","elemContents","parsePageEmbed","parsePopover","replacePopover","pre","_post","includes","parseDoubleBraces","figure","caption","cleanURL","fileInfo","fileExt","latexRoam","addFigure","figIndex","desc","extraContent","filter","Boolean","parseImage","mathMode","offset","mathContent","eqLabel","parseMathMode","type","label","parseCitekeyInline","citekey","parseCitekeyList","first","list","post","fullList","citekeyList","parseCitekeyPar","replaceCitekeys","expandInserts","parseSpecialReferences","forEach","char","charRegex","urlRegex","is_table_block","constructor","table","convertBlocks","document_class","numbered","start_header","blocks","heading","makeHeader","level","header","out","makeList","parseBlock","processedOutput","_createTEX","exportUID","cover","authors","contents","getCitekeysList","bibliography","JSON","stringify","addBibliography","console","error","bibPreamble","bibPrint","footer","entity","Set","regexmatch","cmd","header_level","elements","nesting_level","list_indent","el","parseListElement","format","DEFAULT_OUTPUT","bib","blob","blobURL","figs","tex","package","ExportManager","createObjectURL","figCount","fetch","method","figFile","figBlob","config","resetExport","texOutput","revokeObjectURL","packageFiles","rest","EXTENSION_VERSION","require","EXTENSION_SLOT_ID","CustomClasses","popoverProps","minimal","popoverClassName","documentClasses","itemRenderer","item","itemProps","handleClick","active","modifiers","MenuItem","key","onClick","ExportDialog","isOpen","onClose","setOutput","outputArea","useRef","useSelect","setDocumentClass","useText","setAuthors","setTitle","useBool","toggleCover","numberedHeaders","toggleNumberedHeaders","startWithHeader","setStartWithHeader","onOpening","document","handleClose","triggerExport","client","generateExport","exportOutput","useEffect","Dialog","className","isCloseButtonShown","Classes","id","Label","Select","filterable","items","keys","onItemSelect","placement","Button","rightIcon","Switch","checked","onChange","InputGroup","autoComplete","spellCheck","intent","action","TextArea","fill","growVertically","inputRef","readOnly","small","style","height","AnchorButton","download","href","outlined","propTypes","bool","func","ExportButton","isDialogOpen","openDialog","closeDialog","icon","GraphWatcher","React","mounted","menus","setMenus","updatePageElements","current","currentMenus","querySelectorAll","some","watcher","setInterval","page","parentElement","querySelector","innerText","pageUID","menu","createElement","classList","add","setAttribute","insertAdjacentElement","addMenuDivs","clearInterval","div","remove","getAttribute","createPortal","App","props","dialogIsOpen","bind","ui","blockContextMenu","addCommand","callback","_prev","Component","extension","shape","version","initialize","extensionAPI","settings","other","darkTheme","getAll","entries","val","unmountExtensionIfExists","existingSlot","getElementById","unmountComponentAtNode","onload","extensionSlot","appendChild","setupPortals","use_dark","getElementsByTagName","toString","setupDarkTheme","setup","render","onunload","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","module","shim","propName","componentName","location","propFullName","secret","err","getShim","isRequired","ReactPropTypes","array","bigint","number","object","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","exact","checkPropTypes","PropTypes","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","enumerable","obj","prop","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}